import{Q as B,a as V}from"./QItem.911ffa5f.js";import{Q as A}from"./QCard.605795d5.js";import{Q as se}from"./QList.f06dd0ed.js";import{_ as x,r as G,o as d,e as y,w as s,f as l,g as F,h as v,i as n,R as j,j as h,Q,F as T,k as E,l as k,t as _,m as $e,n as f,p as q,q as xt,s as Y,u as P,v as je,x as Ct,y as Ge,z as Dt,A as qt,B as ye,C as Vt,D as xe,E as me,G as Pt,H as Tt,I as ke,J as Et,K as Mt,L as Lt,M as It,N as Rt,O as Ue}from"./index.321f2a75.js";import{Q as D}from"./QCardSection.e3906341.js";import{Q as At}from"./QPage.4ef5ae0a.js";import{D as Be}from"./DropdownCallMenu.335a7424.js";import{Q as we}from"./QItemLabel.ee9ba05e.js";import{Q as Ut}from"./QBtnDropdown.39a0246c.js";import{C as Bt}from"./ClosePopup.4d93bfbd.js";import{Q as R}from"./QSeparator.378e1fe5.js";import{Q as pe}from"./QChip.663160d5.js";import{Q as re}from"./QCardActions.8b363283.js";import{Q as J}from"./QDialog.155ceb80.js";import{Q as K}from"./QInput.9ae5b315.js";import{Q as ae}from"./QSelect.1eaba5db.js";import{Q as Ce}from"./QForm.fd476d0e.js";import Ft from"./ChangePassword.d7ceb701.js";import{g as Ot}from"./api.c1b7a54b.js";import{Q as Nt}from"./QUploader.2ada097e.js";import{Q as ne}from"./QMarkupTable.6ac75ced.js";import{c as ze}from"./index.5ce110aa.js";import{Q as Qt}from"./QEditor.562d2caa.js";import{u as jt,a as Gt,b as zt}from"./use-form.45c1b99b.js";import{T as Wt}from"./TouchPan.2fdd2902.js";import{u as We,a as He}from"./use-dark.89890713.js";import{b as oe}from"./format.2bc25e5f.js";import{Q as Se}from"./QRadio.80375968.js";import{Q as Ht}from"./QToolbarTitle.216897de.js";import{Q as Kt}from"./QPopupProxy.3b5cde75.js";import{Q as Yt}from"./QSpinnerIos.76fb3c28.js";import"./QBtnGroup.97cb1948.js";import"./QMenu.1274618f.js";import"./selection.0bf889d4.js";import"./use-timeout.87ac005e.js";import"./focusout.26c1c1fd.js";import"./focus-manager.b507780d.js";import"./use-transition.915f958c.js";import"./scroll.36e3c4a7.js";import"./uid.42677368.js";import"./use-prevent-scroll.3531c3d8.js";import"./use-key-composition.439dccc7.js";import"./use-split-attrs.467a65ac.js";import"./axios.98f39043.js";import"./QCircularProgress.0900a808.js";import"./use-file.731498a8.js";import"./touch.3df10340.js";import"./option-sizes.aa1cef36.js";const Jt={},Xt=n("h2",{class:"text-h6 q-px-md"},"Developer Menu",-1);function Zt(e,o,r,m,t,i){const a=G("router-link");return d(),y(se,{bordered:"",separator:""},{default:s(()=>[Xt,l(A,null,{default:s(()=>[l(a,{to:"/account/signup"},{default:s(()=>[F((d(),y(B,null,{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("Signup")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/signin"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("Signin")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/password-reset"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("Forgort Password")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("Account details")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/grant/create"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("New Grant Application")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/proposals/create"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("Proposal")]),_:1})]),_:1})),[[j]])]),_:1})]),_:1})]),_:1})}var eo=x(Jt,[["render",Zt]]);const to={},oo=n("h2",{class:"text-h6 q-px-md"},"Developer Menu",-1),lo={class:"row q-ma-xs"},ao={class:"col"},so={class:"col q-my-auto",align:"center"},ro={class:"flex q-pa-sm"};function no(e,o,r,m,t,i){const a=G("router-link"),u=G("create-proposal-dialog"),p=G("user-logout");return d(),h("div",null,[oo,n("div",lo,[n("div",ao,[l(se,null,{default:s(()=>[l(a,{to:"/account/signup"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Signup")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/signin"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Sign in")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/password-reset"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Forgot Password")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/profile"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Profile")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/password"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Change Password")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/proposals"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Proposals")]),_:1})]),_:1})),[[j]])]),_:1})]),_:1})]),n("div",so,[l(u)])]),n("div",ro,[l(p)])])}var io=x(to,[["render",no]]);const uo={data(){return{}},computed:{menuItems(){return this.$userHasAnyGroups(["applicant"])?[{name:"My Proposals",icon:"note",route:"/applicant/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["reviewer"])?[{name:"Reviews",icon:"note",route:"/proposal-reviews"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["grants_officer"])?[{name:"All Proposals",icon:"note",route:"/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:[]}},created(){},methods:{navigateTo(e){this.$router.push(e)}}},co={class:"q-px-md"};function mo(e,o,r,m,t,i){const a=G("router-link");return d(),h("div",null,[l(se,null,{default:s(()=>[(d(!0),h(T,null,E(i.menuItems,u=>(d(),h("div",{key:u.name},[l(a,{to:u.route,block:""},{default:s(()=>[l(k,{color:"black",class:"full-width",align:"left",icon:u.icon,flat:""},{default:s(()=>[n("span",co,_(u.name),1)]),_:2},1032,["icon"])]),_:2},1032,["to"])]))),128))]),_:1})])}var po=x(uo,[["render",mo]]);const fo={data(){return{}},computed:{menuItems(){return this.$userHasAnyGroups(["applicant"])?[{name:"My Proposals",icon:"note",route:"/applicant/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["reviewer"])?[{name:"Reviews",icon:"note",route:"/proposal-reviews"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["grants_officer"])?[{name:"All Proposals",icon:"note",route:"/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:[]}},created(){},methods:{navigateTo(e){this.$router.push(e)}}},ho={class:"flex justify-cente"},_o={class:"q-pl-sm"};function vo(e,o,r,m,t,i){const a=G("router-link");return d(),y(A,{class:"my-card q-pa-sm",flat:"",bordered:""},{default:s(()=>[n("div",ho,[(d(!0),h(T,null,E(i.menuItems,u=>(d(),h("div",{key:u,class:"q-m-sm text-center"},[l(a,{to:u.route},{default:s(()=>[l(k,{color:"primary",flat:"",outline:""},{default:s(()=>[l(Q,{name:u.icon},null,8,["name"]),n("label",_o,_(u.name.toUpperCase()),1)]),_:2},1024)]),_:2},1032,["to"])]))),128))])]),_:1})}var go=x(fo,[["render",vo]]);const bo=["top","middle","bottom"];var yo=$e({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>bo.includes(e)}},setup(e,{slots:o}){const r=f(()=>e.align!==void 0?{verticalAlign:e.align}:null),m=f(()=>{const t=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(t!==void 0?` text-${t}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>q("div",{class:m.value,style:r.value,role:"status","aria-label":e.label},xt(o.default,e.label!==void 0?[e.label]:[]))}});const ko={class:"q-pt-xl flex flex-center"},wo={class:"q-py-lg flex flex-center"},So={class:"text-h6"},$o=Object.assign({name:"MainPage",components:{DropdownCallMenu:Be},data(){return{showPopup:!1,menuItems:Y([{name:"SUBMISSIONS",route:"/go/proposals/submitted",icon:"description",color:"secondary",roles:["grants_officer"],count:0,click:()=>{this.$utilsStore.setStateData("ProposalList_status_query","SUBMITTED")}},{name:"CALLS",route:"/calls",icon:"campaign",color:"secondary",roles:["grants_officer"],count:0},{name:"REVIEWES",route:"/go/proposals/reviewed",icon:"search",color:"secondary",roles:["grants_officer"],click:()=>{this.$utilsStore.setStateData("ProposalList_status_query","REVIEWED")}},{name:"SELECTED",route:"/go/proposals/selected",icon:"check_circle_outline",color:"secondary",roles:["grants_officer"],click:()=>{this.$utilsStore.setStateData("ProposalList_status_query","SELECTED")}},{name:"THEMES",route:"/themes",icon:"apps",color:"secondary",roles:["grants_officer"]},{name:"REVIEWERS",route:"/reviewers",icon:"people",color:"secondary",roles:["grants_officer"]},{name:"APPLICANTS",route:"/applicants",icon:"people",color:"secondary",roles:["grants_officer"]},{name:"MY PROPOSALS",route:"/applicant/proposals",icon:"search",color:"secondary",roles:["applicant"]},{name:"Apply",route:"",icon:"app_registration",color:"secondary",roles:["applicant"],click:()=>{this.showPopup=!0}},{name:"Proposal Reviews",route:"/proposal-reviews",icon:"search",color:"secondary",roles:["reviewer"]}]),counts:{SELECTED:0,SUBMISSIONS:0}}},created(){this.getCalls()},methods:{getCalls(){this.$api.get("calls/").then(e=>{if(this.calls=e.data,this.calls.length){var o=this.calls[0];this.setCurrentCall(this.$dataStore.currentCall||o),this.getCounts()}else this.setCurrentCall({title:"No Call Found"})})},setCurrentCall(e){this.currentCall=e,this.$dataStore.setCall(this.currentCall)},getCounts(){this.$api.get(`proposals/count/?call=${this.$dataStore.currentCall.id}&is_selected=true`).then(e=>{(e.status=200)&&(this.counts.SELECTED=e.data.count)}),this.$api.get(`proposals/count/?call=${this.$dataStore.currentCall.id}&status=SUBMITTED`).then(e=>{(e.status=200)&&(this.counts.SUBMISSIONS=e.data.count)})}}},{__name:"MainMenu",setup(e){return(o,r)=>{const m=G("create-proposal-dialog"),t=G("router-link"),i=G("useful-docs");return d(),y(At,null,{default:s(()=>[l(m,{showButton:!1,showPopup:o.showPopup,onShowPopupChanged:r[0]||(r[0]=a=>this.showPopup=a)},null,8,["showPopup"]),n("div",ko,[o.$userHasAnyGroups(["grants_officer"])?(d(),y(Be,{key:0})):P("",!0)]),n("div",wo,[(d(!0),h(T,null,E(o.menuItems,a=>(d(),y(t,{key:a.name,to:a.route,onClick:a.click},{default:s(()=>[o.$userHasAnyGroups(a.roles)||a.roles.length==0?(d(),y(k,{key:0,outlined:"",class:je(`text-center q-pa-md q-ma-sm text-${a.color}`),style:{width:"10rem",height:"10rem"}},{default:s(()=>[o.counts[a.name]?(d(),y(yo,{key:0,class:"q-pa-sm justify-center",style:{width:"30px"},color:"primary",floating:"",rounded:""},{default:s(()=>[v(_(o.counts[a.name]),1)]),_:2},1024)):P("",!0),l(Q,{name:a.icon,size:"xl"},null,8,["name"]),l(D,null,{default:s(()=>[n("div",So,_(a.name),1)]),_:2},1024)]),_:2},1032,["class"])):P("",!0)]),_:2},1032,["to","onClick"]))),128))]),l(i)]),_:1})}}}),xo={data(){return{}},computed:{menuItems(){return this.$userHasAnyGroups(["applicant"])?[{name:"REVIEWS",icon:"list",route:`/applicant/proposals/${this.$proposalStore.currentProposal.id}/reviews`},{name:"TEAM",icon:"people",route:`/applicant/proposals/${this.$proposalStore.currentProposal.id}/team`},{name:"REPORTS",icon:"book",route:`/applicant/proposals/${this.$proposalStore.currentProposal.id}/reports`}]:this.$userHasAnyGroups(["reviewer"])?[{name:"REVIEWS",icon:"list",route:`/proposal-reviews/${this.$proposalStore.currentProposal.id}/reviews`},{name:"TEAM",icon:"people",route:`/proposal-reviews/${this.$proposalStore.currentProposal.id}/team`}]:this.$userHasAnyGroups(["grants_officer"])?[{name:"REVIEWS",icon:"list",route:`/proposals/${this.$proposalStore.currentProposal.id}/reviewers`},{name:"TEAM",icon:"people",route:`/proposals/${this.$proposalStore.currentProposal.id}/team`}]:[]}},methods:{navigateTo(e){this.$router.push(e)}}};function Co(e,o,r,m,t,i){const a=G("router-link");return d(),h("div",null,[l(Ut,{flat:"",dense:"","dropdown-icon":"more_vert"},{default:s(()=>[l(se,{class:"q-py-sm"},{default:s(()=>[(d(!0),h(T,null,E(i.menuItems,u=>(d(),y(a,{key:u,to:u.route},{default:s(()=>[F((d(),y(B,{dense:"",clickable:""},{default:s(()=>[l(V,null,{default:s(()=>[l(we,null,{default:s(()=>[l(Q,{name:u.icon},null,8,["name"]),v(" "+_(u.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Bt]])]),_:2},1032,["to"]))),128))]),_:1})]),_:1})])}var Do=x(xo,[["render",Co]]);const qo={data(){return{files:[{name:"MUNIRIF_PROPOSAL_GUIDELINES_Round_2",url:"https://munirif.pythonanywhere.com/media/MUNIRIF_PROPOSAL_GUIDELINES_Round_2.pdf"},{name:"MUNIRIF_Round_Two_Call_Final",url:"https://munirif.pythonanywhere.com/media/MUNIRIF_Round_Two_Call_Final.pdf"}]}},methods:{openFile(e){window.open(e)}}},Vo=n("div",{class:"text-h6"},"Useful Documents",-1);function Po(e,o,r,m,t,i){return d(),h("div",null,[l(A,{class:"my-card q-ma-sm",flat:"",bordered:""},{default:s(()=>[l(D,null,{default:s(()=>[Vo]),_:1}),l(R),l(re,{vertical:""},{default:s(()=>[(d(!0),h(T,null,E(t.files,a=>(d(),y(pe,{color:"secondary",key:a.id,class:"glossy",icon:"note",label:a.name,clickable:"",onClick:u=>i.openFile(a.url)},null,8,["label","onClick"]))),128))]),_:1})]),_:1})])}var To=x(qo,[["render",Po]]);const Eo={data(){return{messages:["Creating new ideas...","Transforming Lives..."],currentMessageIndex:0,currentText:"",currentIndex:0,showCursor:!0}},mounted(){this.typeText()},methods:{typeText(){this.currentIndex<this.messages[this.currentMessageIndex].length?(this.currentText+=this.messages[this.currentMessageIndex][this.currentIndex],this.currentIndex++,setTimeout(this.typeText,100)):setTimeout(this.deleteText,1e3)},deleteText(){this.currentIndex>0?(this.currentText=this.currentText.slice(0,-1),this.currentIndex--,setTimeout(this.deleteText,50)):(this.currentMessageIndex=(this.currentMessageIndex+1)%this.messages.length,setTimeout(this.typeText,1e3))}}},Mo={align:"center",class:"text-h5"},Lo={key:0,class:"cursor"};function Io(e,o,r,m,t,i){return d(),h("div",null,[n("p",Mo,[n("span",null,_(t.currentText),1),t.showCursor?(d(),h("span",Lo,"|")):P("",!0)])])}var Ro=x(Eo,[["render",Io]]);const Ao={data(){return{loading:!1,showDialog:!1}},methods:{showConfirmationDialog(){this.showDialog=!0},cancelLogout(){this.showDialog=!1},confirmLogout(){this.$utilsStore.setLoading(!0),this.$api.get("/accounts/logout/").then(e=>{this.$router.push("/index/account/signin"),this.$authStore.clearUserAndToken(),this.$utilsStore.setLoading(!1),this.cancelLogout()})}}},Uo={key:0},Bo=n("span",{class:"q-body1"},"Are you sure you want to log out?",-1);function Fo(e,o,r,m,t,i){return e.$authStore.isLoggedIn?(d(),h("div",Uo,[l(k,{onClick:i.showConfirmationDialog,dense:"",flat:"",color:"primary"},{default:s(()=>[v("Logout")]),_:1},8,["onClick"]),l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[0]||(o[0]=a=>t.showDialog=a)},{default:s(()=>[l(A,null,{default:s(()=>[l(D,{class:"q-pa-md"},{default:s(()=>[Bo]),_:1}),l(re,{align:"right"},{default:s(()=>[l(k,{dense:"",flat:"",onClick:i.cancelLogout,color:"primary"},{default:s(()=>[v("Cancel")]),_:1},8,["onClick"]),l(k,{onClick:i.confirmLogout,color:"primary",class:"q-ml-md"},{default:s(()=>[v("Logout")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):P("",!0)}var Oo=x(Ao,[["render",Fo]]);const No={data(){return{user:this.$authStore.currentUser,loading:!1,faculties:[],departments:[],qualifications:[],formData:{email:"",first_name:"",last_name:"",phone:"",gender:"",faculty:null,department:null,qualification:null,password:"",confirm_password:""},emailRules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],nameRules:[e=>!!e||"Field is required"],phoneRules:[e=>!!e||"Telephone number is required",e=>/^[0-9]{10}$/.test(e)||"Telephone number must be 10 digits"],passwordRules:[e=>!!e||"Password is required",e=>e.length>=8||"Password must be at least 8 characters long"],confirmPasswordRules:[e=>!!e||"Confirm Password is required",e=>e===this.formData.password||"Passwords do not match"],errorResponse:{}}},created(){this.setFormData(),this.getFaculties(),this.getQualifications()},methods:{updateUserProfile(){this.$utilsStore.setLoading(!0),this.formData.username=this.formData.email,this.formData.token=this.$authStore.token,this.$api.post("accounts/update-user/",this.formData).then(e=>{const o=e.data.token,r=e.data.user;this.$authStore.setUserAndToken(r,o),this.$utilsStore.setLoading(!1)}).catch(e=>{this.$utilsStore.setLoading(!1),this.errorResponse=e.response})},getFaculties(){this.$api.get("faculties/").then(e=>{this.faculties=e.data})},getQualifications(){this.$api.get("qualifications/").then(e=>{this.qualifications=e.data})},setFormData(){var e,o,r,m,t,i,a,u;this.formData={email:this.user.email,first_name:this.user.first_name,last_name:this.user.last_name,phone:(e=this.user.profile)==null?void 0:e.phone,faculty:(r=(o=this.user.profile)==null?void 0:o.faculty)==null?void 0:r.id,department:(t=(m=this.user.profile)==null?void 0:m.department)==null?void 0:t.id,qualification:(a=(i=this.user.profile)==null?void 0:i.qualification)==null?void 0:a.id,designation:(u=this.user.profile)==null?void 0:u.designation}}}},Qo={align:"center"},jo=n("h4",{class:"text-h6 q-my-sm"},"Update Profile",-1),Go={class:"row q-col-gutter-xs"},zo={class:"col"},Wo={class:"col"},Ho={class:"row q-col-gutter-xs"},Ko={class:"col"},Yo={class:"col"},Jo={class:"row q-col-gutter-xs q-my-sm"},Xo={class:"col"},Zo={class:"col"},el={class:"row q-col-gutter-xs"},tl={class:"col"},ol={class:"col"},ll={class:"flex flex-center"};function al(e,o,r,m,t,i){return d(),h("div",Qo,[jo,l(A,{class:"q-ma-sm q-pa-md",style:{"min-width":"20rem"}},{default:s(()=>[l(Ce,{onSubmit:i.updateUserProfile},{default:s(()=>{var a;return[n("div",Go,[n("div",zo,[l(K,{outlined:"",dense:"",modelValue:t.formData.first_name,"onUpdate:modelValue":o[0]||(o[0]=u=>t.formData.first_name=u),label:"First Name",rules:t.nameRules,required:""},null,8,["modelValue","rules"])]),n("div",Wo,[l(K,{outlined:"",dense:"",modelValue:t.formData.last_name,"onUpdate:modelValue":o[1]||(o[1]=u=>t.formData.last_name=u),label:"Last Name",rules:t.nameRules,required:""},null,8,["modelValue","rules"])])]),n("div",Ho,[n("div",Ko,[l(K,{outlined:"",dense:"",modelValue:t.formData.email,"onUpdate:modelValue":o[2]||(o[2]=u=>t.formData.email=u),label:"Email",type:"email",rules:t.emailRules,required:""},null,8,["modelValue","rules"])]),n("div",Yo,[l(K,{outlined:"",dense:"",modelValue:t.formData.phone,"onUpdate:modelValue":o[3]||(o[3]=u=>t.formData.phone=u),label:"Telephone Number",type:"tel",rules:t.phoneRules,required:""},null,8,["modelValue","rules"])])]),n("div",Jo,[n("div",Xo,[l(ae,{outlined:"",dense:"",modelValue:t.formData.faculty,"onUpdate:modelValue":o[4]||(o[4]=u=>t.formData.faculty=u),options:t.faculties,"option-value":"id","option-label":"name",label:"Faculty","emit-value":"","map-options":""},null,8,["modelValue","options"])]),n("div",Zo,[l(ae,{outlined:"",dense:"",modelValue:t.formData.department,"onUpdate:modelValue":o[5]||(o[5]=u=>t.formData.department=u),options:(a=this.faculties.find(u=>u.id===this.formData.faculty))==null?void 0:a.departments,"option-value":"id","option-label":"name",label:"Department","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),n("div",el,[n("div",tl,[l(ae,{dense:"",outlined:"",modelValue:t.formData.qualification,"onUpdate:modelValue":o[6]||(o[6]=u=>t.formData.qualification=u),options:t.qualifications,label:"Qualification","option-value":"id","option-label":"name","map-options":"","emit-value":""},null,8,["modelValue","options"])]),n("div",ol,[l(K,{outlined:"",dense:"",modelValue:t.formData.designation,"onUpdate:modelValue":o[7]||(o[7]=u=>t.formData.designation=u),label:"Your Designation",rules:t.nameRules,required:""},null,8,["modelValue","rules"])])]),n("div",ll,[l(k,{type:"submit",color:"primary",label:"Update Profile"})])]}),_:1},8,["onSubmit"])]),_:1})])}var sl=x(No,[["render",al]]);const rl={props:{showButton:{type:Boolean,required:!1,default:!0},showPopup:{type:Boolean,required:!1,default:!1}},data(){var e,o;return{loading:!1,showDialog:!1,themes:[],formData:{title:"",theme:null,call:(o=(e=this.$dataStore)==null?void 0:e.currentCall)==null?void 0:o.id},formErrors:{}}},created(){var e,o;Ot().then(r=>this.themes=r),this.formData.call=(o=(e=this.$dataStore)==null?void 0:e.currentCall)==null?void 0:o.id},methods:{createProposal(){console.log(this.formData),this.$utilsStore.setLoading(!0),this.formErrors={},this.formData.user=this.$authStore.currentUser.id,this.$api.post("proposals/",this.formData).then(e=>{this.$router.push(`/applicant/proposals/${e.data.id}`),this.$utilsStore.setLoading(!1),this.showDialog=!1}).catch(e=>{this.formErrors=e.response.data,this.$utilsStore.setLoading(!1)})},cancelCreate(){this.showDialog=!1},setFormData(){this.formData={title:""}}},watch:{showPopup(e,o){this.showDialog=e},showDialog(e,o){this.$emit("showPopupChanged",e)}}},nl=n("div",{class:"text-h6"},"New Project Proposal",-1),il={class:"text-red"},ul={class:"q-ma-xs"},cl=n("br",null,null,-1),dl={class:"text-red"},ml={class:"q-ma-xs"};function pl(e,o,r,m,t,i){return d(),h("div",null,[r.showButton?(d(),y(k,{key:0,label:"New Proposal",color:"primary",onClick:o[0]||(o[0]=a=>t.showDialog=!0)})):P("",!0),l(Ce,{onSubmit:i.createProposal,class:"q-gutter-md"},{default:s(()=>[l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[3]||(o[3]=a=>t.showDialog=a),persistent:""},{default:s(()=>[l(A,{style:{width:"500px"}},{default:s(()=>[l(D,null,{default:s(()=>[nl]),_:1}),l(R),l(D,{class:"q-pt-lg q-pb-md"},{default:s(()=>{var a,u;return[l(K,{modelValue:t.formData.title,"onUpdate:modelValue":o[1]||(o[1]=p=>t.formData.title=p),label:"Title of your proposal",outlined:"",required:""},null,8,["modelValue"]),n("div",il,[n("ul",ul,[(d(!0),h(T,null,E((a=t.formErrors)==null?void 0:a.title,p=>(d(),h("li",{key:p},_(p),1))),128))])]),cl,l(ae,{modelValue:t.formData.theme,"onUpdate:modelValue":o[2]||(o[2]=p=>t.formData.theme=p),options:t.themes,label:"Select Theme",outlined:"","option-value":"id","option-label":"title","map-options":"","emit-value":""},null,8,["modelValue","options"]),n("div",dl,[n("ul",ml,[(d(!0),h(T,null,E((u=t.formErrors)==null?void 0:u.theme,p=>(d(),h("li",{key:p},_(p),1))),128))])])]}),_:1}),l(R,{spaced:""}),l(re,{align:"right"},{default:s(()=>[l(k,{flat:"",color:"primary",label:"Cancel",onClick:i.cancelCreate},null,8,["onClick"]),l(k,{color:"primary",label:"Create",onClick:i.createProposal},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])])}var fl=x(rl,[["render",pl]]);const hl={props:["attachment_id"],data(){return{acceptedFileTypes:"application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",modalVisible:!1,uploadUrl:`${this.$api.getUri()}/files/`,uploadHeaders:{},filesToUpload:[],uploadedFiles:[]}},methods:{onFileAdded(e){e.forEach(o=>{console.dir(o),o.type&&this.acceptedFileTypes.includes(o.type)&&(this.uploadFile(o),this.filesToUpload.push(o))})},onBrowse(e){var o=Array.from(e.target.files);this.onFileAdded(o)},uploadFile(e){const o=new FormData;o.append("file",e),o.append("name",e.name),o.append("attachment",this.attachment_id),o.append("proposal",this.$route.params.proposal_id),this.$api.post(this.uploadUrl,o,{headers:this.uploadHeaders}).then(r=>{this.uploadedFiles.push(e),this.filesToUpload=this.filesToUpload.filter(m=>m.key!=e.key),this.uploadedFiles=[],this.modalVisible=!1,this.$emit("file-uploaded")}).catch(r=>{console.log(r)})}}},_l={key:0},vl=n("div",{class:"text-h6"},"Attachments",-1),gl=n("div",{class:"text-center q-my-auto q-py-lg",style:{"background-color":"#ffffff",color:"#000000"}}," Drag and drop files here ",-1),bl={class:"text-center",style:{"background-color":"#ffffff",color:"#000000"}},yl=n("br",null,null,-1),kl=n("br",null,null,-1),wl=["accept"],Sl=n("div",null,[n("label",{for:"files",class:"button-label"}," Browse ")],-1),$l=n("div",{align:"center"},[n("br"),v(" Only "),n("strong",null,"PDF, WORD, EXCEL"),v(" are accepted ")],-1);function xl(e,o,r,m,t,i){var a,u;return((a=e.$proposalStore.currentProposal)==null?void 0:a.status)=="EDITING"&&e.$authStore.currentUser.id==((u=e.$proposalStore.currentProposal)==null?void 0:u.user)?(d(),h("div",_l,[l(k,{color:"primary",icon:"attachment",label:"Add",dense:"",flat:"",onClick:o[0]||(o[0]=p=>t.modalVisible=!0)}),l(J,{modelValue:t.modalVisible,"onUpdate:modelValue":o[4]||(o[4]=p=>t.modalVisible=p)},{default:s(()=>[l(A,{style:{width:"500px"}},{default:s(()=>[l(D,{class:"flex justify-between q-pa-sm text-center"},{default:s(()=>[vl,l(k,{color:"primary",icon:"close",flat:"",onClick:o[1]||(o[1]=p=>{t.uploadedFiles=[],t.modalVisible=!1})})]),_:1}),l(R,{spaced:""}),l(D,{class:"q-pa-sm"},{default:s(()=>[n("div",null,[l(Nt,{url:t.uploadUrl,multiple:"",onAdded:i.onFileAdded,style:{width:"100%"},flat:""},{header:s(()=>[gl,n("div",bl,[v(" or "),yl,kl,n("input",{onChange:o[2]||(o[2]=(...p)=>i.onBrowse&&i.onBrowse(...p)),type:"file",id:"files",class:"hidden",multiple:"",accept:t.acceptedFileTypes},null,40,wl),Sl])]),list:s(()=>[l(se,{separator:"",dense:""},{default:s(()=>[(d(!0),h(T,null,E(t.filesToUpload,p=>(d(),y(B,{key:p.__key},{default:s(()=>[l(V,null,{default:s(()=>[l(we,{class:"full-width ellipsis"},{default:s(()=>[v(_(p.name),1)]),_:2},1024),l(we,{caption:""},{default:s(()=>[v(_(p.__sizeLabel)+" "+_(p.__progressLabel),1)]),_:2},1024)]),_:2},1024),l(V,{top:"",side:""},{default:s(()=>[l(Ct,{size:"20px",color:"primary"})]),_:1})]),_:2},1024))),128))]),_:1}),$l]),_:1},8,["url","onAdded"])])]),_:1}),l(D,{class:"q-pa-sm"},{default:s(()=>[(d(!0),h(T,null,E(t.uploadedFiles,p=>(d(),y(pe,{dense:"",key:p.__key,class:"glossy",icon:"check",label:p.name},null,8,["label"]))),128))]),_:1}),l(R,{spaced:""}),l(D,{align:"right"},{default:s(()=>[l(k,{color:"primary",label:"Done",onClick:o[3]||(o[3]=p=>{t.uploadedFiles=[],t.modalVisible=!1})})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):P("",!0)}var Cl=x(hl,[["render",xl]]);const Dl={props:{proposal:{type:Object,required:!0},disabled:{type:Boolean,required:!0}},data(){return{modalVisible:!1,sections:[]}},computed:{wordCounts(){let e={};for(let o=0;o<this.sections.length;o++){const r=this.sections[o];e[r.name]=this.countWordsInHtml(this.proposal[r.name]||"")}return e},wordCountsValid(){let e={};for(let o=0;o<this.sections.length;o++){const r=this.sections[o];if(e[r.name]>=this.sections[r.name])return!1}return!0}},created(){this.getSections()},methods:{getProposal(){this.$api.get(`/proposals/${this.$route.params.proposal_id}/`)},submitProposal(){this.$utilsStore.setLoading(!0);const e=new Date;var o={status:"SUBMITTED",submission_date:e.toJSON().split("T")[0]};this.$api.patch(`/proposals/${this.$route.params.proposal_id}/`,o).then(r=>{this.$utilsStore.setLoading(!1),location.reload()})},getSections(){this.$api.get("sections/").then(e=>{this.sections=e.data})},countWordsInHtml(e){return ze.load(e)("body").text().split(/\s+/).length-1}}},ql={key:0},Vl=n("thead",null,[n("tr",{class:"bg-grey-3"},[n("th",{class:"text-left"},"Section"),n("th",{class:"text-left"},"Limit"),n("th",{class:"text-left"},"Words"),n("th",{class:"text-left"})])],-1),Pl={key:0},Tl={class:"text-left"},El={class:"text-center"},Ml={class:"text-left"},Ll={class:"text-left"},Il=n("p",{class:"q-pa-md"},"Do you wish to proceed?",-1);function Rl(e,o,r,m,t,i){var u,p;const a=G("alert-msg");return((u=r.proposal)==null?void 0:u.status)=="EDITING"&&e.$authStore.currentUser.id==((p=r.proposal)==null?void 0:p.user)?(d(),h("div",ql,[l(k,{color:"primary",label:"Submit Application",disabled:r.disabled,onClick:o[0]||(o[0]=S=>t.modalVisible=!0)},null,8,["disabled"]),l(J,{modelValue:t.modalVisible,"onUpdate:modelValue":o[2]||(o[2]=S=>t.modalVisible=S)},{default:s(()=>[l(A,null,{default:s(()=>[l(D),l(R),l(D,null,{default:s(()=>[l(ne,{flat:"",dense:"",bordered:"",separator:"vertical"},{default:s(()=>[Vl,n("tbody",null,[(d(!0),h(T,null,E(t.sections,S=>(d(),h(T,{key:S.id},[S.lower_limit==50?(d(),h("tr",Pl,[n("td",Tl,_(S.title),1),n("td",El,_(S.lower_limit)+" - "+_(S.word_limit),1),n("td",Ml,_(i.wordCounts[S.name]),1),n("td",Ll,[i.wordCounts[S.name]<=S.word_limit?(d(),y(Q,{key:0,name:"check",class:"text-green"})):(d(),y(Q,{key:1,class:"text-red",name:"close"}))])])):P("",!0)],64))),128))])]),_:1}),l(R,{spaced:""}),l(a,{message:"You will not be able to edit this proposal once submitted.",icon:"crisis_alert"}),Il]),_:1}),l(R),l(D,{align:"right"},{default:s(()=>[l(k,{color:"primary",flat:"",label:"Cancel",onClick:o[1]||(o[1]=S=>t.modalVisible=!1)}),l(k,{disabled:!i.wordCountsValid,color:"primary",label:"Submit",onClick:i.submitProposal},null,8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):P("",!0)}var Al=x(Dl,[["render",Rl]]);const Ul={props:{proposal:{type:Object,required:!0},score:{required:!0}},data(){return{modalVisible:!0,loading:!1}},methods:{acceptReview(){this.$utilsStore.setLoading(!0),this.$api.patch(`/scores/${this.score.id}/`,{status:"IN PROGRESS",accepted_at:new Date(Date.UTC())}).then(e=>{location.reload()})}}},Bl={key:0},Fl=n("div",{class:"text-h6"},"Proposal Review Invitation",-1),Ol={class:"q-pa-md"},Nl=n("p",{class:"q-pa-md"},[v(" Click the "),n("strong",null,"ACCEPT"),v(" button to start your review ")],-1);function Ql(e,o,r,m,t,i){var a,u;return r.score&&((a=r.score)==null?void 0:a.status)!="IN PROGRESS"&&((u=r.score)==null?void 0:u.status)!="COMPLETED"&&this.$userHasAnyGroups(["reviewer"])?(d(),h("div",Bl,[l(J,{modelValue:t.modalVisible,"onUpdate:modelValue":o[0]||(o[0]=p=>t.modalVisible=p),persistent:""},{default:s(()=>[l(A,null,{default:s(()=>[l(D,null,{default:s(()=>[Fl]),_:1}),l(R),l(D,null,{default:s(()=>[n("p",Ol,' You have been inivited to review this proposal on "'+_(r.proposal.title)+'". ',1),Nl]),_:1}),l(R),l(D,{align:"right"},{default:s(()=>[l(k,{color:"primary",label:"Accept",onClick:i.acceptReview},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):P("",!0)}var jl=x(Ul,[["render",Ql]]);const Gl={props:{proposal:{type:Object,required:!0},section:{type:Object,required:!0}},data(){return{loading:!1,showDialog:!1,formData:{}}},computed:{numWords(){return this.countWordsInHtml(this.formData[this.section.name]||"")}},methods:{updateSection(){this.$utilsStore.setLoading(!0),this.$api.patch(`proposals/${this.$route.params.proposal_id}/`,this.formData).then(e=>{this.$emit("proposal-updated",e.data),this.$utilsStore.setLoading(!1),this.showDialog=!1})},cancelCreate(){this.showDialog=!1},countWordsInHtml(e){return ze.load(e)("body").text().split(/\s+/).length-1}},mounted(){this.formData[this.section.name]=this.proposal[this.section.name]||""},watch:{proposal(e){this.formData[this.section.name]=e[this.section.name]||""}}},zl={key:0},Wl={key:0,class:"text-red text-caption"},Hl={class:"text-h6"},Kl={key:0,class:"text-red text-caption"},Yl={align:"right"},Jl={key:0,class:"text-red text-caption"};function Xl(e,o,r,m,t,i){var a,u;return((a=r.proposal)==null?void 0:a.status)=="EDITING"&&e.$authStore.currentUser.id==((u=r.proposal)==null?void 0:u.user)?(d(),h("div",zl,[l(k,{dense:"",flat:"",color:"primary",icon:"edit",onClick:o[0]||(o[0]=p=>t.showDialog=!0)}),i.numWords>r.section.word_limit?(d(),h("small",Wl," Exceeded word limit ("+_(i.numWords)+"/"+_(r.section.word_limit)+") ",1)):P("",!0),l(Ce,{onSubmit:i.updateSection,class:"q-gutter-md"},{default:s(()=>[l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[2]||(o[2]=p=>t.showDialog=p),persistent:"","full-width":"","full-height":""},{default:s(()=>[l(A,{style:{width:"500px"}},{default:s(()=>[l(D,{class:"flex justify-between"},{default:s(()=>[n("div",Hl,[v(_(r.section.title)+" ",1),n("small",null,"("+_(i.numWords)+" / "+_(r.section.word_limit)+" words)",1)]),l(k,{color:"primary",flat:"",dense:"",icon:"close",onClick:i.cancelCreate},null,8,["onClick"])]),_:1}),l(R),l(D,{class:"scroll"},{default:s(()=>[i.numWords>r.section.word_limit?(d(),h("small",Kl," Exceeded word limit ("+_(i.numWords)+"/"+_(r.section.word_limit)+") ",1)):P("",!0),l(Qt,{modelValue:t.formData[r.section.name],"onUpdate:modelValue":o[1]||(o[1]=p=>t.formData[r.section.name]=p),label:"Title of your proposal",outlined:"",required:"","min-height":"65vh"},null,8,["modelValue"]),n("div",Yl,[i.numWords>r.section.word_limit?(d(),h("small",Jl," Exceeded word limit ("+_(i.numWords)+"/"+_(r.section.word_limit)+") ",1)):P("",!0)])]),_:1}),l(R,{spaced:""}),l(re,{align:"right"},{default:s(()=>[l(k,{flat:"",color:"primary",label:"Cancel",onClick:i.cancelCreate},null,8,["onClick"]),l(k,{disabled:i.numWords>r.section.word_limit,color:"primary",label:"Save",onClick:i.updateSection},null,8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])])):P("",!0)}var Zl=x(Gl,[["render",Xl]]);const Fe="q-slider__marker-labels",ea=e=>({value:e}),ta=({marker:e})=>q("div",{key:e.value,style:e.style,class:e.classes},e.label),Ke=[34,37,40,33,39,38],oa={...He,...jt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},la=["pan","update:modelValue","change"];function aa({updateValue:e,updatePosition:o,getDragging:r,formAttrs:m}){const{props:t,emit:i,slots:a,proxy:{$q:u}}=xe(),p=We(t,u),S=Gt(m),O=Y(!1),z=Y(!1),N=Y(!1),X=Y(!1),M=f(()=>t.vertical===!0?"--v":"--h"),le=f(()=>"-"+(t.switchLabelSide===!0?"switched":"standard")),U=f(()=>t.vertical===!0?t.reverse===!0:t.reverse!==(u.lang.rtl===!0)),W=f(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),$=f(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax),g=f(()=>t.disable!==!0&&t.readonly!==!0&&W.value<$.value),L=f(()=>(String(t.step).trim().split(".")[1]||"").length),H=f(()=>t.step===0?1:t.step),Je=f(()=>g.value===!0?t.tabindex||0:-1),ie=f(()=>t.max-t.min),De=f(()=>$.value-W.value),ue=f(()=>he(W.value)),fe=f(()=>he($.value)),ce=f(()=>t.vertical===!0?U.value===!0?"bottom":"top":U.value===!0?"right":"left"),qe=f(()=>t.vertical===!0?"height":"width"),Xe=f(()=>t.vertical===!0?"width":"height"),Ve=f(()=>t.vertical===!0?"vertical":"horizontal"),Ze=f(()=>{const c={role:"slider","aria-valuemin":W.value,"aria-valuemax":$.value,"aria-orientation":Ve.value,"data-step":t.step};return t.disable===!0?c["aria-disabled"]="true":t.readonly===!0&&(c["aria-readonly"]="true"),c}),et=f(()=>`q-slider q-slider${M.value} q-slider--${O.value===!0?"":"in"}active inline no-wrap `+(t.vertical===!0?"row":"column")+(t.disable===!0?" disabled":" q-slider--enabled"+(g.value===!0?" q-slider--editable":""))+(N.value==="both"?" q-slider--focus":"")+(t.label||t.labelAlways===!0?" q-slider--label":"")+(t.labelAlways===!0?" q-slider--label-always":"")+(p.value===!0?" q-slider--dark":"")+(t.dense===!0?" q-slider--dense q-slider--dense"+M.value:""));function de(c){const b="q-slider__"+c;return`${b} ${b}${M.value} ${b}${M.value}${le.value}`}function Pe(c){const b="q-slider__"+c;return`${b} ${b}${M.value}`}const tt=f(()=>{const c=t.selectionColor||t.color;return"q-slider__selection absolute"+(c!==void 0?` text-${c}`:"")}),ot=f(()=>Pe("markers")+" absolute overflow-hidden"),lt=f(()=>Pe("track-container")),at=f(()=>de("pin")),st=f(()=>de("label")),rt=f(()=>de("text-container")),nt=f(()=>de("marker-labels-container")+(t.markerLabelsClass!==void 0?` ${t.markerLabelsClass}`:"")),it=f(()=>"q-slider__track relative-position no-outline"+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),ut=f(()=>{const c={[Xe.value]:t.trackSize};return t.trackImg!==void 0&&(c.backgroundImage=`url(${t.trackImg}) !important`),c}),ct=f(()=>"q-slider__inner absolute"+(t.innerTrackColor!==void 0?` bg-${t.innerTrackColor}`:"")),Te=f(()=>{const c={[ce.value]:`${100*ue.value}%`,[qe.value]:`${100*(fe.value-ue.value)}%`};return t.innerTrackImg!==void 0&&(c.backgroundImage=`url(${t.innerTrackImg}) !important`),c});function dt(c){const{min:b,max:w,step:C}=t;let I=b+c*(w-b);if(C>0){const Z=(I-b)%C;I+=(Math.abs(Z)>=C/2?(Z<0?-1:1)*C:0)-Z}return L.value>0&&(I=parseFloat(I.toFixed(L.value))),oe(I,W.value,$.value)}function he(c){return ie.value===0?0:(c-t.min)/ie.value}function mt(c,b){const w=Dt(c),C=t.vertical===!0?oe((w.top-b.top)/b.height,0,1):oe((w.left-b.left)/b.width,0,1);return oe(U.value===!0?1-C:C,ue.value,fe.value)}const Ee=f(()=>qt(t.markers)===!0?t.markers:H.value),Me=f(()=>{const c=[],b=Ee.value,w=t.max;let C=t.min;do c.push(C),C+=b;while(C<w);return c.push(w),c}),Le=f(()=>{const c=` ${Fe}${M.value}-`;return Fe+`${c}${t.switchMarkerLabelsSide===!0?"switched":"standard"}${c}${U.value===!0?"rtl":"ltr"}`}),_e=f(()=>t.markerLabels===!1?null:ft(t.markerLabels).map((c,b)=>({index:b,value:c.value,label:c.label||c.value,classes:Le.value+(c.classes!==void 0?" "+c.classes:""),style:{...Re(c.value),...c.style||{}}}))),Ie=f(()=>({markerList:_e.value,markerMap:ht.value,classes:Le.value,getStyle:Re})),pt=f(()=>{if(De.value!==0){const c=100*Ee.value/De.value;return{...Te.value,backgroundSize:t.vertical===!0?`2px ${c}%`:`${c}% 2px`}}return null});function ft(c){if(c===!1)return null;if(c===!0)return Me.value.map(ea);if(typeof c=="function")return Me.value.map(w=>{const C=c(w);return ye(C)===!0?{...C,value:w}:{value:w,label:C}});const b=({value:w})=>w>=t.min&&w<=t.max;return Array.isArray(c)===!0?c.map(w=>ye(w)===!0?w:{value:w}).filter(b):Object.keys(c).map(w=>{const C=c[w],I=Number(w);return ye(C)===!0?{...C,value:I}:{value:I,label:C}}).filter(b)}function Re(c){return{[ce.value]:`${100*(c-t.min)/ie.value}%`}}const ht=f(()=>{if(t.markerLabels===!1)return null;const c={};return _e.value.forEach(b=>{c[b.value]=b}),c});function _t(){if(a["marker-label-group"]!==void 0)return a["marker-label-group"](Ie.value);const c=a["marker-label"]||ta;return _e.value.map(b=>c({marker:b,...Ie.value}))}const vt=f(()=>[[Wt,gt,void 0,{[Ve.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function gt(c){c.isFinal===!0?(X.value!==void 0&&(o(c.evt),c.touch===!0&&e(!0),X.value=void 0,i("pan","end")),O.value=!1,N.value=!1):c.isFirst===!0?(X.value=r(c.evt),o(c.evt),e(),O.value=!0,i("pan","start")):(o(c.evt),e())}function Ae(){N.value=!1}function bt(c){o(c,r(c)),e(),z.value=!0,O.value=!0,document.addEventListener("mouseup",ve,!0)}function ve(){z.value=!1,O.value=!1,e(!0),Ae(),document.removeEventListener("mouseup",ve,!0)}function yt(c){o(c,r(c)),e(!0)}function kt(c){Ke.includes(c.keyCode)&&e(!0)}function wt(c){if(t.vertical===!0)return null;const b=u.lang.rtl!==t.reverse?1-c:c;return{transform:`translateX(calc(${2*b-1} * ${t.thumbSize} / 2 + ${50-100*b}%))`}}function St(c){const b=f(()=>z.value===!1&&(N.value===c.focusValue||N.value==="both")?" q-slider--focus":""),w=f(()=>`q-slider__thumb q-slider__thumb${M.value} q-slider__thumb${M.value}-${U.value===!0?"rtl":"ltr"} absolute non-selectable`+b.value+(c.thumbColor.value!==void 0?` text-${c.thumbColor.value}`:"")),C=f(()=>({width:t.thumbSize,height:t.thumbSize,[ce.value]:`${100*c.ratio.value}%`,zIndex:N.value===c.focusValue?2:void 0})),I=f(()=>c.labelColor.value!==void 0?` text-${c.labelColor.value}`:""),Z=f(()=>wt(c.ratio.value)),ge=f(()=>"q-slider__text"+(c.labelTextColor.value!==void 0?` text-${c.labelTextColor.value}`:""));return()=>{const be=[q("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[q("path",{d:t.thumbPath})]),q("div",{class:"q-slider__focus-ring fit"})];return(t.label===!0||t.labelAlways===!0)&&(be.push(q("div",{class:at.value+" absolute fit no-pointer-events"+I.value},[q("div",{class:st.value,style:{minWidth:t.thumbSize}},[q("div",{class:rt.value,style:Z.value},[q("span",{class:ge.value},c.label.value)])])])),t.name!==void 0&&t.disable!==!0&&S(be,"push")),q("div",{class:w.value,style:C.value,...c.getNodeData()},be)}}function $t(c,b,w,C){const I=[];t.innerTrackColor!=="transparent"&&I.push(q("div",{key:"inner",class:ct.value,style:Te.value})),t.selectionColor!=="transparent"&&I.push(q("div",{key:"selection",class:tt.value,style:c.value})),t.markers!==!1&&I.push(q("div",{key:"marker",class:ot.value,style:pt.value})),C(I);const Z=[Vt("div",{key:"trackC",class:lt.value,tabindex:b.value,...w.value},[q("div",{class:it.value,style:ut.value},I)],"slide",g.value,()=>vt.value)];if(t.markerLabels!==!1){const ge=t.switchMarkerLabelsSide===!0?"unshift":"push";Z[ge](q("div",{key:"markerL",class:nt.value},_t()))}return Z}return Ge(()=>{document.removeEventListener("mouseup",ve,!0)}),{state:{active:O,focus:N,preventFocus:z,dragging:X,editable:g,classes:et,tabindex:Je,attributes:Ze,step:H,decimals:L,trackLen:ie,innerMin:W,innerMinRatio:ue,innerMax:$,innerMaxRatio:fe,positionProp:ce,sizeProp:qe,isReversed:U},methods:{onActivate:bt,onMobileClick:yt,onBlur:Ae,onKeyup:kt,getContent:$t,getThumbRenderFn:St,convertRatioToModel:dt,convertModelToRatio:he,getDraggingRatio:mt}}}const sa=()=>({});var ra=$e({name:"QSlider",props:{...oa,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:la,setup(e,{emit:o}){const{proxy:{$q:r}}=xe(),{state:m,methods:t}=aa({updateValue:M,updatePosition:U,getDragging:le,formAttrs:zt(e)}),i=Y(null),a=Y(0),u=Y(0);function p(){u.value=e.modelValue===null?m.innerMin.value:oe(e.modelValue,m.innerMin.value,m.innerMax.value)}me(()=>`${e.modelValue}|${m.innerMin.value}|${m.innerMax.value}`,p),p();const S=f(()=>t.convertModelToRatio(u.value)),O=f(()=>m.active.value===!0?a.value:S.value),z=f(()=>{const g={[m.positionProp.value]:`${100*m.innerMinRatio.value}%`,[m.sizeProp.value]:`${100*(O.value-m.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(g.backgroundImage=`url(${e.selectionImg}) !important`),g}),N=t.getThumbRenderFn({focusValue:!0,getNodeData:sa,ratio:O,label:f(()=>e.labelValue!==void 0?e.labelValue:u.value),thumbColor:f(()=>e.thumbColor||e.color),labelColor:f(()=>e.labelColor),labelTextColor:f(()=>e.labelTextColor)}),X=f(()=>m.editable.value!==!0?{}:r.platform.is.mobile===!0?{onClick:t.onMobileClick}:{onMousedown:t.onActivate,onFocus:W,onBlur:t.onBlur,onKeydown:$,onKeyup:t.onKeyup});function M(g){u.value!==e.modelValue&&o("update:modelValue",u.value),g===!0&&o("change",u.value)}function le(){return i.value.getBoundingClientRect()}function U(g,L=m.dragging.value){const H=t.getDraggingRatio(g,L);u.value=t.convertRatioToModel(H),a.value=e.snap!==!0||e.step===0?H:t.convertModelToRatio(u.value)}function W(){m.focus.value=!0}function $(g){if(!Ke.includes(g.keyCode))return;Pt(g);const L=([34,33].includes(g.keyCode)?10:1)*m.step.value,H=([34,37,40].includes(g.keyCode)?-1:1)*(m.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*L;u.value=oe(parseFloat((u.value+H).toFixed(m.decimals.value)),m.innerMin.value,m.innerMax.value),M()}return()=>{const g=t.getContent(z,m.tabindex,X,L=>{L.push(N())});return q("div",{ref:i,class:m.classes.value+(e.modelValue===null?" q-slider--no-value":""),...m.attributes.value,"aria-valuenow":e.modelValue},g)}}});const na={props:{min:{type:Number,default:0},max:{type:Number,default:10},proposal:{type:Object,required:!0},section:{type:Object,required:!0},score:{required:!0,default:null}},watch:{score(e,o){this.mark=this.score[this.section.name],this.comment=this.score[`${this.section.name}_comment`]}},data(){return{comment:"",mark:0,formData:{l:4}}},methods:{updateSectionScore(e){this.mark>this.section.max_score?this.mark=this.section.max_score:this.mark<0&&(this.mark=0),this.formData[this.section.name]=this.mark,this.$api.patch(`scores/${e}/`,this.formData).then(o=>{})},updateSectionComment(e){this.formData[`${this.section.name}_comment`]=this.comment,this.$api.patch(`scores/${e}/`,this.formData).then(o=>{})}}},ia={key:0,class:"q-mb-sm q-mt-sm"},ua=n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"Score"),n("th",{class:"text-left"},"Comment")])],-1),ca={class:""},da={class:"q-td--no-hover"},ma={class:"text-center"},pa=["min","max"],fa={class:"q-td--no-hover"};function ha(e,o,r,m,t,i){return r.score&&r.score.status=="IN PROGRESS"&&this.$userHasAnyGroups(["reviewer","grants_officer"])?(d(),h("div",ia,[l(ne,{bordered:"",flat:"",square:"",style:{background:"#f5f5f5"}},{default:s(()=>[ua,n("tbody",null,[n("tr",ca,[n("td",da,[n("div",ma,[F(n("input",{type:"number",min:r.min,max:r.max,"onUpdate:modelValue":o[0]||(o[0]=a=>t.mark=a),onBlur:o[1]||(o[1]=a=>i.updateSectionScore(r.score.id))},null,40,pa),[[Tt,t.mark]]),v("/"+_(r.max),1)]),l(ra,{modelValue:t.mark,"onUpdate:modelValue":o[2]||(o[2]=a=>t.mark=a),min:r.min,max:r.max,step:1,color:"green",onChange:o[3]||(o[3]=a=>i.updateSectionScore(r.score.id))},null,8,["modelValue","min","max"])]),n("td",fa,[l(K,{outlined:"",multiline:"",modelValue:t.comment,"onUpdate:modelValue":o[4]||(o[4]=a=>t.comment=a),type:"textarea",label:"Comment (Optional)",onBlur:o[5]||(o[5]=a=>i.updateSectionComment(r.score.id))},null,8,["modelValue"])])])])]),_:1})])):P("",!0)}var _a=x(na,[["render",ha]]);const va={data(){return{loading:!1,showDialog:!1,score:null,sections:[],formData:{strengths:null,weaknesses:null,status:"COMPLETED",is_recommended:null}}},created(){this.getScore(),this.getSections()},computed:{percentageScore(){var t,i;const e=(t=this.sections)==null?void 0:t.map(a=>a.max_score),o=(i=this.sections)==null?void 0:i.map(a=>this.score[a.name]||0);console.log(o);const r=o.reduce((a,u)=>a+u,0),m=e.reduce((a,u)=>a+u,0);return r/m*100}},methods:{getScore(){var e;this.$api.get(`scores/?user=${((e=this.$authStore.currentUser)==null?void 0:e.id)||0}&proposal=${this.$route.params.proposal_id}`).then(o=>{o.data.length==1&&(this.score=o.data[0],this.formData.strengths=this.score.strengths,this.formData.weaknesses=this.score.weaknesses)})},getSections(){this.$api.get("sections/").then(e=>{this.sections=e.data})},startDialog(){this.getScore(),this.showDialog=!0},submitScore(){confirm("This action is irreversible. Please confirm submission of your score sheet")&&(this.$utilsStore.setLoading(!0),this.$api.patch(`scores/${this.score.id}/`,this.formData).then(e=>{this.score=e.data,this.$utilsStore.setLoading(!1),this.showDialog=!1,location.reload()}))}}},ga={key:0},ba=n("div",{class:"text-h6"},"Submit Review",-1),ya=n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"Section"),n("th",{class:"text-right"},"Score"),n("th",{class:"text-left"},"Comment")])],-1),ka={key:0},wa={class:"text-left"},Sa={class:"text-left"},$a={class:"bg-grey-4"},xa=n("td",null,"Total percentage score",-1),Ca={colspan:"2"},Da={class:"q-pa-sm row"},qa={class:"col-12 q-px-sm"},Va={class:"col-12 q-px-sm"},Pa={class:"q-pa-md"},Ta=n("p",null,"Do you recommend this proposal for funding?",-1);function Ea(e,o,r,m,t,i){return t.score&&t.score.status=="IN PROGRESS"&&e.$userHasAnyGroups(["reviewer"])?(d(),h("div",ga,[l(k,{color:"primary",label:"Submit Review",onClick:i.startDialog},null,8,["onClick"]),l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[6]||(o[6]=a=>t.showDialog=a),persistent:"","full-height":""},{default:s(()=>[l(A,{style:{"min-width":"22rem"}},{default:s(()=>[l(D,{class:"flex justify-between"},{default:s(()=>[ba,l(k,{color:"primary",flat:"",dense:"",icon:"close",onClick:o[0]||(o[0]=a=>t.showDialog=!1)})]),_:1}),l(R),l(D,{class:"scroll"},{default:s(()=>[l(ne,{separator:"cell",flat:"",dense:"",bordered:""},{default:s(()=>[ya,n("tbody",null,[(d(!0),h(T,null,E(t.sections,a=>(d(),h(T,{key:a.id},[a.max_score>0?(d(),h("tr",ka,[n("td",wa,_(a.title),1),n("td",{class:je(["text-center",{"bg-green-2":t.score[a.name]>a.max_score/2,"bg-red-1":t.score[a.name]<=a.max_score/2}])},_(t.score[a.name])+"/"+_(a.max_score),3),n("td",Sa,_(t.score[`${a.name}_comment`]),1)])):P("",!0)],64))),128)),n("tr",$a,[xa,n("td",Ca,_(i.percentageScore)+"%",1)])])]),_:1})]),_:1}),n("div",Da,[n("div",qa,[l(pe,{outline:"",color:"teal","text-color":"white",icon:"arrow_circle_up"},{default:s(()=>[v(" Strengths ")]),_:1}),l(K,{modelValue:t.formData.strengths,"onUpdate:modelValue":o[1]||(o[1]=a=>t.formData.strengths=a),type:"textarea",outlined:"",label:"Strengths"},null,8,["modelValue"])]),n("div",Va,[l(pe,{outline:"",color:"primary","text-color":"white",icon:"arrow_circle_down"},{default:s(()=>[v(" Weaknesses ")]),_:1}),l(K,{modelValue:t.formData.weaknesses,"onUpdate:modelValue":o[2]||(o[2]=a=>t.formData.weaknesses=a),type:"textarea",outlined:"",label:"Weaknesses"},null,8,["modelValue"])])]),n("div",Pa,[Ta,l(Se,{modelValue:t.formData.is_recommended,"onUpdate:modelValue":o[3]||(o[3]=a=>t.formData.is_recommended=a),val:!0,label:"Yes"},null,8,["modelValue"]),l(Se,{modelValue:t.formData.is_recommended,"onUpdate:modelValue":o[4]||(o[4]=a=>t.formData.is_recommended=a),val:!1,label:"No"},null,8,["modelValue"])]),l(R,{spaced:""}),l(D,{align:"right"},{default:s(()=>[l(k,{color:"primary",flat:"",label:"Cancel",onClick:o[5]||(o[5]=a=>t.showDialog=!1)}),l(k,{color:"primary",label:"Submit Review",onClick:i.submitScore},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):P("",!0)}var Ma=x(va,[["render",Ea]]),La=$e({name:"QBanner",props:{...He,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:o}){const{proxy:{$q:r}}=xe(),m=We(e,r),t=f(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(m.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),i=f(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const a=[q("div",{class:"q-banner__avatar col-auto row items-center self-start"},ke(o.avatar)),q("div",{class:"q-banner__content col text-body2"},ke(o.default))],u=ke(o.action);return u!==void 0&&a.push(q("div",{class:i.value},u)),q("div",{class:t.value+(e.inlineActions===!1&&u!==void 0?" q-banner--top-padding":""),role:"alert"},a)}}});const Ia={data(){return{loading:!1,showDialog:!1,scores:[],sections:[],formData:{strengths:null,weaknesses:null,status:"COMPLETED"}}},created(){this.getScores(),this.getSections()},methods:{getScores(){this.$api.get(`scores/?proposal=${this.$route.params.proposal_id}&status_includes=IN PROGRESS|COMPLETED`).then(e=>{this.scores=e.data})},getSections(){this.$api.get("sections/").then(e=>{this.sections=e.data})},downloadScoreSheet(){this.$api.get(`proposals/${this.$route.params.proposal_id}/score-sheet/download/`).then(e=>{e.status==200&&window.open(e.data.file_url,"_blank")})}}},Ra={key:0,class:"q-pa-sm"},Aa={class:"flex q-py-xs"},Ua={class:"bg-grey-2"},Ba=n("td",{class:"text-left"},null,-1),Fa={class:"text-left"},Oa={class:"bg-grey-3"},Na=n("td",{class:"text-left"},"Total",-1);function Qa(e,o,r,m,t,i){return t.scores.length?(d(),h("div",Ra,[n("div",Aa,[l(Ht,null,{default:s(()=>[v("Score Sheet")]),_:1}),l(k,{color:"primary",icon:"download",label:"export",flat:"",onClick:i.downloadScoreSheet},null,8,["onClick"])]),l(ne,{flat:"",dense:"",bordered:"",separator:"vertical"},{default:s(()=>[n("tbody",null,[n("tr",Ua,[Ba,(d(!0),h(T,null,E(t.scores,a=>(d(),h("td",{key:a,class:"text-left"},[n("div",null,_(a.user__first_name)+" "+_(a.user__last_name),1),v(" "+_(a.user__username),1)]))),128))]),(d(!0),h(T,null,E(t.sections,(a,u)=>(d(),h("tr",{key:a.id},[n("td",Fa,_(u)+" - "+_(a.title),1),(d(!0),h(T,null,E(t.scores,p=>(d(),h("td",{key:p,class:"text-left"},[l(A,{flat:"",bordered:"",class:"q-mx-sm text-center",style:{width:"1.5rem",display:"inline-block"}},{default:s(()=>[v(_(p[a.name]),1)]),_:2},1024),p[`${a.name}_comment`]?(d(),y(k,{key:0,color:"secondary",dense:"",size:"xs",icon:"comment"},{default:s(()=>[l(Kt,null,{default:s(()=>[l(La,null,{avatar:s(()=>[l(Q,{name:"comment",color:"secondary"})]),default:s(()=>[v(" "+_(p[`${a.name}_comment`]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):P("",!0)]))),128))]))),128)),n("tr",Oa,[Na,(d(!0),h(T,null,E(t.scores,a=>(d(),h("td",{key:a,class:"text-left"},[l(A,{flat:"",bordered:"",class:"q-mx-sm text-center",style:{width:"1.5rem",display:"inline-block"}},{default:s(()=>[v(_(a.total_score),1)]),_:2},1024)]))),128))])])]),_:1})])):P("",!0)}var ja=x(Ia,[["render",Qa]]);const Ga={props:{loading:Boolean},data(){return{}},computed:{show(){return this.$utilsStore.isLoading}},created(){this.$utilsStore.setLoading(!1)}},za={key:0,class:"loading"};function Wa(e,o,r,m,t,i){return i.show?(d(),h("div",za,[l(J,{modelValue:i.show,"onUpdate:modelValue":o[0]||(o[0]=a=>i.show=a),persistent:""},{default:s(()=>[l(Yt,{color:"primary",size:"3rem",thickness:5})]),_:1},8,["modelValue"])])):P("",!0)}var Ha=x(Ga,[["render",Wa]]);const Ka={props:{message:{type:String,required:!0}}};function Ya(e,o,r,m,t,i){return r.message?(d(),y(A,{key:0},{default:s(()=>[l(D,{class:"flex justify-between no-wrap q-gutter-x-lg items-stretch"},{default:s(()=>[n("div",null,_(r.message),1),l(k,{flat:"",icon:"close",color:"primary",dense:"",size:"sm",onClick:o[0]||(o[0]=a=>e.$emit("close",""))})]),_:1})]),_:1})):P("",!0)}var Ja=x(Ka,[["render",Ya]]);const Xa={props:{message:{type:String,required:!0,default:"alert_circle"},icon:{type:String,required:!0}}};function Za(e,o,r,m,t,i){return d(),h("div",null,[l(A,{flat:"",bordered:"",class:"q-pa-md"},{default:s(()=>[l(Q,{size:"md",name:r.icon},null,8,["name"]),v(" "+_(r.message),1)]),_:1})])}var es=x(Xa,[["render",Za]]);const ts={props:{showModal:Boolean,errorResponse:Object},data(){return{show:!1,errorMessages:{}}},methods:{},watch:{errorResponse(e){this.errorMessages=e.data,this.show=!0}}},os=n("div",{class:"text-h6"},"Errors",-1),ls={class:"text-left"},as={class:"text-right"};function ss(e,o,r,m,t,i){return d(),y(J,{modelValue:t.show,"onUpdate:modelValue":o[1]||(o[1]=a=>t.show=a)},{default:s(()=>[l(A,null,{default:s(()=>[l(D,null,{default:s(()=>[os]),_:1}),l(R),l(D,null,{default:s(()=>[l(ne,{flat:"",bordered:""},{default:s(()=>[n("tbody",null,[(d(!0),h(T,null,E(t.errorMessages,(a,u)=>(d(),h("tr",{key:u},[n("td",ls,[n("strong",null,_(u),1)]),n("td",as,[n("ul",null,[(d(!0),h(T,null,E(a,(p,S)=>(d(),h("li",{key:S},_(p),1))),128))])])]))),128))])]),_:1})]),_:1}),l(R),l(re,{align:"right"},{default:s(()=>[l(k,{color:"primary",label:"Close",onClick:o[0]||(o[0]=a=>t.show=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var rs=x(ts,[["render",ss]]);const ns={props:{label:String,options:{type:Array,required:!0},value:String},data(){return{selectedOption:this.value||null}},watch:{selectedOption(e){this.$emit("input",e)}}};function is(e,o,r,m,t,i){return d(),h("div",null,[n("label",null,_(r.label),1),n("div",null,[(d(!0),h(T,null,E(r.options,(a,u)=>(d(),y(Se,{key:u,modelValue:t.selectedOption,"onUpdate:modelValue":o[0]||(o[0]=p=>t.selectedOption=p),val:a.value},{default:s(()=>[v(_(a.label),1)]),_:2},1032,["modelValue","val"]))),128))])])}var us=x(ns,[["render",is]]);const cs={name:"OptionsField",props:{value:{type:String},options:{type:Array,required:!0},label:{type:String,required:!0},hint:String,error:String},data(){return{selectedOption:this.value}},watch:{selectedOption(e){this.$emit("input",e)}}},ds={class:"q-field q-my-sm"};function ms(e,o,r,m,t,i){return d(),h("div",ds,[l(ae,{dense:"",outlined:"",modelValue:t.selectedOption,"onUpdate:modelValue":o[0]||(o[0]=a=>t.selectedOption=a),options:r.options,label:r.label,hint:r.hint,error:r.error},null,8,["modelValue","options","label","hint","error"])])}var ps=x(cs,[["render",ms]]),fs=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],hs=function(e){return fs.map(function(o){return o.toLowerCase()}).indexOf(e.toLowerCase())!==-1},_s=function(e,o,r){Object.keys(o).filter(hs).forEach(function(m){var t=o[m];typeof t=="function"&&(m==="onInit"?t(e,r):r.on(m.substring(2),function(i){return t(i,r)}))})},vs=function(e,o,r,m){var t=e.modelEvents?e.modelEvents:null,i=Array.isArray(t)?t.join(" "):t;me(m,function(a,u){r&&typeof a=="string"&&a!==u&&a!==r.getContent({format:e.outputFormat})&&r.setContent(a)}),r.on(i||"change input undo redo",function(){o.emit("update:modelValue",r.getContent({format:e.outputFormat}))})},gs=function(e,o,r,m,t,i){m.setContent(i()),r.attrs["onUpdate:modelValue"]&&vs(o,r,m,t),_s(e,r.attrs,m)},Oe=0,Ye=function(e){var o=Date.now(),r=Math.floor(Math.random()*1e9);return Oe++,e+"_"+r+Oe+String(o)},bs=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},Ne=function(e){return typeof e=="undefined"||e===""?[]:Array.isArray(e)?e:e.split(" ")},ys=function(e,o){return Ne(e).concat(Ne(o))},ks=function(e){return e==null},Qe=function(){return{listeners:[],scriptId:Ye("tiny-script"),scriptLoaded:!1}},ws=function(){var e=Qe(),o=function(t,i,a,u){var p=i.createElement("script");p.referrerPolicy="origin",p.type="application/javascript",p.id=t,p.src=a;var S=function(){p.removeEventListener("load",S),u()};p.addEventListener("load",S),i.head&&i.head.appendChild(p)},r=function(t,i,a){e.scriptLoaded?a():(e.listeners.push(a),t.getElementById(e.scriptId)||o(e.scriptId,t,i,function(){e.listeners.forEach(function(u){return u()}),e.scriptLoaded=!0}))},m=function(){e=Qe()};return{load:r,reinitialize:m}},Ss=ws(),$s=function(){return typeof window!="undefined"?window:global},ee=function(){var e=$s();return e&&e.tinymce?e.tinymce:null},xs={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},te=globalThis&&globalThis.__assign||function(){return te=Object.assign||function(e){for(var o,r=1,m=arguments.length;r<m;r++){o=arguments[r];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},te.apply(this,arguments)},Cs=function(e,o,r,m){return e(m||"div",{id:o,ref:r})},Ds=function(e,o,r){return e("textarea",{id:o,visibility:"hidden",ref:r})},qs=Et({props:xs,setup:function(e,o){var r=e.init?te({},e.init):{},m=Mt(e),t=m.disabled,i=m.modelValue,a=m.tagName,u=Y(null),p=null,S=e.id||Ye("tiny-vue"),O=e.init&&e.init.inline||e.inline,z=!!o.attrs["onUpdate:modelValue"],N=!0,X=e.initialValue?e.initialValue:"",M="",le=function($){return z?function(){return i!=null&&i.value?i.value:""}:function(){return $?X:M}},U=function(){var $=le(N),g=te(te({},r),{readonly:e.disabled,target:u.value,plugins:ys(r.plugins,e.plugins),toolbar:e.toolbar||r.toolbar,inline:O,setup:function(L){p=L,L.on("init",function(H){return gs(H,e,o,L,i,$)}),typeof r.setup=="function"&&r.setup(L)}});bs(u.value)&&(u.value.style.visibility=""),ee().init(g),N=!1};me(t,function($){var g;p!==null&&(typeof((g=p.mode)===null||g===void 0?void 0:g.set)=="function"?p.mode.set($?"readonly":"design"):p.setMode($?"readonly":"design"))}),me(a,function($){var g;z||(M=p.getContent()),(g=ee())===null||g===void 0||g.remove(p),Ue(function(){return U()})}),Lt(function(){if(ee()!==null)U();else if(u.value&&u.value.ownerDocument){var $=e.cloudChannel?e.cloudChannel:"6",g=e.apiKey?e.apiKey:"no-api-key",L=ks(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(g,"/tinymce/").concat($,"/tinymce.min.js"):e.tinymceScriptSrc;Ss.load(u.value.ownerDocument,L,U)}}),Ge(function(){ee()!==null&&ee().remove(p)}),O||(It(function(){N||U()}),Rt(function(){var $;z||(M=p.getContent()),($=ee())===null||$===void 0||$.remove(p)}));var W=function($){var g;M=p.getContent(),(g=ee())===null||g===void 0||g.remove(p),r=te(te({},r),$),Ue(function(){return U()})};return o.expose({rerender:W,getEditor:function(){return p}}),function(){return O?Cs(q,S,u,e.tagName):Ds(q,S,u)}}});const Vs={name:"app",components:{editor:qs}},Ps={id:"app"};function Ts(e,o,r,m,t,i){const a=G("editor");return d(),h("div",Ps,[l(a,{"api-key":"no-api-key",init:{height:500,menubar:!1,plugins:["a11ychecker","advlist","advcode","advtable","autolink","checklist","export","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","powerpaste","fullscreen","formatpainter","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | casechange blocks | bold italic backcolor |           alignleft aligncenter alignright alignjustify |           bullist numlst checklist outdent indent | removeformat | a11ycheck code table help"},"initial-value":""})])}var Es=x(Vs,[["render",Ts]]);const Ms={"developer-menu":eo,"developer-menu-2":io,"user-menu":po,"user-menu-2":go,"main-menu":$o,"proposal-options":Do,"useful-docs":To,taglines:Ro,"user-logout":Oo,"update-user":sl,"change-password":Ft,"create-proposal-dialog":fl,"proposal-file-attachment":Cl,"submit-proposal":Al,"accept-review":jl,"section-editor":Zl,"score-editor":_a,"score-sheet":Ma,"proposal-score-sheets":ja,"loading-component":Ha,"message-box":Ja,"alert-msg":es,"error-message-modal":rs,"radio-field":us,"options-field":ps,"tiny-mce":Es};var qr=async({app:e})=>{Object.entries(Ms).forEach(([o,r])=>{e.component(o,r)})};export{qr as default};
