import{Q as p,a as s}from"./QBreadcrumbs.ff1c7fef.js";import{Q as c}from"./QSeparator.0d3a48de.js";import{Q as h}from"./QInput.04be3f9c.js";import{Q as d}from"./QSelect.0e8a861a.js";import{_ as u,o as f,e as y,w as l,i as m,f as t,l as n}from"./index.7c80a85e.js";import{Q as g}from"./QCardActions.92e1f644.js";import{Q}from"./QForm.14bfa66c.js";import{Q as b}from"./QCard.f67a39fc.js";import{Q as _}from"./QPage.243a6ccc.js";import"./use-dark.5324e533.js";import"./use-key-composition.4b81e148.js";import"./use-split-attrs.e64b808b.js";import"./uid.42677368.js";import"./focus-manager.b507780d.js";import"./use-form.fbba0995.js";import"./QChip.09e5837f.js";import"./QItem.c1f7304d.js";import"./QItemLabel.23fda6bc.js";import"./QMenu.f2e61e4b.js";import"./selection.72fa5d70.js";import"./use-timeout.ed60acf4.js";import"./focusout.eaea8e55.js";import"./use-transition.8469f949.js";import"./scroll.f574600d.js";import"./QDialog.7ee240e9.js";import"./use-prevent-scroll.f82dac45.js";import"./format.3e32b8d9.js";const q={name:"ThemeComponent",data(){return{theme:{},formData:{title:"",call:null},callOptions:[],loading:!1,rules:{required:e=>!!e||"This field is required"}}},async created(){await this.fetchTheme(),await this.fetchCalls()},methods:{async fetchTheme(){try{const e=await this.$api.get(`themes/${this.$route.params.id}`);this.theme=e.data,this.formData.title=this.theme.title,this.formData.call=this.theme.call,console.log(">>>>>>>>",this.theme)}catch(e){this.$q.notify({type:"negative",message:"Failed to fetch theme details"}),console.error(e)}},async fetchCalls(){try{const e=await this.$api.get("/calls");this.callOptions=e.data}catch(e){this.$q.notify({type:"negative",message:"Failed to fetch call options"}),console.error(e)}},async submitForm(){if(!!await this.$refs.form.validate()){this.loading=!0;try{console.log(this.formData),await this.$api.put(`themes/${this.theme.id}/`,this.formData),this.$q.notify({type:"positive",message:"Theme updated successfully"}),this.cancel(),this.$emit("updated")}catch(e){this.$q.notify({type:"negative",message:"Failed to update theme"}),console.error(e)}finally{this.loading=!1}}},cancel(){this.$router.push("/themes")}}},v={class:"q-ma-md"},C={class:"flex justify-center"};function w(e,i,D,T,a,r){return f(),y(_,null,{default:l(()=>[m("div",v,[t(p,null,{default:l(()=>{var o;return[t(s,{icon:"home",to:"/",label:"Home"}),t(s,{icon:"apps",to:"/themes",label:"Themes"}),t(s,{label:`${(o=a.theme)==null?void 0:o.title}`,icon:"apps"},null,8,["label"])]}),_:1})]),t(c,{spaced:"",size:"0.5px"}),m("div",C,[t(b,{class:"my-card q-pa-md",style:{width:"500px"}},{default:l(()=>[t(Q,{onSubmit:r.submitForm,ref:"form"},{default:l(()=>[t(h,{modelValue:a.formData.title,"onUpdate:modelValue":i[0]||(i[0]=o=>a.formData.title=o),label:"Title",outlined:"",required:"",rules:[a.rules.required],class:"q-my-md"},null,8,["modelValue","rules"]),t(d,{modelValue:a.formData.call,"onUpdate:modelValue":i[1]||(i[1]=o=>a.formData.call=o),label:"Call",outlined:"",options:a.callOptions,"option-value":"id","option-label":"title","emit-value":"","map-options":"",class:"q-my-md"},null,8,["modelValue","options"]),t(g,{align:"right"},{default:l(()=>[t(n,{label:"Cancel",flat:"",color:"negative",onClick:r.cancel},null,8,["onClick"]),t(n,{label:"Save",color:"primary",loading:a.loading,type:"submit"},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})])]),_:1})}var ee=u(q,[["render",w]]);export{ee as default};
