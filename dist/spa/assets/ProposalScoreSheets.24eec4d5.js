import{Q as w}from"./QToolbarTitle.b2035143.js";import{m as q,n as b,p as m,O as k,D as Q,_ as B,o as s,j as a,i as l,f as o,w as r,h as d,l as g,F as p,k as f,u as v,t as n,e as C,Q as D}from"./index.3671a223.js";import{Q as S}from"./QCard.78b7c44d.js";import{a as $,u as T}from"./use-dark.dbbd0c9d.js";import{Q as E}from"./QPopupProxy.b8fe0c28.js";import{Q as P}from"./QMarkupTable.4c97a209.js";var N=q({name:"QBanner",props:{...$,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(t,{slots:u}){const{proxy:{$q:x}}=Q(),y=T(t,x),c=b(()=>"q-banner row items-center"+(t.dense===!0?" q-banner--dense":"")+(y.value===!0?" q-banner--dark q-dark":"")+(t.rounded===!0?" rounded-borders":"")),h=b(()=>`q-banner__actions row items-center justify-end col-${t.inlineActions===!0?"auto":"all"}`);return()=>{const e=[m("div",{class:"q-banner__avatar col-auto row items-center self-start"},k(u.avatar)),m("div",{class:"q-banner__content col text-body2"},k(u.default))],i=k(u.action);return i!==void 0&&e.push(m("div",{class:h.value},i)),m("div",{class:c.value+(t.inlineActions===!1&&i!==void 0?" q-banner--top-padding":""),role:"alert"},e)}}});const O={data(){return{loading:!1,showDialog:!1,scores:[],sections:[],formData:{strengths:null,weaknesses:null,status:"COMPLETED"}}},created(){this.getScores(),this.getSections()},methods:{getScores(){this.$api.get(`scores/?proposal=${this.$route.params.proposal_id}&status_includes=IN PROGRESS|COMPLETED`).then(t=>{this.scores=t.data})},getSections(){this.$api.get("sections/").then(t=>{this.sections=t.data})},downloadScoreSheet(){this.$api.get(`proposals/${this.$route.params.proposal_id}/score-sheet/download/`).then(t=>{t.status==200&&window.open(t.data.file_url,"_blank")})}}},V={key:0,class:"q-pa-sm"},A={class:"flex q-py-xs"},I={class:"bg-grey-2"},L=l("td",{class:"text-left"},null,-1),M={class:"text-left"},j={class:"bg-grey-3"},F=l("td",{class:"text-left"},"Total",-1);function R(t,u,x,y,c,h){return c.scores.length?(s(),a("div",V,[l("div",A,[o(w,null,{default:r(()=>[d("Score Sheet")]),_:1}),o(g,{color:"primary",icon:"download",label:"export",flat:"",onClick:h.downloadScoreSheet},null,8,["onClick"])]),o(P,{flat:"",dense:"",bordered:"",separator:"vertical"},{default:r(()=>[l("tbody",null,[l("tr",I,[L,(s(!0),a(p,null,f(c.scores,e=>(s(),a("td",{key:e,class:"text-left"},[l("div",null,n(e.user__first_name)+" "+n(e.user__last_name),1),d(" "+n(e.user__username),1)]))),128))]),(s(!0),a(p,null,f(c.sections,(e,i)=>(s(),a("tr",{key:e.id},[l("td",M,n(i)+" - "+n(e.title),1),(s(!0),a(p,null,f(c.scores,_=>(s(),a("td",{key:_,class:"text-left"},[o(S,{flat:"",bordered:"",class:"q-mx-sm text-center",style:{width:"1.5rem",display:"inline-block"}},{default:r(()=>[d(n(_[e.name]),1)]),_:2},1024),_[`${e.name}_comment`]?(s(),C(g,{key:0,color:"secondary",dense:"",size:"xs",icon:"comment"},{default:r(()=>[o(E,null,{default:r(()=>[o(N,null,{avatar:r(()=>[o(D,{name:"comment",color:"secondary"})]),default:r(()=>[d(" "+n(_[`${e.name}_comment`]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):v("",!0)]))),128))]))),128)),l("tr",j,[F,(s(!0),a(p,null,f(c.scores,e=>(s(),a("td",{key:e,class:"text-left"},[o(S,{flat:"",bordered:"",class:"q-mx-sm text-center",style:{width:"1.5rem",display:"inline-block"}},{default:r(()=>[d(n(e.total_score),1)]),_:2},1024)]))),128))])])]),_:1})])):v("",!0)}var W=B(O,[["render",R]]);export{W as p};
