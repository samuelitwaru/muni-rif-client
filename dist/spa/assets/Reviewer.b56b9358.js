import{Q,a as u}from"./QBreadcrumbs.18ea6ff7.js";import{Q as b}from"./QSeparator.6c6f2516.js";import{Q as r}from"./QInput.ab16fab6.js";import{Q as h}from"./QRadio.3f981232.js";import{Q as d}from"./QSelect.99a4094b.js";import{Q as y}from"./QChip.3c79b892.js";import{Q as v}from"./QCardSection.fe503a8b.js";import{Q as q,a as k}from"./QItem.d2d6991a.js";import{Q as R}from"./QList.f16661b5.js";import{Q as f}from"./QCard.be6f1227.js";import{Q as C}from"./QPopupProxy.46dd6502.js";import{_ as x,o as m,e as p,w as s,i,f as a,u as F,j as _,F as g,k as D,l as w,h as U,t as T}from"./index.f337fba3.js";import{Q as S}from"./QCheckbox.a6dd22f4.js";import{Q as B}from"./QForm.db230c97.js";import{Q as N}from"./QPage.7c60fe9d.js";import"./use-dark.1793b84e.js";import"./use-key-composition.89769990.js";import"./use-split-attrs.26446f80.js";import"./uid.42677368.js";import"./focus-manager.b507780d.js";import"./use-form.e7940d77.js";import"./option-sizes.ab98efd6.js";import"./QItemLabel.7bea3d83.js";import"./QMenu.6c1f0454.js";import"./selection.7f679905.js";import"./use-timeout.d7fa171a.js";import"./focusout.1add3e24.js";import"./use-transition.41dca9ee.js";import"./scroll.e1bc6034.js";import"./QDialog.f0613908.js";import"./use-prevent-scroll.cbde5022.js";import"./format.3e32b8d9.js";const L={name:"CreateReviewer",data(){return{loading:!1,showDialog:!1,faculties:[],qualifications:[],themes:[],formData:{email:"",first_name:"",last_name:"",is_active:!1,phone:"",gender:"Female",designation:"",faculty:null,department:null,qualification:null,password:"",themes:[]}}},created(){this.getReviewer(),this.getFaculties(),this.getQualifications(),this.getThemes()},methods:{getReviewer(){this.$api.get(`users/${this.$route.params.user_id}/`).then(l=>{l.status==200&&(this.reviewer=l.data,this.setFormData())})},updateReviewer(){this.formData.username=this.formData.email,this.$utilsStore.setLoading(!0),this.$api.put(`users/${this.reviewer.id}/update-reviewer/`,this.formData).then(l=>{this.$router.push("/reviewers/"),this.$utilsStore.setLoading(!1)})},getThemes(){this.$api.get("themes/").then(l=>{this.themes=l.data})},getFaculties(){this.$api.get("faculties/").then(l=>{this.faculties=l.data})},getQualifications(){this.$api.get("qualifications/").then(l=>{this.qualifications=l.data})},selectTheme(l){this.formData.themes.includes(l)?this.formData.themes.filter(o=>o!=l):this.formData.themes.push(l)},deselectTheme(l){this.formData.themes.includes(l)&&(this.formData.themes=this.formData.themes.filter(o=>o!=l))},cancelCreate(){this.showDialog=!1},setFormData(){console.log(this.reviewer.profile),this.formData={first_name:this.reviewer.first_name,last_name:this.reviewer.last_name,is_active:this.reviewer.is_active,email:this.reviewer.email,phone:this.reviewer.profile.phone,gender:this.reviewer.profile.gender,designation:this.reviewer.profile.designation,qualification:this.reviewer.profile.qualification,department:this.reviewer.profile.department,faculty:this.reviewer.profile.faculty,themes:this.reviewer.profile.themes.map(l=>l.theme)}}},watch:{showPopup(l,o){this.showDialog=l},showDialog(l,o){this.$emit("showPopupChanged",l)}}},P={class:"q-ma-md"},E={class:"flex justify-center"},j={class:"q-pa-md"},z={class:"row q-col-gutter-xs q-my-sm"},M={class:"col"},A={class:"col"},H={class:"row q-col-gutter-xs q-my-sm"},I={class:"col"},Y={class:"col"},G={class:"row q-col-gutter-xs q-my-sm"},J={class:"col"},K={class:"col"},O={class:"row q-col-gutter-xs"},W={class:"col"},X={class:"col"},Z={class:"q-my-sm"},$=i("label",{for:""},"Themes",-1),ee=i("div",{class:"text-h6"},"Select Themes",-1),te={class:"q-pa-md",align:"center"};function le(l,o,oe,ae,t,n){return m(),p(N,null,{default:s(()=>[i("div",P,[a(Q,null,{default:s(()=>[a(u,{icon:"home",to:"/",label:"Home"}),a(u,{icon:"people",to:"/reviewers",label:"Reviewers"}),a(u,{label:`${t.formData.first_name} ${t.formData.last_name}`,icon:"person"},null,8,["label"])]),_:1})]),a(b,{spaced:"",size:"0.5px"}),i("div",E,[a(f,{class:"my-card"},{default:s(()=>[a(B,{class:"q-gutter-md"},{default:s(()=>{var c;return[i("div",j,[i("div",z,[i("div",M,[a(r,{outlined:"",dense:"",modelValue:t.formData.first_name,"onUpdate:modelValue":o[0]||(o[0]=e=>t.formData.first_name=e),label:"First Name",rules:l.nameRules,required:""},null,8,["modelValue","rules"])]),i("div",A,[a(r,{outlined:"",dense:"",modelValue:t.formData.last_name,"onUpdate:modelValue":o[1]||(o[1]=e=>t.formData.last_name=e),label:"Last Name",rules:l.nameRules,required:""},null,8,["modelValue","rules"])])]),i("div",H,[i("div",I,[a(r,{outlined:"",dense:"",modelValue:t.formData.email,"onUpdate:modelValue":o[2]||(o[2]=e=>t.formData.email=e),label:"Email",type:"email",rules:l.emailRules,required:""},null,8,["modelValue","rules"])]),i("div",Y,[a(r,{outlined:"",dense:"",modelValue:t.formData.phone,"onUpdate:modelValue":o[3]||(o[3]=e=>t.formData.phone=e),label:"Telephone Number",type:"tel",rules:l.phoneRules,required:""},null,8,["modelValue","rules"])])]),a(h,{modelValue:t.formData.gender,"onUpdate:modelValue":o[4]||(o[4]=e=>t.formData.gender=e),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Male",label:"Male"},null,8,["modelValue"]),a(h,{modelValue:t.formData.gender,"onUpdate:modelValue":o[5]||(o[5]=e=>t.formData.gender=e),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Female",label:"Female"},null,8,["modelValue"]),i("div",G,[i("div",J,[a(d,{outlined:"",dense:"",modelValue:t.formData.faculty,"onUpdate:modelValue":o[6]||(o[6]=e=>t.formData.faculty=e),options:t.faculties,"option-value":"id","option-label":"name",label:"Faculty","emit-value":"","map-options":""},null,8,["modelValue","options"])]),i("div",K,[a(d,{outlined:"",dense:"",modelValue:t.formData.department,"onUpdate:modelValue":o[7]||(o[7]=e=>t.formData.department=e),options:(c=this.faculties.find(e=>e.id===this.formData.faculty))==null?void 0:c.departments,"option-value":"id","option-label":"name",label:"Department","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),i("div",O,[i("div",W,[a(d,{dense:"",outlined:"",modelValue:t.formData.qualification,"onUpdate:modelValue":o[8]||(o[8]=e=>t.formData.qualification=e),options:t.qualifications,label:"Qualification","option-value":"id","option-label":"name","map-options":"","emit-value":""},null,8,["modelValue","options"])]),i("div",X,[a(r,{outlined:"",dense:"",modelValue:t.formData.designation,"onUpdate:modelValue":o[9]||(o[9]=e=>t.formData.designation=e),label:"Your Designation",rules:l.nameRules,required:""},null,8,["modelValue","rules"])])]),i("div",Z,[$,a(f,{class:"row",flat:"",bordered:"",style:{"min-height":"4rem"}},{default:s(()=>[i("div",{class:F(["col-10 flex content-center",{"truncate-chip-labels":!0}]),style:{"max-width":"400px"}},[(m(!0),_(g,null,D(t.themes.filter(e=>t.formData.themes.includes(e.id)),e=>(m(),p(y,{key:e.id,class:"glossy",label:e.title,removable:"",onRemove:V=>n.deselectTheme(e.id)},null,8,["label","onRemove"]))),128))]),a(w,{class:"col-2",color:"primary",flat:"",icon:"add"},{default:s(()=>[a(C,{cover:"",breakpoint:1e3},{default:s(()=>[a(f,{class:"my-card"},{default:s(()=>[a(v,null,{default:s(()=>[ee]),_:1}),a(v,null,{default:s(()=>[a(R,{bordered:"",separator:""},{default:s(()=>[(m(!0),_(g,null,D(t.themes.filter(e=>!t.formData.themes.includes(e.id)),e=>(m(),p(q,{style:{cursor:"pointer"},clickable:"",onClick:V=>n.selectTheme(e.id),key:e.id},{default:s(()=>[a(k,null,{default:s(()=>[U(T(e.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),a(S,{"left-labe":"",modelValue:t.formData.is_active,"onUpdate:modelValue":o[10]||(o[10]=e=>t.formData.is_active=e),label:"Is Active","checked-icon":"task_alt","unchecked-icon":"highlight_off"},null,8,["modelValue"])]),i("div",te,[a(w,{color:"primary",label:"Confirm",onClick:n.updateReviewer},null,8,["onClick"])])]}),_:1})]),_:1})])]),_:1})}var Pe=x(L,[["render",le]]);export{Pe as default};
