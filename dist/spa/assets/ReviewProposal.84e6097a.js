import{Q as V}from"./QToolbarTitle.11babbcc.js";import{Q as T}from"./QBtnToggle.0d6e1a12.js";import{Q as f}from"./QCard.4957859e.js";import{_ as g,o as r,h as n,a as s,w as m,f as B,t as p,g as t,s as v,r as c,F as C,i as M,e as u,aS as _,c as h,Q as $}from"./index.9b6d8f02.js";import{p as H,B as L,T as N}from"./BudgetItems.b10380fd.js";import{P as I}from"./ProposalHeader.334dfe68.js";import{Q as U}from"./QCircularProgress.aedc86cc.js";import{Q as z}from"./QCardSection.f9ea1c28.js";import"./QBtnGroup.cfd1d6a9.js";import"./use-form.33fd784e.js";import"./use-dark.8dc51c8e.js";import"./QChip.4ed0a923.js";import"./QMarkupTable.e680a5a9.js";import"./format.3e32b8d9.js";const D={props:["score","section"],name:"ScoreView"},E={key:0};function F(i,l,o,x,a,w){return o.score?(r(),n("div",E,[s(f,{class:"flex q-my-sm items-center",flat:"",bordered:""},{default:m(()=>[s(z,null,{default:m(()=>[s(U,{"show-value":"","font-size":"12px",value:o.score[o.section.name]/o.section.max_score*100,size:"50px",thickness:.22,color:"teal","track-color":"grey-3",class:"q-ma-md"},{default:m(()=>[B(p(o.score[o.section.name])+"/"+p(o.section.max_score),1)]),_:1},8,["value"])]),_:1}),t("div",null,p(o.score[`${o.section.name}_comment`]||"No comment"),1)]),_:1})])):v("",!0)}var O=g(D,[["render",F]]);const R={name:"ReviewProposal",components:{proposalattachments:H,BudgetItems:L,TeamMembers:N,ProposalHeader:I,ScoreView:O},data(){return{tab:"content",sections:[],proposal:{},score:null,content:`
      <p>
        Lorem ipsum dolor sit amet consectetur, adipisicing elit. Obcaecati
        natus animi, et itaque ea tempora, exercitationem nemo nobis eos quos
        corrupti quasi cupiditate recusandae magnam, quis dicta facere dolore
        blanditiis.
      </p>`}},created(){this.getProposal(),this.getSections()},methods:{getProposal(){this.$api.get(`proposals/${this.$route.params.proposal_id}/`).then(i=>{this.proposal=i.data,this.$proposalStore.setProposal(this.proposal),this.getScore()})},getScore(){var i,l;console.log(((i=this.$authStore.currentUser)==null?void 0:i.id)||0),this.$api.get(`scores/?user=${((l=this.$authStore.currentUser)==null?void 0:l.id)||0}&proposal=${this.$route.params.proposal_id}`).then(o=>{o.data.length==1&&(this.score=o.data[0])})},getSections(){this.$api.get("sections/").then(i=>{this.sections=i.data.map(l=>(l.view="proposal",l))})}}},j=["id"],G={class:"q-pa-sm"},A={class:"flex"},J={key:0},K={key:3},W=["innerHTML"],X={class:"q-my-sm"},Y={class:"bg-grey-0"},Z={class:"text-caption text-grey-8"},ee=t("hr",{id:"solution",class:"section-separator"},null,-1);function oe(i,l,o,x,a,w){const b=c("accept-review"),y=c("ProposalHeader"),S=c("proposalattachments"),q=c("BudgetItems"),k=c("TeamMembers"),P=c("score-editor"),Q=c("ScoreView");return r(),n("div",null,[s(b,{proposal:a.proposal,score:a.score},null,8,["proposal","score"]),s(y),(r(!0),n(C,null,M(a.sections,e=>(r(),n("div",{key:e.id},[t("hr",{id:e.name,class:"section-separator"},null,8,j),t("div",G,[s(V,{class:"flex justify-between"},{default:m(()=>[t("div",A,p(e.title),1)]),_:2},1024),e.max_score>0?(r(),n("div",J,[s(T,{class:"q-mt-xs",square:"",style:{border:"1px #dddddd solid"},glossy:"",padding:"5px 30px",modelValue:e.view,"onUpdate:modelValue":d=>e.view=d,color:"white","text-color":"black","toggle-text-color":"white",unelevated:"",bordered:"","toggle-color":"red",options:[{label:"Proposal",value:"proposal"},{label:"Guidelines",value:"guidelines"},{label:"Scores",value:"scores"}]},null,8,["modelValue","onUpdate:modelValue"])])):v("",!0),u(t("div",null,[e.name=="attachments"?(r(),h(S,{key:0})):e.name=="summary_budget"?(r(),h(q,{key:1})):e.name=="team"?(r(),h(k,{key:2})):(r(),n("div",K,[s(f,{flat:"",bordered:"",class:"q-pa-sm q-my-sm"},{default:m(()=>{var d;return[t("div",{style:{overflow:"auto","min-height":"5rem"},innerHTML:((d=a.proposal)==null?void 0:d[e.name])||""},null,8,W)]}),_:2},1024)]))],512),[[_,e.view=="proposal"]]),u(s(P,{min:0,max:e.max_score,proposal:a.proposal,section:e,score:a.score},null,8,["max","proposal","section","score"]),[[_,e.view=="scores"]]),u(s(Q,{section:e,score:a.score},null,8,["section","score"]),[[_,e.view=="scores"]]),u(t("div",X,[s(f,{class:"flex no-wrap q-pa-sm",flat:"",bordered:""},{default:m(()=>[s($,{size:"md",class:"q-pr-sm",name:"info_outline"}),t("div",Y,[t("small",Z,p(e.description),1)])]),_:2},1024)],512),[[_,e.view=="guidelines"&&a.score.status=="COMPLETED"]])])]))),128)),ee])}var fe=g(R,[["render",oe]]);export{fe as default};
