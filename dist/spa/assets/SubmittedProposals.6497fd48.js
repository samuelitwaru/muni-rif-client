import{Q as Ne,a as ve}from"./QBreadcrumbs.b48f041b.js";import{Q as Ae}from"./QSeparator.f4e84234.js";import{m as j,aW as Qe,n as v,s as Y,E as Se,aX as me,aY as Le,T as Fe,p as x,D as Z,l as W,y as Ue,a7 as Pe,Q as X,g as Me,R as We,a1 as Oe,aB as H,ab as Ke,aH as je,ap as te,aI as re,z as fe,G as ie,ao as ue,N as ze,aK as Ge,O,aZ as xe,V as He,W as ce,a_ as we,ai as Ye,q as Xe,C as Ze,_ as ae,o as b,j as k,f as S,w as C,e as R,u as K,F as E,k as $,i,h as M,t as P,r as U,aN as ke,aO as Ce,a$ as Je}from"./index.3671a223.js";import{Q as qe}from"./QCard.78b7c44d.js";import{Q as Ve}from"./QPopupProxy.b8fe0c28.js";import{Q as et}from"./QChip.05b39f31.js";import{Q as De}from"./QMarkupTable.4c97a209.js";import{Q as de}from"./QInput.36128974.js";import{a as Te,u as Ee}from"./use-dark.dbbd0c9d.js";import{b as tt}from"./format.2bc25e5f.js";import{Q as Ie}from"./QPage.e8da9ae1.js";import{Q as nt,a as at}from"./QItem.41d22b85.js";import{Q as lt}from"./QList.ae152641.js";import{g as he,s as ge}from"./touch.3df10340.js";import{d as st}from"./use-timeout.26584f0c.js";import{u as $e,Q as ot}from"./QDate.9457e75f.js";import{u as rt}from"./use-quasar.0b6dde19.js";import{F as it}from"./FileUploader2.120f1e55.js";import{Q as ut}from"./QSelect.3b8a2420.js";import"./QDialog.8d8d8cb6.js";import"./use-prevent-scroll.53dc6540.js";import"./scroll.624406d4.js";import"./QMenu.2c83730c.js";import"./focus-manager.b507780d.js";import"./use-transition.1d5f554b.js";import"./use-key-composition.a7274795.js";import"./use-split-attrs.d467856c.js";import"./uid.42677368.js";import"./use-form.820ebbed.js";import"./QCardSection.54f69d89.js";import"./QItemLabel.8f35a27f.js";import"./QUploader.c38a58bd.js";import"./QCircularProgress.dc7b61af.js";import"./use-file.e5919774.js";function ne(e,a){return[!0,!1].includes(e)?e:a}var ct=j({name:"QPagination",props:{...Te,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||Qe.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:a}){const{proxy:r}=Z(),{$q:p}=r,l=Ee(e,p),n=v(()=>parseInt(e.min,10)),t=v(()=>parseInt(e.max,10)),s=v(()=>parseInt(e.maxPages,10)),g=v(()=>q.value+" / "+t.value),w=v(()=>ne(e.boundaryLinks,e.input)),m=v(()=>ne(e.boundaryNumbers,!e.input)),d=v(()=>ne(e.directionLinks,e.input)),f=v(()=>ne(e.ellipses,!e.input)),y=Y(null),q=v({get:()=>e.modelValue,set:o=>{if(o=parseInt(o,10),e.disable||isNaN(o))return;const u=tt(o,n.value,t.value);e.modelValue!==u&&a("update:modelValue",u)}});Se(()=>`${n.value}|${t.value}`,()=>{q.value=e.modelValue});const h=v(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),c=v(()=>e.gutter in me?`${me[e.gutter]}px`:e.gutter||null),_=v(()=>c.value!==null?`--q-pagination-gutter-parent:-${c.value};--q-pagination-gutter-child:${c.value}`:null),V=v(()=>{const o=[e.iconFirst||p.iconSet.pagination.first,e.iconPrev||p.iconSet.pagination.prev,e.iconNext||p.iconSet.pagination.next,e.iconLast||p.iconSet.pagination.last];return p.lang.rtl===!0?o.reverse():o}),L=v(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),F=v(()=>Le(e,"flat")),le=v(()=>({[F.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),ee=v(()=>{const o={[F.value]:!1};return e.activeDesign!==""&&(o[e.activeDesign]=!0),o}),Q=v(()=>({...ee.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),N=v(()=>{let o=Math.max(s.value,1+(f.value?2:0)+(m.value?2:0));const u={pgFrom:n.value,pgTo:t.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(t.value).length)}em`}};return s.value&&o<t.value-n.value+1&&(o=1+Math.floor(o/2)*2,u.pgFrom=Math.max(n.value,Math.min(t.value-o+1,e.modelValue-Math.floor(o/2))),u.pgTo=Math.min(t.value,u.pgFrom+o-1),m.value&&(u.boundaryStart=!0,u.pgFrom++),f.value&&u.pgFrom>n.value+(m.value?1:0)&&(u.ellipsesStart=!0,u.pgFrom++),m.value&&(u.boundaryEnd=!0,u.pgTo--),f.value&&u.pgTo<t.value-(m.value?1:0)&&(u.ellipsesEnd=!0,u.pgTo--)),u});function z(o){q.value=o}function se(o){q.value=q.value+o}const oe=v(()=>{function o(){q.value=y.value,y.value=null}return{"onUpdate:modelValue":u=>{y.value=u},onKeyup:u=>{Fe(u,13)===!0&&o()},onBlur:o}});function I(o,u,D){const T={"aria-label":u,"aria-current":"false",...le.value,...o};return D===!0&&Object.assign(T,{"aria-current":"true",...Q.value}),u!==void 0&&(e.toFn!==void 0?T.to=e.toFn(u):T.onClick=()=>{z(u)}),x(W,T)}return Object.assign(r,{set:z,setByOffset:se}),()=>{const o=[],u=[];let D;if(w.value===!0&&(o.push(I({key:"bls",disable:e.disable||e.modelValue<=n.value,icon:V.value[0]},n.value)),u.unshift(I({key:"ble",disable:e.disable||e.modelValue>=t.value,icon:V.value[3]},t.value))),d.value===!0&&(o.push(I({key:"bdp",disable:e.disable||e.modelValue<=n.value,icon:V.value[1]},e.modelValue-1)),u.unshift(I({key:"bdn",disable:e.disable||e.modelValue>=t.value,icon:V.value[2]},e.modelValue+1))),e.input!==!0){D=[];const{pgFrom:T,pgTo:pe,marginalStyle:G}=N.value;if(N.value.boundaryStart===!0){const B=n.value===e.modelValue;o.push(I({key:"bns",style:G,disable:e.disable,label:n.value},n.value,B))}if(N.value.boundaryEnd===!0){const B=t.value===e.modelValue;u.unshift(I({key:"bne",style:G,disable:e.disable,label:t.value},t.value,B))}N.value.ellipsesStart===!0&&o.push(I({key:"bes",style:G,disable:e.disable,label:"\u2026",ripple:!1},T-1)),N.value.ellipsesEnd===!0&&u.unshift(I({key:"bee",style:G,disable:e.disable,label:"\u2026",ripple:!1},pe+1));for(let B=T;B<=pe;B++)D.push(I({key:`bpg${B}`,style:G,disable:e.disable,label:B},B,B===e.modelValue))}return x("div",{class:h.value,...L.value},[x("div",{class:"q-pagination__content row no-wrap items-center",style:_.value},[...o,e.input===!0?x(de,{class:"inline",style:{width:`${g.value.length/1.5}em`},type:"number",dense:!0,value:y.value,disable:e.disable,dark:l.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:g.value,min:n.value,max:t.value,...oe.value}):x("div",{class:"q-pagination__middle row justify-center"},D),...u])])}}}),dt=j({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:a,emit:r}){let p=!1,l,n,t=null,s=null,g,w;function m(){l&&l(),l=null,p=!1,t!==null&&(clearTimeout(t),t=null),s!==null&&(clearTimeout(s),s=null),n!==void 0&&n.removeEventListener("transitionend",g),g=null}function d(h,c,_){c!==void 0&&(h.style.height=`${c}px`),h.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,p=!0,l=_}function f(h,c){h.style.overflowY=null,h.style.height=null,h.style.transition=null,m(),c!==w&&r(c)}function y(h,c){let _=0;n=h,p===!0?(m(),_=h.offsetHeight===h.scrollHeight?0:void 0):(w="hide",h.style.overflowY="hidden"),d(h,_,c),t=setTimeout(()=>{t=null,h.style.height=`${h.scrollHeight}px`,g=V=>{s=null,(Object(V)!==V||V.target===h)&&f(h,"show")},h.addEventListener("transitionend",g),s=setTimeout(g,e.duration*1.1)},100)}function q(h,c){let _;n=h,p===!0?m():(w="show",h.style.overflowY="hidden",_=h.scrollHeight),d(h,_,c),t=setTimeout(()=>{t=null,h.style.height=0,g=V=>{s=null,(Object(V)!==V||V.target===h)&&f(h,"hide")},h.addEventListener("transitionend",g),s=setTimeout(g,e.duration*1.1)},100)}return Ue(()=>{p===!0&&m()}),()=>x(Pe,{css:!1,appear:e.appear,onEnter:y,onLeave:q},a.default)}}),Be=j({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:a}){const{proxy:{$q:r}}=Z(),p=Y(null),l=v(()=>e.stepper.modelValue===e.step.name),n=v(()=>{const c=e.step.disable;return c===!0||c===""}),t=v(()=>{const c=e.step.error;return c===!0||c===""}),s=v(()=>{const c=e.step.done;return n.value===!1&&(c===!0||c==="")}),g=v(()=>{const c=e.step.headerNav,_=c===!0||c===""||c===void 0;return n.value===!1&&e.stepper.headerNav&&_}),w=v(()=>e.step.prefix&&(l.value===!1||e.stepper.activeIcon==="none")&&(t.value===!1||e.stepper.errorIcon==="none")&&(s.value===!1||e.stepper.doneIcon==="none")),m=v(()=>{const c=e.step.icon||e.stepper.inactiveIcon;if(l.value===!0){const _=e.step.activeIcon||e.stepper.activeIcon;return _==="none"?c:_||r.iconSet.stepper.active}if(t.value===!0){const _=e.step.errorIcon||e.stepper.errorIcon;return _==="none"?c:_||r.iconSet.stepper.error}if(n.value===!1&&s.value===!0){const _=e.step.doneIcon||e.stepper.doneIcon;return _==="none"?c:_||r.iconSet.stepper.done}return c}),d=v(()=>{const c=t.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(l.value===!0){const _=e.step.activeColor||e.stepper.activeColor||e.step.color;return _!==void 0?_:c}return c!==void 0?c:n.value===!1&&s.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),f=v(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(d.value!==void 0?` text-${d.value}`:"")+(t.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(w.value===!0?"prefix":"icon"):"")+(l.value===!0?" q-stepper__tab--active":"")+(s.value===!0?" q-stepper__tab--done":"")+(g.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(n.value===!0?" q-stepper__tab--disabled":"")),y=v(()=>e.stepper.headerNav!==!0?!1:g.value);function q(){p.value!==null&&p.value.focus(),l.value===!1&&e.goToPanel(e.step.name)}function h(c){c.keyCode===13&&l.value===!1&&e.goToPanel(e.step.name)}return()=>{const c={class:f.value};g.value===!0&&(c.onClick=q,c.onKeyup=h,Object.assign(c,n.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:a.tabindex||0}));const _=[x("div",{class:"q-focus-helper",tabindex:-1,ref:p}),x("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[x("span",{class:"row flex-center"},[w.value===!0?e.step.prefix:x(X,{name:m.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const V=[x("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&V.push(x("div",{class:"q-stepper__caption"},e.step.caption)),_.push(x("div",{class:"q-stepper__label q-stepper__line relative-position"},V))}return Me(x("div",c,_),[[We,y.value]])}}});function pt(e){const a=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((r,p)=>{const l=parseFloat(r);l&&(a[p]=l)}),a}var vt=Oe({name:"touch-swipe",beforeMount(e,{value:a,arg:r,modifiers:p}){if(p.mouse!==!0&&H.has.touch!==!0)return;const l=p.mouseCapture===!0?"Capture":"",n={handler:a,sensitivity:pt(r),direction:he(p),noop:Ke,mouseStart(t){ge(t,n)&&je(t)&&(te(n,"temp",[[document,"mousemove","move",`notPassive${l}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(t,!0))},touchStart(t){if(ge(t,n)){const s=t.target;te(n,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),n.start(t)}},start(t,s){H.is.firefox===!0&&re(e,!0);const g=fe(t);n.event={x:g.left,y:g.top,time:Date.now(),mouse:s===!0,dir:!1}},move(t){if(n.event===void 0)return;if(n.event.dir!==!1){ie(t);return}const s=Date.now()-n.event.time;if(s===0)return;const g=fe(t),w=g.left-n.event.x,m=Math.abs(w),d=g.top-n.event.y,f=Math.abs(d);if(n.event.mouse!==!0){if(m<n.sensitivity[1]&&f<n.sensitivity[1]){n.end(t);return}}else if(window.getSelection().toString()!==""){n.end(t);return}else if(m<n.sensitivity[2]&&f<n.sensitivity[2])return;const y=m/s,q=f/s;n.direction.vertical===!0&&m<f&&m<100&&q>n.sensitivity[0]&&(n.event.dir=d<0?"up":"down"),n.direction.horizontal===!0&&m>f&&f<100&&y>n.sensitivity[0]&&(n.event.dir=w<0?"left":"right"),n.direction.up===!0&&m<f&&d<0&&m<100&&q>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&m<f&&d>0&&m<100&&q>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&m>f&&w<0&&f<100&&y>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&m>f&&w>0&&f<100&&y>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(ie(t),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),st(),n.styleCleanup=h=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const c=()=>{document.body.classList.remove("no-pointer-events--children")};h===!0?setTimeout(c,50):c()}),n.handler({evt:t,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:s,distance:{x:m,y:f}})):n.end(t)},end(t){n.event!==void 0&&(ue(n,"temp"),H.is.firefox===!0&&re(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),t!==void 0&&n.event.dir!==!1&&ie(t),n.event=void 0)}};if(e.__qtouchswipe=n,p.mouse===!0){const t=p.mouseCapture===!0||p.mousecapture===!0?"Capture":"";te(n,"main",[[e,"mousedown","mouseStart",`passive${t}`]])}H.has.touch===!0&&te(n,"main",[[e,"touchstart","touchStart",`passive${p.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const r=e.__qtouchswipe;r!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&r.end(),r.handler=a.value),r.direction=he(a.modifiers))},beforeUnmount(e){const a=e.__qtouchswipe;a!==void 0&&(ue(a,"main"),ue(a,"temp"),H.is.firefox===!0&&re(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchswipe)}});const mt={name:{required:!0},disable:Boolean},_e={setup(e,{slots:a}){return()=>x("div",{class:"q-panel scroll",role:"tabpanel"},O(a.default))}},ft={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},ht=["update:modelValue","beforeTransition","transition"];function gt(){const{props:e,emit:a,proxy:r}=Z(),{getCacheWithFn:p}=$e();let l,n;const t=Y(null),s=Y(null);function g(o){const u=e.vertical===!0?"up":"left";Q((r.$q.lang.rtl===!0?-1:1)*(o.direction===u?1:-1))}const w=v(()=>[[vt,g,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),m=v(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),d=v(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),f=v(()=>`--q-transition-duration: ${e.transitionDuration}ms`),y=v(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),q=v(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),h=v(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Se(()=>e.modelValue,(o,u)=>{const D=L(o)===!0?F(o):-1;n!==!0&&ee(D===-1?0:D<F(u)?-1:1),t.value!==D&&(t.value=D,a("beforeTransition",o,u),ze(()=>{a("transition",o,u)}))});function c(){Q(1)}function _(){Q(-1)}function V(o){a("update:modelValue",o)}function L(o){return o!=null&&o!==""}function F(o){return l.findIndex(u=>u.props.name===o&&u.props.disable!==""&&u.props.disable!==!0)}function le(){return l.filter(o=>o.props.disable!==""&&o.props.disable!==!0)}function ee(o){const u=o!==0&&e.animated===!0&&t.value!==-1?"q-transition--"+(o===-1?m.value:d.value):null;s.value!==u&&(s.value=u)}function Q(o,u=t.value){let D=u+o;for(;D>-1&&D<l.length;){const T=l[D];if(T!==void 0&&T.props.disable!==""&&T.props.disable!==!0){ee(o),n=!0,a("update:modelValue",T.props.name),setTimeout(()=>{n=!1});return}D+=o}e.infinite===!0&&l.length!==0&&u!==-1&&u!==l.length&&Q(o,o===-1?l.length:-1)}function N(){const o=F(e.modelValue);return t.value!==o&&(t.value=o),!0}function z(){const o=L(e.modelValue)===!0&&N()&&l[t.value];return e.keepAlive===!0?[x(xe,q.value,[x(h.value===!0?p(y.value,()=>({..._e,name:y.value})):_e,{key:y.value,style:f.value},()=>o)])]:[x("div",{class:"q-panel scroll",style:f.value,key:y.value,role:"tabpanel"},[o])]}function se(){if(l.length!==0)return e.animated===!0?[x(Pe,{name:s.value},z)]:z()}function oe(o){return l=Ge(O(o.default,[])).filter(u=>u.props!==null&&u.props.slot===void 0&&L(u.props.name)===!0),l.length}function I(){return l}return Object.assign(r,{next:c,previous:_,goTo:V}),{panelIndex:t,panelDirectives:w,updatePanelsList:oe,updatePanelIndex:N,getPanelContent:se,getEnabledPanels:le,getPanels:I,isValidPanelName:L,keepAliveProps:q,needsUniqueKeepAliveWrapper:h,goToPanelByOffset:Q,goToPanel:V,nextPanel:c,previousPanel:_}}function Re(e){return x("div",{class:"q-stepper__step-content"},[x("div",{class:"q-stepper__step-inner"},O(e.default))])}const be={setup(e,{slots:a}){return()=>Re(a)}};var ye=j({name:"QStep",props:{...mt,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:a,emit:r}){const{proxy:{$q:p}}=Z(),l=He(we,ce);if(l===ce)return console.error("QStep needs to be a child of QStepper"),ce;const{getCacheWithFn:n}=$e(),t=Y(null),s=v(()=>l.value.modelValue===e.name),g=v(()=>p.platform.is.ios!==!0&&p.platform.is.chrome===!0||s.value!==!0||l.value.vertical!==!0?{}:{onScroll(d){const{target:f}=d;f.scrollTop>0&&(f.scrollTop=0),e.onScroll!==void 0&&r("scroll",d)}}),w=v(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function m(){const d=l.value.vertical;return d===!0&&l.value.keepAlive===!0?x(xe,l.value.keepAliveProps.value,s.value===!0?[x(l.value.needsUniqueKeepAliveWrapper.value===!0?n(w.value,()=>({...be,name:w.value})):be,{key:w.value},a.default)]:void 0):d!==!0||s.value===!0?Re(a):void 0}return()=>x("div",{ref:t,class:"q-stepper__step",role:"tabpanel",...g.value},l.value.vertical===!0?[x(Be,{stepper:l.value,step:e,goToPanel:l.value.goToPanel}),l.value.animated===!0?x(dt,m):m()]:[m()])}}),_t=j({name:"QStepperNavigation",setup(e,{slots:a}){return()=>x("div",{class:"q-stepper__nav"},O(a.default))}});const bt=/(-\w)/g;function yt(e){const a={};for(const r in e){const p=r.replace(bt,l=>l[1].toUpperCase());a[p]=e[r]}return a}var St=j({name:"QStepper",props:{...Te,...ft,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:ht,setup(e,{slots:a}){const r=Z(),p=Ee(e,r.proxy.$q),{updatePanelsList:l,isValidPanelName:n,updatePanelIndex:t,getPanelContent:s,getPanels:g,panelDirectives:w,goToPanel:m,keepAliveProps:d,needsUniqueKeepAliveWrapper:f}=gt();Ye(we,v(()=>({goToPanel:m,keepAliveProps:d,needsUniqueKeepAliveWrapper:f,...e})));const y=v(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(p.value===!0?" q-stepper--dark q-dark":"")),q=v(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function h(){const c=O(a.message,[]);if(e.vertical===!0){n(e.modelValue)&&t();const _=x("div",{class:"q-stepper__content"},O(a.default));return c===void 0?[_]:c.concat(_)}return[x("div",{class:q.value},g().map(_=>{const V=yt(_.props);return x(Be,{key:V.name,stepper:e,step:V,goToPanel:m})})),c,Ze("div",{class:"q-stepper__content q-panel-parent"},s(),"cont",e.swipeable,()=>w.value)]}return()=>(l(a),x("div",{class:y.value},Xe(a.navigation,h())))}});const Pt={props:["reviewers"],name:"AssignReviewers",data(){return{step:1,selectedReviewers:[]}},methods:{next(){this.step==2?this.$emit("reviewers-selected",this.selectedReviewers):this.$refs.stepper.next()},selectReviewer(e){this.selectedReviewers.includes(e)?this.selectedReviewers=this.selectedReviewers.filter(a=>a!=e):this.selectedReviewers.push(e)}}},xt={style:{height:"500px"}},wt=["checked"];function kt(e,a,r,p,l,n){return b(),k("div",xt,[S(St,{modelValue:l.step,"onUpdate:modelValue":a[1]||(a[1]=t=>l.step=t),ref:"stepper",color:"primary",animated:""},{navigation:C(()=>[S(_t,{align:"right"},{default:C(()=>[l.step>1?(b(),R(W,{key:0,flat:"",color:"primary",onClick:a[0]||(a[0]=t=>e.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):K("",!0),S(W,{onClick:n.next,disabled:l.selectedReviewers.length==0,color:"primary",label:l.step===2?"Finish":"Continue"},null,8,["onClick","disabled","label"])]),_:1})]),default:C(()=>[S(ye,{name:1,title:"Select Reviewers",icon:"settings",done:l.step>1},{default:C(()=>[S(lt,{bordered:"",class:"",style:{width:"500px","max-height":"280px","overflow-y":"auto"}},{default:C(()=>[(b(!0),k(E,null,$(r.reviewers.filter(t=>t.is_active==!0),t=>(b(),R(nt,{onClick:s=>n.selectReviewer(t.id),clickable:"",active:l.selectedReviewers.includes(t.id),key:t.id},{default:C(()=>[i("input",{class:"q-ma-sm",type:"checkbox",checked:l.selectedReviewers.includes(t.id)},null,8,wt),S(at,null,{default:C(()=>[M(P(t.first_name)+" "+P(t.last_name)+" ("+P(t.email)+")",1)]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1},8,["done"]),S(ye,{name:2,title:"Invite Reviewers",icon:"create_new_folder",done:l.step>2},{default:C(()=>[i("p",null,[S(X,{name:"info",size:"md"}),M(" An email invitation will be sent to each of the selected reviewers ")]),S(qe,{class:"my-card",style:{width:"500px",height:"250px","overflow-y":"auto"},flat:"",bordered:""},{default:C(()=>[i("ul",null,[(b(!0),k(E,null,$(r.reviewers.filter(t=>l.selectedReviewers.includes(t.id)),t=>(b(),k("li",{key:t.id},[M(P(t.first_name)+" "+P(t.last_name)+" ("+P(t.email)+") ",1),i("ul",null,[(b(!0),k(E,null,$(t.profile.themes,s=>(b(),k("li",{key:s.id},P(s.theme_title),1))),128))])]))),128))])]),_:1})]),_:1},8,["done"])]),_:1},8,["modelValue"])])}var Ct=ae(Pt,[["render",kt]]);const qt={props:{proposals:{type:Array,default:()=>[]}},name:"ReviewerList",data(){return{formData:{theme:null,call:this.$dataStore.currentCall.id},themes:[],sections:[]}},created(){this.$q=rt(),this.getSections(),this.getThemes()},methods:{getSections(){this.$api.get("sections/").then(e=>{this.sections=e.data.filter(a=>a.max_score>0)})},getThemes(){this.$api.get("themes/").then(e=>{this.themes=e.data})},selectProposal(e,a){const r=e.target.checked;this.$api.patch(`proposals/${a}/`,{is_selected:r,status:"SELECTED"}).then(p=>{var l="Proposal added to selected proposals";r||(l="Proposal removed from selected proposals"),this.$q.notify(l)})}}},J=e=>(ke("data-v-76e8e9a3"),e=e(),Ce(),e),Vt=J(()=>i("th",{align:"left"},"Title",-1)),Dt=J(()=>i("th",{align:"center"},"Total",-1)),Tt=J(()=>i("th",{align:"center"},"Reviewer",-1)),Et=J(()=>i("th",{align:"center"},"Average Score",-1)),It=J(()=>i("th",{align:"left"},null,-1)),$t={key:0,class:"q-tr--no-hover text-center"},Bt=["rowspan"],Rt={class:"inner"},Nt=["onClick","checked"],At={class:"inner"},Qt=["rowspan"],Lt=["rowspan"],Ft={class:""},Ut={class:""};function Mt(e,a,r,p,l,n){const t=U("router-link");return b(),R(Ie,null,{default:C(()=>[S(De,{class:"q-ma-sm my-sticky-column-table","wrap-cells":"",flat:"",bordered:"",dense:""},{default:C(()=>[i("thead",null,[i("tr",null,[Vt,(b(!0),k(E,null,$(l.sections,s=>(b(),k("th",{key:s.id},P(s.title),1))),128)),Dt,Tt,Et,It])]),i("tbody",null,[(b(!0),k(E,null,$(r.proposals,s=>{var g,w,m,d,f;return b(),k(E,{key:s.id},[(g=s==null?void 0:s.scores)!=null&&g.length?(b(),k("tr",$t,[i("td",{rowspan:(w=s.scores)==null?void 0:w.length,class:"text-left"},[i("table",null,[i("tbody",null,[i("tr",null,[i("td",Rt,[i("input",{onClick:y=>n.selectProposal(y,s.id),type:"checkbox",checked:s.is_selected},null,8,Nt)]),i("td",At,[i("span",null,[S(t,{to:`/proposals/${s.id}`},{default:C(()=>[M(P(s.title)+" ("+P(s.status)+") ",1)]),_:2},1032,["to"])])])])])])],8,Bt),(b(!0),k(E,null,$(l.sections,y=>(b(),k("td",{key:y.id},P(s.scores[0][y.name]),1))),128)),i("td",null,P(s.scores[0].total_score),1),i("td",null,P(s.scores[0].user__first_name)+" "+P(s.scores[0].user__last_name)+" ("+P(s.scores[0].user__username)+") ("+P(s.scores[0].status)+") ",1),i("td",{rowspan:(m=s.scores)==null?void 0:m.length},P(s.average_score),9,Qt),i("td",{rowspan:(d=s.scores)==null?void 0:d.length},[S(t,{to:`/proposals/${s.id}`},{default:C(()=>[S(W,{color:"primary",icon:"remove_red_eye",flat:"",dense:""})]),_:2},1032,["to"])],8,Lt)])):K("",!0),(b(!0),k(E,null,$((f=s.scores)==null?void 0:f.slice(1),y=>(b(),k("tr",{class:"q-tr--no-hover text-center",key:y.id},[(b(!0),k(E,null,$(l.sections,q=>(b(),k("td",{class:"exclude",key:q.id},P(y[q.name]),1))),128)),i("td",Ft,"\xA0\xA0"+P(y.total_score),1),i("td",Ut," \xA0\xA0 "+P(y.user__first_name)+" "+P(y.user__last_name)+" ("+P(y.user__username)+") ("+P(y.status)+") ",1)]))),128))],64)}),128))])]),_:1})]),_:1})}var Wt=ae(qt,[["render",Mt],["__scopeId","data-v-76e8e9a3"]]);const Ot={name:"ReviewerList",data(){return{formData:{},formData2:{},popups:{},showPopup:!1,fields:[{type:"dateRange",label:"Submission Date",name:"submission_date",range_input_name:"submission_date_text",range_from_name:"submission_date__gte",range_to_name:"submission_date__lte"},{type:"select",label:"Select Theme",options:[],name:"theme"},{type:"select",label:"Status",options:[],name:"status"},{type:"select",label:"PI",options:[],name:"user"},{type:"text",label:"Search",name:"search_query"}]}},created(){this.getThemes(),this.getUsers(),this.getStatusOptions()},methods:{getStatusOptions(){this.fields.filter(e=>e.name=="status")[0].options=[{id:0,title:"None"},{id:"EDITING",title:"EDITING"},{id:"SUBMITTED",title:"SUBMITTED"},{id:"REVIEWING",title:"REVIEWING"},{id:"REVIEWED",title:"REVIEWED"},{id:"SELECTED",title:"SELECTED"}]},async getUsers(){const e=await this.$api.get("users/?groups__name__in=applicant");console.log(e.data);const a=e.data.map(r=>({id:r.id,title:`${r.first_name} ${r.last_name}`}));return this.fields.filter(r=>r.name=="user")[0].options=[{id:0,title:"None"}].concat(a),e.data},async getThemes(){const e=await this.$api.get("themes/");return this.fields.filter(a=>a.name=="theme")[0].options=[{id:0,title:"None"}].concat(e.data),e.data},setDateRange(e,a,r,p){var l,n,t,s;this.formData[r]=(l=this.formData2[e])==null?void 0:l.from,this.formData[p]=(n=this.formData2[e])==null?void 0:n.to,this.formData2[a]=`${((t=this.formData2[e])==null?void 0:t.from)||""} - ${((s=this.formData2[e])==null?void 0:s.to)||""}`,this.popups[e]=!1},filter(){console.log("filter",this.formData),this.$emit("filter",this.formData)}}},Kt={align:"right",class:"q-ma-xs row q-gutter-x-xs"},jt={key:2,flat:"",class:"no-wrap"};function zt(e,a,r,p,l,n){return b(),k("div",null,[i("div",Kt,[(b(!0),k(E,null,$(l.fields,t=>(b(),k("div",{class:"col",key:t},[t.type=="select"?(b(),R(ut,{key:0,modelValue:l.formData[t.name],"onUpdate:modelValue":[s=>l.formData[t.name]=s,a[0]||(a[0]=s=>n.filter())],dense:"",outlined:"",options:t.options,label:t.label,"option-value":"id","option-label":"title","map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue","options","label"])):t.type=="text"?(b(),R(de,{key:1,modelValue:l.formData[t.name],"onUpdate:modelValue":s=>l.formData[t.name]=s,label:t.label,outlined:"",onKeyup:a[1]||(a[1]=Je(s=>n.filter(),["enter"])),onBlur:a[2]||(a[2]=s=>n.filter()),dense:"",clearable:""},null,8,["modelValue","onUpdate:modelValue","label"])):t.type=="dateRange"?(b(),k("div",jt,[S(de,{modelValue:l.formData2[t.range_input_name],"onUpdate:modelValue":s=>l.formData2[t.range_input_name]=s,label:t.label,dense:"",outlined:"",readonly:""},{append:C(()=>[l.formData2[t.name]?(b(),R(X,{key:0,name:"close",onClick:s=>{l.formData2[t.name]=null,l.formData2[t.range_input_name]=null,n.setDateRange(t.name,t.range_input_name,t.range_from_name,t.range_to_name),n.filter()}},null,8,["onClick"])):K("",!0),S(X,{name:"event",class:"cursor-pointer q-my-xs",icon:"event",flat:"",dense:"",color:"primary"},{default:C(()=>[S(Ve,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:l.popups[t.name],"onUpdate:modelValue":s=>l.popups[t.name]=s},{default:C(()=>[S(ot,{onRangeEnd:s=>{n.setDateRange(t.name,t.range_input_name,t.range_from_name,t.range_to_name),n.filter()},modelValue:l.formData2[t.name],"onUpdate:modelValue":s=>l.formData2[t.name]=s,range:""},null,8,["onRangeEnd","modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","label"])])):K("",!0)]))),128))])])}var Gt=ae(Ot,[["render",zt]]);const Ht={components:{AssignReviewers2:Ct,FileUploader2:it,ProposalFilter:Gt,AssignedProposals:Wt},name:"ReviewerList",data(){return{show:!1,formData:{theme:null,exclude__status:"EDITING",call:this.$dataStore.currentCall.id,page:1,limit:10},proposals:[],scores:[],themes:[],selectedProposals:[],selectedProposal:null,allSelected:!1,maxPageCount:0,view:"proposals"}},created(){this.getProposals(this.formData),this.getThemes(),this.getReviewers()},methods:{getProposals(e){console.log("filerdata",e),this.$utilsStore.setLoading(!0),e.page=this.formData.page,e.limit=this.formData.limit,e.call=this.formData.call,e.exclude__status="EDITING",this.setView(e);let a="";e&&(a=this.$buildURLQuery(e)),this.$api.get(`proposals/?${a}`).then(r=>{this.proposals=r.data.results,this.page=r.data.page,this.maxPageCount=r.data.max_page,this.getProposalScores(),this.$utilsStore.setLoading(!1)})},getProposalScores(){for(let e=0;e<this.proposals.length;e++){const a=this.proposals[e];this.$api.get(`scores/?proposal=${a.id}`).then(r=>{this.proposals[e].scores=r.data})}},setView(e){(e==null?void 0:e.status)&&["REVIEWING","REVIEWED","SELECTED"].includes(e.status)?this.view="scores":this.view="proposals"},getThemes(){this.$api.get("themes/").then(e=>{this.themes=e.data})},getReviewers(){var e=this.$buildURLQuery({themes__in:this.formData.theme});this.$api.get(`users/?${e}&groups__name__in=reviewer`).then(a=>{this.reviewers=a.data})},createScores(e){this.$utilsStore.setLoading(!0);const a=e.length*this.selectedProposals.length;let r=0;for(let p=0;p<e.length;p++){const l=e[p],n=this.reviewers.find(t=>t.id==l).email;for(let t=0;t<this.selectedProposals.length;t++){const s=this.selectedProposals[t];this.$api.post("scores/",{proposal:s,email:n,user:l}).then(g=>{r+=1,g.status==201&&console.log("done >> "+l+", "+s),r==a&&(this.$utilsStore.setLoading(!1),this.getProposalScores())}).catch(g=>{r+=1,r==a&&(this.$utilsStore.setLoading(!1),this.getProposalScores())})}}},deleteScore(e){confirm("Are you sure you would like to delete this reviewer?")&&(this.$utilsStore.setLoading(!0),this.$api.delete(`scores/${e}/`).then(a=>{a.status==204&&(this.getProposalScores(),this.$utilsStore.setLoading(!1))}))},selectProposal(e){this.selectedProposals.includes(e)?this.selectedProposals=this.selectedProposals.filter(a=>a!=e):this.selectedProposals.push(e),this.selectedProposals.length==this.proposals.length&&(this.allSelected=!0)},selectProposal2(e){this.selectAllProposals=[],this.selectedProposals.push(e),this.selectedProposal=e,this.show=!0},selectAllProposals(e){e.target.checked?this.selectedProposals=this.proposals.map(a=>a.id):this.selectedProposals=[]},downloadTemplate(){this.$api.get("proposals/bulk-upload-sheet/download/").then(e=>{e.status==200&&window.open(e.data.file_url,"_blank")})}}},A=e=>(ke("data-v-036e3d0d"),e=e(),Ce(),e),Yt={class:"q-ma-md"},Xt={class:"q-ma-sm row items-center"},Zt={class:"flex border"},Jt=A(()=>i("label",{class:"row items-center q-pr-xs"},"Bulk Upload",-1)),en=A(()=>i("div",{class:"col"},null,-1)),tn={class:"col"},nn={key:0},an={align:"left"},ln=["checked"],sn=A(()=>i("th",{align:"left"},"Title",-1)),on=A(()=>i("th",{align:"left"},"Theme",-1)),rn=A(()=>i("th",{align:"left"},"Date Submitted",-1)),un=A(()=>i("th",{align:"left"},"PI",-1)),cn=A(()=>i("th",{align:"left"},"Status",-1)),dn=A(()=>i("th",{align:"left"},null,-1)),pn=["checked","onClick"],vn={class:"q-pa-sm flex flex-center"};function mn(e,a,r,p,l,n){const t=U("FileUploader2"),s=U("AssignReviewers2"),g=U("ProposalFilter"),w=U("router-link"),m=U("AssignedProposals");return b(),R(Ie,null,{default:C(()=>[i("div",Yt,[S(Ne,null,{default:C(()=>[S(ve,{icon:"home",to:"/",label:"Home"}),S(ve,{label:"Submitted Proposals",icon:"list"})]),_:1})]),S(Ae,{spaced:""}),i("div",Xt,[S(qe,{class:"my-card q-pa-xs",flat:"",bordered:""},{default:C(()=>[i("div",Zt,[Jt,S(W,{color:"primary",icon:"download",dense:"",flat:"",onClick:n.downloadTemplate,label:"template"},null,8,["onClick"]),S(t,{onFileUploaded:a[0]||(a[0]=d=>n.getProposals({})),uploadUrl:"/proposals/upload-bulk/",multiple:!1,formData:{}})])]),_:1}),en,i("div",tn,[i("div",null,[S(Ve,{modelValue:l.show,"onUpdate:modelValue":a[2]||(a[2]=d=>l.show=d),breakpoint:1e3},{default:C(()=>[S(s,{reviewers:e.reviewers,onReviewersSelected:a[1]||(a[1]=d=>{n.createScores(d),l.show=!1})},null,8,["reviewers"])]),_:1},8,["modelValue"])])])]),S(g,{onFilter:a[3]||(a[3]=d=>n.getProposals(d))}),l.view==="proposals"?(b(),k("div",nn,[S(De,{class:"q-ma-sm",separator:"cell",flat:"",bordered:""},{default:C(()=>[i("thead",null,[i("tr",null,[i("th",an,[i("input",{checked:l.allSelected,type:"checkbox",onClick:a[4]||(a[4]=d=>n.selectAllProposals(d))},null,8,ln)]),sn,on,rn,un,cn,dn])]),i("tbody",null,[(b(!0),k(E,null,$(l.proposals,d=>(b(),k("tr",{key:d.id},[i("td",null,[i("input",{checked:l.selectedProposals.includes(d.id),type:"checkbox",onClick:f=>n.selectProposal(d.id)},null,8,pn)]),i("td",null,[S(w,{to:`/proposals/${d.id}`},{default:C(()=>[M(P(d.title),1)]),_:2},1032,["to"])]),i("td",null,P(d.theme_title),1),i("td",null,P(d.submission_date),1),i("td",null,P(d.user__first_name)+" "+P(d.user__last_name),1),i("td",null,P(d.status),1),i("td",null,[S(W,{onClick:f=>n.selectProposal2(d.id),label:"Assign Reviewers",flat:"",color:"primary"},null,8,["onClick"]),(b(!0),k(E,null,$(d.scores,f=>(b(),R(et,{key:f.id},{default:C(()=>[M(P(f.user__first_name)+" "+P(f.user__last_name)+" ",1),S(X,{name:"close",color:"primary",onClick:y=>n.deleteScore(f.id),class:"cursor-pointer"},null,8,["onClick"])]),_:2},1024))),128))])]))),128))])]),_:1}),i("div",vn,[S(ct,{"direction-links":"",modelValue:l.formData.page,"onUpdate:modelValue":[a[5]||(a[5]=d=>l.formData.page=d),a[6]||(a[6]=d=>n.getProposals(l.formData))],max:l.maxPageCount},null,8,["modelValue","max"])])])):K("",!0),l.view==="scores"?(b(),R(m,{key:1,proposals:l.proposals},null,8,["proposals"])):K("",!0)]),_:1})}var Hn=ae(Ht,[["render",mn],["__scopeId","data-v-036e3d0d"]]);export{Hn as default};
