import{Q as v}from"./QToolbarTitle.b2035143.js";import{Q as P}from"./QCard.78b7c44d.js";import{P as S,T as x,B as y}from"./BudgetItems.ccab49b8.js";import b from"./ExpenseReports.a469faa6.js";import{p as k}from"./ProposalScoreSheets.24eec4d5.js";import{P as E}from"./ProposalReportsEditor.db8109c2.js";import{_ as B,r as i,o,j as n,F as T,k as q,i as a,f as s,w as d,t as R,e as A}from"./index.3671a223.js";import"./use-dark.dbbd0c9d.js";import"./QChip.05b39f31.js";import"./QMarkupTable.4c97a209.js";import"./QPopupProxy.b8fe0c28.js";import"./QDialog.8d8d8cb6.js";import"./use-prevent-scroll.53dc6540.js";import"./scroll.624406d4.js";import"./use-timeout.26584f0c.js";import"./QMenu.2c83730c.js";import"./focus-manager.b507780d.js";import"./use-transition.1d5f554b.js";import"./FileUploader2.120f1e55.js";import"./QCardSection.54f69d89.js";import"./QSeparator.f4e84234.js";import"./QItemLabel.8f35a27f.js";import"./QItem.41d22b85.js";import"./QList.ae152641.js";import"./QUploader.c38a58bd.js";import"./QCircularProgress.dc7b61af.js";import"./format.2bc25e5f.js";import"./use-file.e5919774.js";const M={components:{ProposalAttachments:S,TeamMembers:x,BudgetItems:y,ExpenseReports:b,ProposalScoreSheets:k,ProposalReportsEditor:E},data(){return{sections:[],proposal:{},score:null,content:`
      <p>
        Lorem ipsum dolor sit amet consectetur, adipisicing elit. Obcaecati
        natus animi, et itaque ea tempora, exercitationem nemo nobis eos quos
        corrupti quasi cupiditate recusandae magnam, quis dicta facere dolore
        blanditiis.
      </p>`,attachments:[]}},created(){this.getProposal(),this.getSections()},methods:{getProposal(){this.$api.get(`proposals/${this.$route.params.proposal_id}/`).then(t=>{this.proposal=t.data,this.$proposalStore.setProposal(this.proposal),this.getScore(),this.getAttachments()})},getAttachments(){this.$api.get("attachments/").then(t=>{this.attachments=t.data,this.getFiles()})},getFiles(){for(let t=0;t<this.attachments.length;t++){const r=this.attachments[t];this.$api.get(`files/?proposal_id=${this.$route.params.proposal_id}&attachment_id=${r.id}`).then(p=>{var c=p.data;this.attachments.filter(m=>m.id==r.id)[0].files=c})}},getScore(){var t,r;console.log(((t=this.$authStore.currentUser)==null?void 0:t.id)||0),this.$api.get(`scores/?user=${((r=this.$authStore.currentUser)==null?void 0:r.id)||0}&proposal=${this.$route.params.proposal_id}`).then(p=>{p.data.length==1&&(this.score=p.data[0])})},getSections(){this.$api.get("sections/").then(t=>{this.sections=t.data})}}},w=["id"],F={class:"q-pa-sm"},L={class:"flex"},Q={key:0},C={key:1},I={key:2},j=["innerHTML"],H=a("hr",null,null,-1),N=a("hr",{id:"solution",class:"section-separator"},null,-1);function U(t,r,p,c,m,V){const h=i("ProposalAttachments"),_=i("TeamMembers"),u=i("BudgetItems"),g=i("ProposalScoreSheets"),f=i("ExpenseReports"),$=i("ProposalReportsEditor");return o(),n("div",null,[(o(!0),n(T,null,q(m.sections,e=>(o(),n("div",{key:e.id},[a("hr",{id:e.name,class:"section-separator"},null,8,w),a("div",F,[s(v,{class:"flex justify-between"},{default:d(()=>[a("div",L,R(e.title),1)]),_:2},1024),e.name=="attachments"?(o(),n("div",Q,[s(h)])):e.name=="team"?(o(),n("div",C,[s(_)])):e.name=="summary_budget"?(o(),n("div",I,[s(u)])):(o(),A(P,{key:3,flat:"",bordered:"",class:"q-pa-sm"},{default:d(()=>{var l;return[a("div",null,[a("div",{style:{overflow:"auto","min-height":"5rem"},innerHTML:((l=m.proposal)==null?void 0:l[e.name])||""},null,8,j)])]}),_:2},1024))])]))),128)),H,s(g),s(f),s($),N])}var $t=B(M,[["render",U]]);export{$t as default};
