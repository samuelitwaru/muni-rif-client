import{Q as h,a as n}from"./QBreadcrumbs.1ab673fe.js";import{Q as d}from"./QSeparator.70cb9cc4.js";import{Q as f}from"./QCardSection.cb2f8249.js";import{Q as m}from"./QInput.01de1739.js";import{Q as g}from"./QDate.0c3a2ed0.js";import{Q as w}from"./QPopupProxy.265bdd00.js";import{_ as b,o as V,e as Q,w as l,i,f as a,h as p,t as c,l as D}from"./index.0c070ef5.js";import{Q as _}from"./QCard.63eb6402.js";import{Q as y}from"./QCardActions.e8d4b26a.js";import{Q as C}from"./QForm.83bb0512.js";import{Q as v}from"./QPage.4657c376.js";import"./use-dark.f75a96f1.js";import"./use-key-composition.b5f616a9.js";import"./use-split-attrs.9a899efb.js";import"./uid.42677368.js";import"./focus-manager.b507780d.js";import"./use-form.e5c6d76e.js";import"./format.2bc25e5f.js";import"./QDialog.6b58c502.js";import"./use-prevent-scroll.1187d5af.js";import"./scroll.10606e11.js";import"./use-timeout.e38298e7.js";import"./focusout.5b955b74.js";import"./use-transition.aac813e1.js";import"./QMenu.06d3a3b6.js";import"./selection.e8c2ee0a.js";const q={name:"CreateCall",data(){return{loading:!1,showDialog:!1,proxyDate:"2019/03/01",formData:{title:"",is_active:!1,date_range:{from:"",to:""},date_from:"",date_to:""},rules:{required:e=>!!e||"This field is required",dateRangeFrom:e=>!e||!this.formData.date_range.to||e<=this.formData.date_range.to||"Start date must be less than end date",dateRangeTo:e=>!e||!this.formData.date_range.from||e>=this.formData.date_range.from||"End date must be greater than start date",submissionDate:e=>{const t=this.formData.date_from.replace("/","-").replace("/","-");console.log(this.formData);const r=this.formData.review_date;return console.log(t,r,e),console.log(t,r,e),(!t||e>t)&&(!r||e<r)||"Submission date must be greater than start date and less than review date"},reviewDate:e=>{const{submission_date:t,selection_date:r}=this.formData;return(!t||e>t)&&(!r||e<r)||"Review date must be greater than submission date and less than selection date"},selectionDate:e=>{const{review_date:t,date_range:r}=this.formData;return(!t||e>t)&&(!r.to||e<r.to)||"Selection date must be greater than review date and less than the end date"}}}},created(){},methods:{createCall(){this.formData.date_from=this.formData.date_range.from.replaceAll("/","-"),this.formData.date_to=this.formData.date_range.to.replaceAll("/","-"),console.log(this.formData),this.$api.post("calls/",this.formData).then(e=>{window.location="/calls",this.$utilsStore.setLoading(!1),this.showDialog=!1})},setDateRange(){this.formData.date_from=this.formData.date_range.from,this.formData.date_to=this.formData.date_range.to},cancelCreate(){this.showDialog=!1},setFormData(){this.formData={title:"sd;d;wdw",is_active:!1,date_range:{from:"2025/04/01",to:"2025/04/30"},date_from:"2025-04-01",date_to:"2025-04-30",submission_date:"2025-04-08",review_date:"2025-04-16",selection_date:"2025-04-23"}}},watch:{showPopup(e,t){this.showDialog=e},showDialog(e,t){this.$emit("showPopupChanged",e)}}},x={class:"q-ma-md"},S=i("div",{class:"text-h6"},"New Call",-1),R=i("span",{class:"text-grey text-caption"},"From : ",-1),P=i("span",{class:"text-grey text-caption"},"To : ",-1);function A(e,t,r,B,o,u){return V(),Q(v,null,{default:l(()=>[i("div",x,[a(h,null,{default:l(()=>[a(n,{icon:"home",to:"/",label:"Home"}),a(n,{icon:"campaign",to:"/calls",label:"Calls"}),a(n,{label:"Create New Call",icon:"campaign"})]),_:1})]),a(d,{spaced:"",size:"0.5px"}),a(C,{onSubmit:u.createCall,class:"q-gutter-md flex justify-center"},{default:l(()=>[a(_,{style:{width:"500px"}},{default:l(()=>[a(f,null,{default:l(()=>[S]),_:1}),a(d),a(f,{class:"q-pt-lg q-pb-md"},{default:l(()=>[a(m,{modelValue:o.formData.title,"onUpdate:modelValue":t[0]||(t[0]=s=>o.formData.title=s),label:"Title of your call",outlined:"",required:"",rules:[o.rules.required]},null,8,["modelValue","rules"]),a(_,{flat:"",bordered:"",class:"flex items-center justify-between q-pa-sm q-mt-sm"},{default:l(()=>[i("div",null,[R,p(" "+c(e.$formatDate(o.formData.date_from)),1)]),i("div",null,[P,p(" "+c(e.$formatDate(o.formData.date_to)),1)]),a(D,{icon:"event",round:"",color:"primary"},{default:l(()=>[a(w,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:e.showPop,"onUpdate:modelValue":t[2]||(t[2]=s=>e.showPop=s)},{default:l(()=>[a(g,{onRangeEnd:u.setDateRange,modelValue:o.formData.date_range,"onUpdate:modelValue":t[1]||(t[1]=s=>o.formData.date_range=s),range:""},null,8,["onRangeEnd","modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(m,{class:"q-my-sm",modelValue:o.formData.submission_date,"onUpdate:modelValue":t[3]||(t[3]=s=>o.formData.submission_date=s),type:"date",label:"Applications Submission Deadline?",outlined:"",rules:[o.rules.submissionDate]},null,8,["modelValue","rules"]),a(m,{class:"q-my-sm",modelValue:o.formData.review_date,"onUpdate:modelValue":t[4]||(t[4]=s=>o.formData.review_date=s),type:"date",label:"Applications Review Deadline?",outlined:"",rules:[o.rules.reviewDate]},null,8,["modelValue","rules"]),a(m,{class:"q-my-sm",modelValue:o.formData.selection_date,"onUpdate:modelValue":t[5]||(t[5]=s=>o.formData.selection_date=s),type:"date",label:"Applications Selection Deadline?",outlined:"",rules:[o.rules.selectionDate]},null,8,["modelValue","rules"])]),_:1}),a(d,{spaced:""}),a(y,{align:"right"},{default:l(()=>[a(D,{type:"submit",color:"primary",label:"Create"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}var se=b(q,[["render",A]]);export{se as default};
