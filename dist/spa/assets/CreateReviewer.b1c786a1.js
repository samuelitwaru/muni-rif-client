import{Q as V,a as u}from"./QBreadcrumbs.a764f39b.js";import{Q as q}from"./QSeparator.13d6beeb.js";import{Q as r}from"./QInput.02622759.js";import{Q as d}from"./QSelect.988be1bd.js";import{Q}from"./QChip.19e4d28f.js";import{Q as h}from"./QCardSection.1db827b1.js";import{Q as y,a as R}from"./QItem.c0795fab.js";import{Q as C}from"./QList.521c8a93.js";import{Q as f}from"./QCard.f9e0a707.js";import{Q as x}from"./QPopupProxy.768ca227.js";import{_ as k,aV as T,r as F,o as n,e as p,w as i,i as a,f as o,p as P,j as _,F as g,k as v,l as D,h as S,t as U}from"./index.e39be684.js";import{Q as B}from"./QForm.bfc6ae96.js";import{Q as N}from"./QPage.987cc192.js";import"./use-dark.54601180.js";import"./use-key-composition.de72c202.js";import"./use-split-attrs.ff5e55ff.js";import"./uid.42677368.js";import"./focus-manager.b507780d.js";import"./use-form.dc1a9363.js";import"./QItemLabel.aff81a70.js";import"./QMenu.fcff140d.js";import"./use-timeout.65a9f0b9.js";import"./use-transition.c0c5474a.js";import"./scroll.eaa460d0.js";import"./QDialog.f5d6fd89.js";import"./use-prevent-scroll.92142e4c.js";import"./format.2bc25e5f.js";const L={name:"CreateReviewer",data(){return{loading:!1,showDialog:!1,faculties:[],qualifications:[],themes:[],formData:{email:"",first_name:"",last_name:"",phone:"",gender:"",designation:"",faculty:null,department:null,qualification:null,password:"",themes:[]},emailRules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],nameRules:[e=>!!e||"Field is required"],phoneRules:[e=>!!e||"Telephone number is required",e=>/^[0-9]{10}$/.test(e)||"Telephone number must be 10 digits"],passwordRules:[e=>!!e||"Password is required",e=>e.length>=8||"Password must be at least 8 characters long"],confirmPasswordRules:[e=>!!e||"Confirm Password is required",e=>e===this.formData.password||"Passwords do not match"]}},created(){this.getFaculties(),this.getQualifications(),this.getThemes()},methods:{createReviewer(){this.formData.username=this.formData.email,this.formData.is_active=!1,this.formData.password=T(10),this.$utilsStore.setLoading(!0),console.log(this.formData),this.$api.post("users/create-reviewer/",this.formData).then(e=>{this.$router.push("/reviewers/"),this.$utilsStore.setLoading(!1)}).catch(e=>{this.$utilsStore.setLoading(!1)})},getThemes(){this.$api.get("themes/").then(e=>{this.themes=e.data})},getFaculties(){this.$api.get("faculties/").then(e=>{this.faculties=e.data})},getQualifications(){this.$api.get("qualifications/").then(e=>{this.qualifications=e.data})},selectTheme(e){this.formData.themes.includes(e)?this.formData.themes.filter(s=>s!=e):this.formData.themes.push(e)},deselectTheme(e){this.formData.themes.includes(e)&&(this.formData.themes=this.formData.themes.filter(s=>s!=e))},cancelCreate(){this.showDialog=!1},setFormData(){this.formData={email:"",first_name:"",last_name:"",phone:"",gender:"",designation:"",faculty:null,department:null,qualification:null,password:"",themes:[]}}},watch:{showPopup(e,s){this.showDialog=e},showDialog(e,s){this.$emit("showPopupChanged",e)}}},E={class:"q-ma-md"},j={class:"flex justify-center"},z={class:"q-pa-md"},M={class:"row q-col-gutter-xs q-my-sm"},G={class:"col"},H={class:"col"},I={class:"row q-col-gutter-xs q-my-sm"},Y={class:"col"},A={class:"col"},J={class:"row q-col-gutter-xs q-my-sm"},K={class:"col"},O={class:"col"},W={class:"row q-col-gutter-xs"},X={class:"col"},Z={class:"col"},$={class:"q-my-sm"},ee=a("label",{for:""},"Themes",-1),te=a("div",{class:"text-h6"},"Select Themes",-1),le={class:"q-pa-md",align:"center"};function se(e,s,oe,ae,l,m){const b=F("radio-field");return n(),p(N,null,{default:i(()=>[a("div",E,[o(V,null,{default:i(()=>[o(u,{icon:"home",to:"/",label:"Home"}),o(u,{icon:"people",to:"/reviewers",label:"Reviewers"}),o(u,{label:"Create New Reviewer",icon:"person"})]),_:1})]),o(q,{spaced:"",size:"0.5px"}),a("div",j,[o(f,{class:"my-card"},{default:i(()=>[o(B,{class:"q-gutter-md"},{default:i(()=>{var c;return[a("div",z,[a("div",M,[a("div",G,[o(r,{outlined:"",dense:"",modelValue:l.formData.first_name,"onUpdate:modelValue":s[0]||(s[0]=t=>l.formData.first_name=t),label:"First Name",rules:l.nameRules,required:""},null,8,["modelValue","rules"])]),a("div",H,[o(r,{outlined:"",dense:"",modelValue:l.formData.last_name,"onUpdate:modelValue":s[1]||(s[1]=t=>l.formData.last_name=t),label:"Last Name",rules:l.nameRules,required:""},null,8,["modelValue","rules"])])]),a("div",I,[a("div",Y,[o(r,{outlined:"",dense:"",modelValue:l.formData.email,"onUpdate:modelValue":s[2]||(s[2]=t=>l.formData.email=t),label:"Email",type:"email",rules:l.emailRules,required:""},null,8,["modelValue","rules"])]),a("div",A,[o(r,{outlined:"",dense:"",modelValue:l.formData.phone,"onUpdate:modelValue":s[3]||(s[3]=t=>l.formData.phone=t),label:"Telephone Number",type:"tel",rules:l.phoneRules,required:""},null,8,["modelValue","rules"])])]),o(b,{align:"left",label:"Gender",onInput:s[4]||(s[4]=t=>l.formData.gender=t),modelValue:l.formData.gender,"onUpdate:modelValue":s[5]||(s[5]=t=>l.formData.gender=t),options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"}]},null,8,["modelValue"]),a("div",J,[a("div",K,[o(d,{outlined:"",dense:"",modelValue:l.formData.faculty,"onUpdate:modelValue":s[6]||(s[6]=t=>l.formData.faculty=t),options:l.faculties,"option-value":"id","option-label":"name",label:"Faculty","emit-value":"","map-options":""},null,8,["modelValue","options"])]),a("div",O,[o(d,{outlined:"",dense:"",modelValue:l.formData.department,"onUpdate:modelValue":s[7]||(s[7]=t=>l.formData.department=t),options:(c=this.faculties.find(t=>t.id===this.formData.faculty))==null?void 0:c.departments,"option-value":"id","option-label":"name",label:"Department","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),a("div",W,[a("div",X,[o(d,{dense:"",outlined:"",modelValue:l.formData.qualification,"onUpdate:modelValue":s[8]||(s[8]=t=>l.formData.qualification=t),options:l.qualifications,label:"Qualification","option-value":"id","option-label":"name","map-options":"","emit-value":""},null,8,["modelValue","options"])]),a("div",Z,[o(r,{outlined:"",dense:"",modelValue:l.formData.designation,"onUpdate:modelValue":s[9]||(s[9]=t=>l.formData.designation=t),label:"Your Designation",rules:l.nameRules,required:""},null,8,["modelValue","rules"])])]),a("div",$,[ee,o(f,{class:"row",flat:"",bordered:"",style:{"min-height":"4rem"}},{default:i(()=>[a("div",{class:P(["col-10 flex content-center",{"truncate-chip-labels":e.truncate}]),style:{"max-width":"400px"}},[(n(!0),_(g,null,v(l.themes.filter(t=>l.formData.themes.includes(t.id)),t=>(n(),p(Q,{key:t.id,class:"glossy",label:t.title,removable:"",onRemove:w=>m.deselectTheme(t.id)},null,8,["label","onRemove"]))),128))],2),o(D,{class:"col-2",color:"primary",flat:"",icon:"add"},{default:i(()=>[o(x,{cover:"",breakpoint:1e3},{default:i(()=>[o(f,{class:"my-card"},{default:i(()=>[o(h,null,{default:i(()=>[te]),_:1}),o(h,null,{default:i(()=>[o(C,{bordered:"",separator:""},{default:i(()=>[(n(!0),_(g,null,v(l.themes.filter(t=>!l.formData.themes.includes(t.id)),t=>(n(),p(y,{style:{cursor:"pointer"},clickable:"",onClick:w=>m.selectTheme(t.id),key:t.id},{default:i(()=>[o(R,null,{default:i(()=>[S(U(t.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),a("div",le,[o(D,{color:"primary",label:"Confirm",onClick:m.createReviewer},null,8,["onClick"])])]}),_:1})]),_:1})])]),_:1})}var Se=k(L,[["render",se]]);export{Se as default};
