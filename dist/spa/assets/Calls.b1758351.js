import{Q as g,a as f}from"./QBreadcrumbs.ff1c7fef.js";import{Q as C}from"./QSeparator.0d3a48de.js";import{_ as y,r as v,o as u,e as k,w as o,i as t,f as e,l as n,t as r,Q,j as h,F as b,k as x,v as I,aM as S,aN as $}from"./index.7c80a85e.js";import{Q as B}from"./QMarkupTable.1c03fdf4.js";import{Q as w}from"./QPage.243a6ccc.js";import{a as A}from"./api.4036ffbf.js";import"./use-dark.5324e533.js";import"./axios.ade9c8fd.js";const E={name:"DataTable",data(){return{items:[],currentCall:{},entity:{}}},created(){this.init()},methods:{init(){this.getEntity()},async getEntity(){const l=await this.$api.get("entities/");this.entity=l.data[0],this.$dataStore.setEntity(this.entity),console.log("entity",this.entity),A().then(a=>{console.log("calls",a),this.items=a,this.currentCall=this.items.find(c=>c.id==this.entity.current_call),this.items=this.items.filter(c=>c.id!=this.entity.current_call),console.log("store",this.currentCall),this.$dataStore.setCall(this.currentCall)})},editItem(l){console.log("Edit item:",l)},setAsActiveCall(l){this.$utilsStore.setLoading(!0),this.$api.get(`/calls/${l}/set-as-active`).then(a=>{a.status==200&&(this.init(),this.$utilsStore.setLoading(!1))})},deleteItem(l){confirm("Delete this call?")&&this.$api.delete(`calls/${l}`).then(a=>{a.status==204&&(window.location="/calls")})}}},p=l=>(S("data-v-39217102"),l=l(),$(),l),q={class:"q-ma-md"},D={align:"right",class:"q-ma-sm"},N=p(()=>t("thead",null,[t("tr",null,[t("th",{align:"left"},"Title"),t("th",{align:"left"},"Date From"),t("th",{align:"left"},"Date To"),t("th",{align:"center"},"Active"),t("th",{align:"left"},"Actions")])],-1)),F={align:"left"},T={align:"left"},L={align:"left"},V={align:"center"},M={align:"left"},j={align:"center"},z={key:0},H=p(()=>t("p",{class:"text-center q-py-xl q-my-xl text-h3 text-grey"}," No Calls Found! ",-1)),P={class:"text-center"};function G(l,a,c,J,s,d){const _=v("router-link");return u(),k(w,null,{default:o(()=>[t("div",q,[e(g,null,{default:o(()=>[e(f,{icon:"home",to:"/",label:"Home"}),e(f,{label:"Calls",icon:"campaign"})]),_:1})]),e(C,{spaced:""}),t("div",D,[e(_,{to:"/calls/create"},{default:o(()=>[e(n,{color:"primary",outline:"",label:"add call"})]),_:1})]),e(B,{class:"q-ma-sm",flat:"",bordered:""},{default:o(()=>[N,t("tbody",null,[t("tr",null,[t("th",F,r(s.currentCall.title),1),t("th",T,r(s.currentCall.date_from),1),t("th",L,r(s.currentCall.date_to),1),t("th",V,[e(Q,{name:"check_circle_outline",size:"lg",color:"green"})]),t("th",M,[e(_,{to:`/calls/${s.currentCall.id}`},{default:o(()=>[e(n,{icon:"edit",flat:"",color:"primary",onClick:a[0]||(a[0]=i=>d.editItem(s.currentCall))})]),_:1},8,["to"])])]),(u(!0),h(b,null,x(s.items,i=>(u(),h("tr",{key:i.id},[t("td",null,r(i.title),1),t("td",null,r(i.date_from),1),t("td",null,r(i.date_to),1),t("td",j,[e(n,{color:"primary",dense:"",outline:"",label:"set as active",onClick:m=>d.setAsActiveCall(i.id)},null,8,["onClick"])]),t("td",null,[e(_,{to:`/calls/${i.id}`},{default:o(()=>[e(n,{icon:"edit",flat:"",color:"primary",onClick:m=>d.editItem(i)},null,8,["onClick"])]),_:2},1032,["to"]),e(n,{icon:"delete",flat:"",color:"negative",onClick:m=>d.deleteItem(i.id)},null,8,["onClick"])])]))),128))])]),_:1}),s.items.length==0?(u(),h("div",z,[H,t("div",P,[e(_,{to:"/calls/create"},{default:o(()=>[e(n,{color:"primary",outline:"",label:"add call"})]),_:1})])])):I("",!0)]),_:1})}var tt=y(E,[["render",G],["__scopeId","data-v-39217102"]]);export{tt as default};
