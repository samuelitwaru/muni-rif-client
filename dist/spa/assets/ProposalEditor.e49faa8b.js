import{Q as g}from"./QToolbarTitle.82efc48c.js";import{Q as f}from"./QCard.d7aae94d.js";import{P as $,T as v,B as y}from"./BudgetItems.9c6c525b.js";import{_ as b,r as l,o as s,j as o,F as k,k as x,i,f as c,w as d,t as P,e as B}from"./index.d46529e0.js";import"./use-dark.dbcb9d7c.js";import"./QChip.ec3eabac.js";import"./QMarkupTable.ba4ac17a.js";const S={components:{ProposalAttachments:$,TeamMembers:v,BudgetItems:y},data(){return{sections:[],proposal:{},score:null,content:`
      <p>
        Lorem ipsum dolor sit amet consectetur, adipisicing elit. Obcaecati
        natus animi, et itaque ea tempora, exercitationem nemo nobis eos quos
        corrupti quasi cupiditate recusandae magnam, quis dicta facere dolore
        blanditiis.
      </p>`,attachments:[]}},created(){this.getProposal(),this.getSections()},methods:{getProposal(){this.$api.get(`proposals/${this.$route.params.proposal_id}/`).then(t=>{this.proposal=t.data,this.$proposalStore.setProposal(this.proposal),this.getScore(),this.getAttachments()})},getAttachments(){this.$api.get("attachments/").then(t=>{this.attachments=t.data,this.getFiles()})},getFiles(){for(let t=0;t<this.attachments.length;t++){const a=this.attachments[t];this.$api.get(`files/?proposal_id=${this.$route.params.proposal_id}&attachment_id=${a.id}`).then(r=>{var p=r.data;this.attachments.filter(n=>n.id==a.id)[0].files=p})}},getScore(){var t,a;console.log(((t=this.$authStore.currentUser)==null?void 0:t.id)||0),this.$api.get(`scores/?user=${((a=this.$authStore.currentUser)==null?void 0:a.id)||0}&proposal=${this.$route.params.proposal_id}`).then(r=>{r.data.length==1&&(this.score=r.data[0])})},getSections(){this.$api.get("sections/").then(t=>{this.sections=t.data})}}},T=["id"],q={class:"q-pa-sm"},A={class:"flex"},M={key:0},w={key:1},F={key:2},L=["innerHTML"],Q=i("hr",{id:"solution",class:"section-separator"},null,-1);function C(t,a,r,p,n,E){const h=l("ProposalAttachments"),_=l("TeamMembers"),u=l("BudgetItems");return s(),o("div",null,[(s(!0),o(k,null,x(n.sections,e=>(s(),o("div",{key:e.id},[i("hr",{id:e.name,class:"section-separator"},null,8,T),i("div",q,[c(g,{class:"flex justify-between"},{default:d(()=>[i("div",A,P(e.title),1)]),_:2},1024),e.name=="attachments"?(s(),o("div",M,[c(h)])):e.name=="team"?(s(),o("div",w,[c(_)])):e.name=="summary_budget"?(s(),o("div",F,[c(u)])):(s(),B(f,{key:3,flat:"",bordered:"",class:"q-pa-sm"},{default:d(()=>{var m;return[i("div",null,[i("div",{style:{overflow:"auto","min-height":"5rem"},innerHTML:((m=n.proposal)==null?void 0:m[e.name])||""},null,8,L)])]}),_:2},1024))])]))),128)),Q])}var O=b(S,[["render",C]]);export{O as default};
