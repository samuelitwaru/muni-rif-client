import{ax as f,s as v,ay as D,aa as F,p as O,az as Q,aA as T,aB as _,N as G,y as K,O as L,aj as $,D as I,aw as b,T as M}from"./index.d46529e0.js";import{r as w,b as j}from"./focus-manager.b507780d.js";const c=[];function W(e){return c.find(n=>n.contentEl!==null&&n.contentEl.contains(e))}function q(e,n){do{if(e.$options.name==="QMenu"){if(e.hide(n),e.$props.separateClosePopup===!0)return f(e)}else if(e.__qPortal===!0){const t=f(e);return t!==void 0&&t.$options.name==="QPopupProxy"?(e.hide(n),t):e}e=f(e)}while(e!=null)}function z(e,n,t){for(;t!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(t--,e.$options.name==="QMenu"){e=q(e,n);continue}e.hide(n)}e=f(e)}}function y(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function H(e,n,t,l){const u=v(!1),r=v(!1);let s=null;const d={},g=l==="dialog"&&y(e);function E(p){if(p===!0){w(d),r.value=!0;return}r.value=!1,u.value===!1&&(g===!1&&s===null&&(s=T(!1,l)),u.value=!0,c.push(e.proxy),j(d))}function h(p){if(r.value=!1,p!==!0)return;w(d),u.value=!1;const P=c.indexOf(e.proxy);P!==-1&&c.splice(P,1),s!==null&&(_(s),s=null)}return D(()=>{h(!0)}),e.proxy.__qPortal=!0,F(e.proxy,"contentEl",()=>n.value),{showPortal:E,hidePortal:h,portalIsActive:u,portalIsAccessible:r,renderPortal:()=>g===!0?t():u.value===!0?[O(Q,{to:s},t())]:void 0}}function J(){let e;const n=I();function t(){e=void 0}return G(t),K(t),{removeTick:t,registerTick(l){e=l,L(()=>{e===l&&($(n)===!1&&e(),e=void 0)})}}}const o=[];let i;function A(e){i=e.keyCode===27}function B(){i===!0&&(i=!1)}function C(e){i===!0&&(i=!1,M(e,27)===!0&&o[o.length-1](e))}function m(e){window[e]("keydown",A),window[e]("blur",B),window[e]("keyup",C),i=!1}function R(e){b.is.desktop===!0&&(o.push(e),o.length===1&&m("addEventListener"))}function S(e){const n=o.indexOf(e);n>-1&&(o.splice(n,1),o.length===0&&m("removeEventListener"))}const a=[];function k(e){a[a.length-1](e)}function V(e){b.is.desktop===!0&&(a.push(e),a.length===1&&document.body.addEventListener("focusin",k))}function X(e){const n=a.indexOf(e);n>-1&&(a.splice(n,1),a.length===0&&document.body.removeEventListener("focusin",k))}export{H as a,S as b,z as c,V as d,R as e,q as f,W as g,c as p,X as r,J as u};
