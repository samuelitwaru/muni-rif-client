import{Q as d}from"./QToolbarTitle.bd27c268.js";import{_ as k,o as l,j as i,i as a,f as o,w as s,h as u,Q as c,t as r,F as _,k as f,e as h,l as Q,n as $,g as b}from"./index.e39be684.js";import{Q as y}from"./QMarkupTable.c371dead.js";import{Q as v}from"./QSeparator.13d6beeb.js";import{Q as S}from"./QItemLabel.aff81a70.js";import{Q as C,a as q}from"./QItem.c0795fab.js";import{Q as D}from"./QList.521c8a93.js";import{Q as T}from"./QBtnDropdown.85fcf977.js";import{Q as w}from"./QInput.02622759.js";import{Q as L}from"./QCard.f9e0a707.js";import{C as M}from"./ClosePopup.3f3723a2.js";import"./use-dark.54601180.js";import"./QBtnGroup.223e6e8a.js";import"./QMenu.fcff140d.js";import"./use-timeout.65a9f0b9.js";import"./focus-manager.b507780d.js";import"./use-transition.c0c5474a.js";import"./scroll.eaa460d0.js";import"./uid.42677368.js";import"./use-key-composition.de72c202.js";import"./use-split-attrs.ff5e55ff.js";import"./use-form.dc1a9363.js";const V={data(){return{team:[],applicants:[],loading:!1,formData:{user:null,email:null,proposal:this.$route.params.proposal_id}}},created(){this.getTeam(),this.getApplicants()},methods:{getTeam(){this.$api.get(`proposals/${this.$route.params.proposal_id}/team`).then(e=>{this.team=e.data})},getApplicants(){this.$api.get("users/?groups__name__in=applicant").then(e=>{this.applicants=e.data})},addMember(){this.$utilsStore.setLoading(!0),this.$api.post(`proposals/${this.$route.params.proposal_id}/team/add/`,this.formData).then(e=>{this.team=e.data,this.$utilsStore.setLoading(!1),window.location.reload()})},removeMember(e){confirm("Are you sure you would like to member this member?")&&(this.$utilsStore.setLoading(!0),this.$api.post(`proposals/${this.$route.params.proposal_id}/team/remove/`,{user:e}).then(m=>{this.team=m.data,this.$utilsStore.setLoading(!1)}))}}},A={class:"q-pa-sm"},B={class:"text-left q-my-auto"},P={class:"q-pa-sm",for:""},I=a("td",{class:"text-right"},null,-1),N={class:"text-left q-my-auto"},U={class:"q-pa-sm",for:""},x={class:"text-right"},E={key:0},z={class:"row"},F={class:"col-6 q-pa-sm"},j={class:"col-4 q-pa-sm"},G={class:"col-2 q-pa-sm"};function H(e,m,J,K,n,p){return l(),i("div",null,[a("div",A,[o(d,null,{default:s(()=>[u("Team")]),_:1}),o(y,{flat:"",bordered:""},{default:s(()=>[a("tbody",null,[a("tr",null,[a("td",B,[o(c,{size:"sm",name:"person"}),a("label",P,r(e.$proposalStore.currentProposal.user__first_name)+" "+r(e.$proposalStore.currentProposal.user__last_name),1)]),I]),(l(!0),i(_,null,f(n.team,t=>(l(),i("tr",{key:t.id},[a("td",N,[o(c,{size:"sm",name:"person"}),a("label",U,r(t.first_name)+" "+r(t.last_name)+" ["+r(t.email)+"] ",1)]),a("td",x,[e.$authStore.currentUser.id==e.$proposalStore.currentProposal.user?(l(),h(Q,{key:0,color:"primary",flat:"",dense:"",icon:"close",onClick:g=>p.removeMember(t.id)},null,8,["onClick"])):$("",!0)])]))),128))])]),_:1}),e.$authStore.currentUser.id==e.$proposalStore.currentProposal.user?(l(),i("div",E,[o(v,{spaced:""}),o(d,null,{default:s(()=>[u("Add Team Member")]),_:1}),o(L,{flat:"",bordered:"",class:"my-card q-my-sm"},{default:s(()=>[a("div",z,[a("div",F,[o(T,{flat:"",class:"q-mx-sm",label:"Select Member",color:"primary"},{default:s(()=>[o(D,null,{default:s(()=>[(l(!0),i(_,null,f(n.applicants.filter(t=>t.id!=e.$authStore.currentUser.id),t=>b((l(),h(C,{key:t.id,clickable:"",onClick:g=>{this.formData.email=t.email,this.formData.user=t.id}},{default:s(()=>[o(q,null,{default:s(()=>[o(S,null,{default:s(()=>[a("div",null,r(t.first_name)+" "+r(t.last_name)+" ["+r(t.email)+"] ",1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[M]])),128))]),_:1})]),_:1})]),a("div",j,[o(w,{outlined:"",dense:"",modelValue:n.formData.email,"onUpdate:modelValue":m[0]||(m[0]=t=>n.formData.email=t),type:"email",label:"Enter Email Address"},null,8,["modelValue"])]),a("div",G,[o(Q,{color:"primary",label:"Add",onClick:p.addMember},null,8,["onClick"])])])]),_:1})])):$("",!0)])])}var ht=k(V,[["render",H]]);export{ht as default};
