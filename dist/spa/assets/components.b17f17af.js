import{Q as B,a as V}from"./QItem.d2d6991a.js";import{Q as U}from"./QCard.be6f1227.js";import{Q as se}from"./QList.f16661b5.js";import{_ as $,r as z,o as d,e as y,w as s,f as l,g as F,h as v,i as n,R as j,j as h,Q,F as P,k as E,l as k,t as _,m as xe,n as f,p as q,q as xt,s as Y,u as Qe,v as T,x as $t,y as je,z as Ct,A as Dt,B as ye,C as qt,D as $e,E as me,G as Vt,H as Pt,I as ke,J as Tt,K as Et,L as Mt,M as It,N as Lt,O as Ae}from"./index.f337fba3.js";import{Q as D}from"./QCardSection.fe503a8b.js";import{Q as Rt}from"./QPage.7c60fe9d.js";import{Q as we}from"./QItemLabel.7bea3d83.js";import{Q as Ut}from"./QBtnDropdown.80114b33.js";import{C as At}from"./ClosePopup.090a0f71.js";import{Q as R}from"./QSeparator.6c6f2516.js";import{Q as pe}from"./QChip.3c79b892.js";import{Q as re}from"./QCardActions.9c4529aa.js";import{Q as J}from"./QDialog.f0613908.js";import{Q as K}from"./QInput.ab16fab6.js";import{Q as ae}from"./QSelect.99a4094b.js";import{Q as Ce}from"./QForm.db230c97.js";import Bt from"./ChangePassword.877b8a61.js";import{g as Ft}from"./api.6aa31d0d.js";import{Q as Ot}from"./QUploader.5570293a.js";import{Q as ne}from"./QMarkupTable.6b8f96f3.js";import{c as ze}from"./index.5ce110aa.js";import{Q as Nt}from"./QEditor.438bc377.js";import{u as Qt,a as jt,b as zt}from"./use-form.e7940d77.js";import{T as Wt}from"./TouchPan.692d7062.js";import{u as We,a as Ge}from"./use-dark.1793b84e.js";import{b as oe}from"./format.3e32b8d9.js";import{Q as Se}from"./QRadio.3f981232.js";import{Q as Gt}from"./QToolbarTitle.42ac391f.js";import{Q as Ht}from"./QPopupProxy.46dd6502.js";import{Q as Kt}from"./QSpinnerIos.0beecd2b.js";import"./QBtnGroup.88d9ef78.js";import"./QMenu.6c1f0454.js";import"./selection.7f679905.js";import"./use-timeout.d7fa171a.js";import"./focusout.1add3e24.js";import"./focus-manager.b507780d.js";import"./use-transition.41dca9ee.js";import"./scroll.e1bc6034.js";import"./uid.42677368.js";import"./use-prevent-scroll.cbde5022.js";import"./use-key-composition.89769990.js";import"./use-split-attrs.26446f80.js";import"./axios.68c0a364.js";import"./QCircularProgress.a5385098.js";import"./use-file.4eb8e7ad.js";import"./touch.3df10340.js";import"./option-sizes.ab98efd6.js";const Yt={},Jt=n("h2",{class:"text-h6 q-px-md"},"Developer Menu",-1);function Xt(e,o,r,m,t,i){const a=z("router-link");return d(),y(se,{bordered:"",separator:""},{default:s(()=>[Jt,l(U,null,{default:s(()=>[l(a,{to:"/account/signup"},{default:s(()=>[F((d(),y(B,null,{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("Signup")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/signin"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("Signin")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/password-reset"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("Forgort Password")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("Account details")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/grant/create"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("New Grant Application")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/proposals/create"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[v("Proposal")]),_:1})]),_:1})),[[j]])]),_:1})]),_:1})]),_:1})}var Zt=$(Yt,[["render",Xt]]);const eo={},to=n("h2",{class:"text-h6 q-px-md"},"Developer Menu",-1),oo={class:"row q-ma-xs"},lo={class:"col"},ao={class:"col q-my-auto",align:"center"},so={class:"flex q-pa-sm"};function ro(e,o,r,m,t,i){const a=z("router-link"),u=z("create-proposal-dialog"),p=z("user-logout");return d(),h("div",null,[to,n("div",oo,[n("div",lo,[l(se,null,{default:s(()=>[l(a,{to:"/account/signup"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Signup")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/signin"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Sign in")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/password-reset"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Forgot Password")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/profile"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Profile")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/account/password"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Change Password")]),_:1})]),_:1})),[[j]])]),_:1}),l(a,{to:"/proposals"},{default:s(()=>[F((d(),y(B,{clickable:""},{default:s(()=>[l(V,{avatar:""},{default:s(()=>[l(Q,{color:"primary",name:"arrow_forward"})]),_:1}),l(V,null,{default:s(()=>[v("Proposals")]),_:1})]),_:1})),[[j]])]),_:1})]),_:1})]),n("div",ao,[l(u)])]),n("div",so,[l(p)])])}var no=$(eo,[["render",ro]]);const io={data(){return{}},computed:{menuItems(){return this.$userHasAnyGroups(["applicant"])?[{name:"My Proposals",icon:"note",route:"/applicant/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["reviewer"])?[{name:"Reviews",icon:"note",route:"/proposal-reviews"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["grants_officer"])?[{name:"All Proposals",icon:"note",route:"/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:[]}},created(){},methods:{navigateTo(e){this.$router.push(e)}}},uo={class:"q-px-md"};function co(e,o,r,m,t,i){const a=z("router-link");return d(),h("div",null,[l(se,null,{default:s(()=>[(d(!0),h(P,null,E(i.menuItems,u=>(d(),h("div",{key:u.name},[l(a,{to:u.route,block:""},{default:s(()=>[l(k,{color:"black",class:"full-width",align:"left",icon:u.icon,flat:""},{default:s(()=>[n("span",uo,_(u.name),1)]),_:2},1032,["icon"])]),_:2},1032,["to"])]))),128))]),_:1})])}var mo=$(io,[["render",co]]);const po={data(){return{}},computed:{menuItems(){return this.$userHasAnyGroups(["applicant"])?[{name:"My Proposals",icon:"note",route:"/applicant/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["reviewer"])?[{name:"Reviews",icon:"note",route:"/proposal-reviews"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["grants_officer"])?[{name:"All Proposals",icon:"note",route:"/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:[]}},created(){},methods:{navigateTo(e){this.$router.push(e)}}},fo={class:"flex justify-cente"},ho={class:"q-pl-sm"};function _o(e,o,r,m,t,i){const a=z("router-link");return d(),y(U,{class:"my-card q-pa-sm",flat:"",bordered:""},{default:s(()=>[n("div",fo,[(d(!0),h(P,null,E(i.menuItems,u=>(d(),h("div",{key:u,class:"q-m-sm text-center"},[l(a,{to:u.route},{default:s(()=>[l(k,{color:"primary",flat:"",outline:""},{default:s(()=>[l(Q,{name:u.icon},null,8,["name"]),n("label",ho,_(u.name.toUpperCase()),1)]),_:2},1024)]),_:2},1032,["to"])]))),128))])]),_:1})}var vo=$(po,[["render",_o]]);const go=["top","middle","bottom"];var bo=xe({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>go.includes(e)}},setup(e,{slots:o}){const r=f(()=>e.align!==void 0?{verticalAlign:e.align}:null),m=f(()=>{const t=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(t!==void 0?` text-${t}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>q("div",{class:m.value,style:r.value,role:"status","aria-label":e.label},xt(o.default,e.label!==void 0?[e.label]:[]))}});const yo={class:"q-py-xl flex flex-center"},ko={class:"text-h6"},wo=Object.assign({name:"MainPage",data(){return{showPopup:!1,menuItems:Y([{name:"SUBMISSIONS",route:"/go/proposals/submitted",icon:"description",color:"secondary",roles:["grants_officer"],count:0,click:()=>{this.$utilsStore.setStateData("ProposalList_status_query","SUBMITTED")}},{name:"REVIEWES",route:"/go/proposals/reviewed",icon:"search",color:"secondary",roles:["grants_officer"],click:()=>{this.$utilsStore.setStateData("ProposalList_status_query","REVIEWED")}},{name:"SELECTED",route:"/go/proposals/selected",icon:"check_circle_outline",color:"secondary",roles:["grants_officer"],click:()=>{this.$utilsStore.setStateData("ProposalList_status_query","SELECTED")}},{name:"THEMES",route:"/themes",icon:"apps",color:"secondary",roles:["grants_officer"]},{name:"REVIEWERS",route:"/reviewers",icon:"people",color:"secondary",roles:["grants_officer"]},{name:"APPLICANTS",route:"/applicants",icon:"people",color:"secondary",roles:["grants_officer"]},{name:"MY PROPOSALS",route:"/applicant/proposals",icon:"search",color:"secondary",roles:["applicant"]},{name:"Apply",route:"",icon:"app_registration",color:"secondary",roles:["applicant"],click:()=>{this.showPopup=!0}},{name:"Proposal Reviews",route:"/proposal-reviews",icon:"search",color:"secondary",roles:["reviewer"]}]),counts:{SELECTED:0,SUBMISSIONS:0}}},created(){this.getCalls()},methods:{getCalls(){this.$api.get("calls/").then(e=>{if(this.calls=e.data,this.calls.length){var o=this.calls[0];this.setCurrentCall(this.$dataStore.currentCall||o),this.getCounts()}else this.setCurrentCall({title:"No Call Found"})})},setCurrentCall(e){this.currentCall=e,this.$dataStore.setCall(this.currentCall)},getCounts(){this.$api.get(`proposals/count/?call=${this.$dataStore.currentCall.id}&is_selected=true`).then(e=>{(e.status=200)&&(this.counts.SELECTED=e.data.count)}),this.$api.get(`proposals/count/?call=${this.$dataStore.currentCall.id}&status=SUBMITTED`).then(e=>{(e.status=200)&&(this.counts.SUBMISSIONS=e.data.count)})}}},{__name:"MainMenu",setup(e){return(o,r)=>{const m=z("create-proposal-dialog"),t=z("router-link"),i=z("useful-docs");return d(),y(Rt,null,{default:s(()=>[l(m,{showButton:!1,showPopup:o.showPopup,onShowPopupChanged:r[0]||(r[0]=a=>this.showPopup=a)},null,8,["showPopup"]),n("div",yo,[(d(!0),h(P,null,E(o.menuItems,a=>(d(),y(t,{key:a.name,to:a.route,onClick:a.click},{default:s(()=>[o.$userHasAnyGroups(a.roles)||a.roles.length==0?(d(),y(k,{key:0,outlined:"",class:Qe(`text-center q-pa-md q-ma-sm text-${a.color}`),style:{width:"200px",height:"150px"}},{default:s(()=>[o.counts[a.name]?(d(),y(bo,{key:0,class:"q-pa-sm justify-center",style:{width:"30px"},color:"primary",floating:"",rounded:""},{default:s(()=>[v(_(o.counts[a.name]),1)]),_:2},1024)):T("",!0),l(Q,{name:a.icon,size:"xl"},null,8,["name"]),l(D,null,{default:s(()=>[n("div",ko,_(a.name),1)]),_:2},1024)]),_:2},1032,["class"])):T("",!0)]),_:2},1032,["to","onClick"]))),128))]),l(i)]),_:1})}}}),So={data(){return{}},computed:{menuItems(){return this.$userHasAnyGroups(["applicant"])?[{name:"REVIEWS",icon:"list",route:`/applicant/proposals/${this.$proposalStore.currentProposal.id}/reviews`},{name:"TEAM",icon:"people",route:`/applicant/proposals/${this.$proposalStore.currentProposal.id}/team`},{name:"REPORTS",icon:"book",route:`/applicant/proposals/${this.$proposalStore.currentProposal.id}/reports`}]:this.$userHasAnyGroups(["reviewer"])?[{name:"REVIEWS",icon:"list",route:`/proposal-reviews/${this.$proposalStore.currentProposal.id}/reviews`},{name:"TEAM",icon:"people",route:`/proposal-reviews/${this.$proposalStore.currentProposal.id}/team`}]:this.$userHasAnyGroups(["grants_officer"])?[{name:"REVIEWS",icon:"list",route:`/proposals/${this.$proposalStore.currentProposal.id}/reviewers`},{name:"TEAM",icon:"people",route:`/proposals/${this.$proposalStore.currentProposal.id}/team`}]:[]}},methods:{navigateTo(e){this.$router.push(e)}}};function xo(e,o,r,m,t,i){const a=z("router-link");return d(),h("div",null,[l(Ut,{flat:"",dense:"","dropdown-icon":"more_vert"},{default:s(()=>[l(se,{class:"q-py-sm"},{default:s(()=>[(d(!0),h(P,null,E(i.menuItems,u=>(d(),y(a,{key:u,to:u.route},{default:s(()=>[F((d(),y(B,{dense:"",clickable:""},{default:s(()=>[l(V,null,{default:s(()=>[l(we,null,{default:s(()=>[l(Q,{name:u.icon},null,8,["name"]),v(" "+_(u.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[At]])]),_:2},1032,["to"]))),128))]),_:1})]),_:1})])}var $o=$(So,[["render",xo]]);const Co={data(){return{files:[{name:"MUNIRIF_PROPOSAL_GUIDELINES_Round_2",url:"https://munirif.pythonanywhere.com/media/MUNIRIF_PROPOSAL_GUIDELINES_Round_2.pdf"},{name:"MUNIRIF_Round_Two_Call_Final",url:"https://munirif.pythonanywhere.com/media/MUNIRIF_Round_Two_Call_Final.pdf"}]}},methods:{openFile(e){window.open(e)}}},Do=n("div",{class:"text-h6"},"Useful Documents",-1);function qo(e,o,r,m,t,i){return d(),h("div",null,[l(U,{class:"my-card q-ma-sm",flat:"",bordered:""},{default:s(()=>[l(D,null,{default:s(()=>[Do]),_:1}),l(R),l(re,{vertical:""},{default:s(()=>[(d(!0),h(P,null,E(t.files,a=>(d(),y(pe,{color:"secondary",key:a.id,class:"glossy",icon:"note",label:a.name,clickable:"",onClick:u=>i.openFile(a.url)},null,8,["label","onClick"]))),128))]),_:1})]),_:1})])}var Vo=$(Co,[["render",qo]]);const Po={data(){return{messages:["Creating new ideas...","Transforming Lives..."],currentMessageIndex:0,currentText:"",currentIndex:0,showCursor:!0}},mounted(){this.typeText()},methods:{typeText(){this.currentIndex<this.messages[this.currentMessageIndex].length?(this.currentText+=this.messages[this.currentMessageIndex][this.currentIndex],this.currentIndex++,setTimeout(this.typeText,100)):setTimeout(this.deleteText,1e3)},deleteText(){this.currentIndex>0?(this.currentText=this.currentText.slice(0,-1),this.currentIndex--,setTimeout(this.deleteText,50)):(this.currentMessageIndex=(this.currentMessageIndex+1)%this.messages.length,setTimeout(this.typeText,1e3))}}},To={align:"center",class:"text-h5"},Eo={key:0,class:"cursor"};function Mo(e,o,r,m,t,i){return d(),h("div",null,[n("p",To,[n("span",null,_(t.currentText),1),t.showCursor?(d(),h("span",Eo,"|")):T("",!0)])])}var Io=$(Po,[["render",Mo]]);const Lo={data(){return{loading:!1,showDialog:!1}},methods:{showConfirmationDialog(){this.showDialog=!0},cancelLogout(){this.showDialog=!1},confirmLogout(){this.$utilsStore.setLoading(!0),this.$api.get("/accounts/logout/").then(e=>{this.$router.push("/index/account/signin"),this.$authStore.clearUserAndToken(),this.$utilsStore.setLoading(!1),this.cancelLogout()})}}},Ro={key:0},Uo=n("span",{class:"q-body1"},"Are you sure you want to log out?",-1);function Ao(e,o,r,m,t,i){return e.$authStore.isLoggedIn?(d(),h("div",Ro,[l(k,{onClick:i.showConfirmationDialog,dense:"",flat:"",color:"primary"},{default:s(()=>[v("Logout")]),_:1},8,["onClick"]),l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[0]||(o[0]=a=>t.showDialog=a)},{default:s(()=>[l(U,null,{default:s(()=>[l(D,{class:"q-pa-md"},{default:s(()=>[Uo]),_:1}),l(re,{align:"right"},{default:s(()=>[l(k,{dense:"",flat:"",onClick:i.cancelLogout,color:"primary"},{default:s(()=>[v("Cancel")]),_:1},8,["onClick"]),l(k,{onClick:i.confirmLogout,color:"primary",class:"q-ml-md"},{default:s(()=>[v("Logout")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):T("",!0)}var Bo=$(Lo,[["render",Ao]]);const Fo={data(){return{user:this.$authStore.currentUser,loading:!1,faculties:[],departments:[],qualifications:[],formData:{email:"",first_name:"",last_name:"",phone:"",gender:"",faculty:null,department:null,qualification:null,password:"",confirm_password:""},emailRules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],nameRules:[e=>!!e||"Field is required"],phoneRules:[e=>!!e||"Telephone number is required",e=>/^[0-9]{10}$/.test(e)||"Telephone number must be 10 digits"],passwordRules:[e=>!!e||"Password is required",e=>e.length>=8||"Password must be at least 8 characters long"],confirmPasswordRules:[e=>!!e||"Confirm Password is required",e=>e===this.formData.password||"Passwords do not match"],errorResponse:{}}},created(){this.setFormData(),this.getFaculties(),this.getQualifications()},methods:{updateUserProfile(){this.$utilsStore.setLoading(!0),this.formData.username=this.formData.email,this.formData.token=this.$authStore.token,this.$api.post("accounts/update-user/",this.formData).then(e=>{const o=e.data.token,r=e.data.user;this.$authStore.setUserAndToken(r,o),this.$utilsStore.setLoading(!1)}).catch(e=>{this.$utilsStore.setLoading(!1),this.errorResponse=e.response})},getFaculties(){this.$api.get("faculties/").then(e=>{this.faculties=e.data})},getQualifications(){this.$api.get("qualifications/").then(e=>{this.qualifications=e.data})},setFormData(){var e,o,r,m,t,i,a,u;this.formData={email:this.user.email,first_name:this.user.first_name,last_name:this.user.last_name,phone:(e=this.user.profile)==null?void 0:e.phone,faculty:(r=(o=this.user.profile)==null?void 0:o.faculty)==null?void 0:r.id,department:(t=(m=this.user.profile)==null?void 0:m.department)==null?void 0:t.id,qualification:(a=(i=this.user.profile)==null?void 0:i.qualification)==null?void 0:a.id,designation:(u=this.user.profile)==null?void 0:u.designation}}}},Oo={align:"center"},No=n("h4",{class:"text-h6 q-my-sm"},"Update Profile",-1),Qo={class:"row q-col-gutter-xs"},jo={class:"col"},zo={class:"col"},Wo={class:"row q-col-gutter-xs"},Go={class:"col"},Ho={class:"col"},Ko={class:"row q-col-gutter-xs q-my-sm"},Yo={class:"col"},Jo={class:"col"},Xo={class:"row q-col-gutter-xs"},Zo={class:"col"},el={class:"col"},tl={class:"flex flex-center"};function ol(e,o,r,m,t,i){return d(),h("div",Oo,[No,l(U,{class:"q-ma-sm q-pa-md",style:{"min-width":"20rem"}},{default:s(()=>[l(Ce,{onSubmit:i.updateUserProfile},{default:s(()=>{var a;return[n("div",Qo,[n("div",jo,[l(K,{outlined:"",dense:"",modelValue:t.formData.first_name,"onUpdate:modelValue":o[0]||(o[0]=u=>t.formData.first_name=u),label:"First Name",rules:t.nameRules,required:""},null,8,["modelValue","rules"])]),n("div",zo,[l(K,{outlined:"",dense:"",modelValue:t.formData.last_name,"onUpdate:modelValue":o[1]||(o[1]=u=>t.formData.last_name=u),label:"Last Name",rules:t.nameRules,required:""},null,8,["modelValue","rules"])])]),n("div",Wo,[n("div",Go,[l(K,{outlined:"",dense:"",modelValue:t.formData.email,"onUpdate:modelValue":o[2]||(o[2]=u=>t.formData.email=u),label:"Email",type:"email",rules:t.emailRules,required:""},null,8,["modelValue","rules"])]),n("div",Ho,[l(K,{outlined:"",dense:"",modelValue:t.formData.phone,"onUpdate:modelValue":o[3]||(o[3]=u=>t.formData.phone=u),label:"Telephone Number",type:"tel",rules:t.phoneRules,required:""},null,8,["modelValue","rules"])])]),n("div",Ko,[n("div",Yo,[l(ae,{outlined:"",dense:"",modelValue:t.formData.faculty,"onUpdate:modelValue":o[4]||(o[4]=u=>t.formData.faculty=u),options:t.faculties,"option-value":"id","option-label":"name",label:"Faculty","emit-value":"","map-options":""},null,8,["modelValue","options"])]),n("div",Jo,[l(ae,{outlined:"",dense:"",modelValue:t.formData.department,"onUpdate:modelValue":o[5]||(o[5]=u=>t.formData.department=u),options:(a=this.faculties.find(u=>u.id===this.formData.faculty))==null?void 0:a.departments,"option-value":"id","option-label":"name",label:"Department","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),n("div",Xo,[n("div",Zo,[l(ae,{dense:"",outlined:"",modelValue:t.formData.qualification,"onUpdate:modelValue":o[6]||(o[6]=u=>t.formData.qualification=u),options:t.qualifications,label:"Qualification","option-value":"id","option-label":"name","map-options":"","emit-value":""},null,8,["modelValue","options"])]),n("div",el,[l(K,{outlined:"",dense:"",modelValue:t.formData.designation,"onUpdate:modelValue":o[7]||(o[7]=u=>t.formData.designation=u),label:"Your Designation",rules:t.nameRules,required:""},null,8,["modelValue","rules"])])]),n("div",tl,[l(k,{type:"submit",color:"primary",label:"Update Profile"})])]}),_:1},8,["onSubmit"])]),_:1})])}var ll=$(Fo,[["render",ol]]);const al={props:{showButton:{type:Boolean,required:!1,default:!0},showPopup:{type:Boolean,required:!1,default:!1}},data(){var e,o;return{loading:!1,showDialog:!1,themes:[],formData:{title:"",theme:null,call:(o=(e=this.$dataStore)==null?void 0:e.currentCall)==null?void 0:o.id},formErrors:{}}},created(){var e,o;Ft().then(r=>this.themes=r),this.formData.call=(o=(e=this.$dataStore)==null?void 0:e.currentCall)==null?void 0:o.id},methods:{createProposal(){console.log(this.formData),this.$utilsStore.setLoading(!0),this.formErrors={},this.formData.user=this.$authStore.currentUser.id,this.$api.post("proposals/",this.formData).then(e=>{this.$router.push(`/applicant/proposals/${e.data.id}`),this.$utilsStore.setLoading(!1),this.showDialog=!1}).catch(e=>{this.formErrors=e.response.data,this.$utilsStore.setLoading(!1)})},cancelCreate(){this.showDialog=!1},setFormData(){this.formData={title:""}}},watch:{showPopup(e,o){this.showDialog=e},showDialog(e,o){this.$emit("showPopupChanged",e)}}},sl=n("div",{class:"text-h6"},"New Project Proposal",-1),rl={class:"text-red"},nl={class:"q-ma-xs"},il=n("br",null,null,-1),ul={class:"text-red"},cl={class:"q-ma-xs"};function dl(e,o,r,m,t,i){return d(),h("div",null,[r.showButton?(d(),y(k,{key:0,label:"New Proposal",color:"primary",onClick:o[0]||(o[0]=a=>t.showDialog=!0)})):T("",!0),l(Ce,{onSubmit:i.createProposal,class:"q-gutter-md"},{default:s(()=>[l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[3]||(o[3]=a=>t.showDialog=a),persistent:""},{default:s(()=>[l(U,{style:{width:"500px"}},{default:s(()=>[l(D,null,{default:s(()=>[sl]),_:1}),l(R),l(D,{class:"q-pt-lg q-pb-md"},{default:s(()=>{var a,u;return[l(K,{modelValue:t.formData.title,"onUpdate:modelValue":o[1]||(o[1]=p=>t.formData.title=p),label:"Title of your proposal",outlined:"",required:""},null,8,["modelValue"]),n("div",rl,[n("ul",nl,[(d(!0),h(P,null,E((a=t.formErrors)==null?void 0:a.title,p=>(d(),h("li",{key:p},_(p),1))),128))])]),il,l(ae,{modelValue:t.formData.theme,"onUpdate:modelValue":o[2]||(o[2]=p=>t.formData.theme=p),options:t.themes,label:"Select Theme",outlined:"","option-value":"id","option-label":"title","map-options":"","emit-value":""},null,8,["modelValue","options"]),n("div",ul,[n("ul",cl,[(d(!0),h(P,null,E((u=t.formErrors)==null?void 0:u.theme,p=>(d(),h("li",{key:p},_(p),1))),128))])])]}),_:1}),l(R,{spaced:""}),l(re,{align:"right"},{default:s(()=>[l(k,{flat:"",color:"primary",label:"Cancel",onClick:i.cancelCreate},null,8,["onClick"]),l(k,{color:"primary",label:"Create",onClick:i.createProposal},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])])}var ml=$(al,[["render",dl]]);const pl={props:["attachment_id"],data(){return{acceptedFileTypes:"application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",modalVisible:!1,uploadUrl:`${this.$api.getUri()}/files/`,uploadHeaders:{},filesToUpload:[],uploadedFiles:[]}},methods:{onFileAdded(e){e.forEach(o=>{console.dir(o),o.type&&this.acceptedFileTypes.includes(o.type)&&(this.uploadFile(o),this.filesToUpload.push(o))})},onBrowse(e){var o=Array.from(e.target.files);this.onFileAdded(o)},uploadFile(e){const o=new FormData;o.append("file",e),o.append("name",e.name),o.append("attachment",this.attachment_id),o.append("proposal",this.$route.params.proposal_id),this.$api.post(this.uploadUrl,o,{headers:this.uploadHeaders}).then(r=>{this.uploadedFiles.push(e),this.filesToUpload=this.filesToUpload.filter(m=>m.key!=e.key),this.uploadedFiles=[],this.modalVisible=!1,this.$emit("file-uploaded")}).catch(r=>{console.log(r)})}}},fl={key:0},hl=n("div",{class:"text-h6"},"Attachments",-1),_l=n("div",{class:"text-center q-my-auto q-py-lg",style:{"background-color":"#ffffff",color:"#000000"}}," Drag and drop files here ",-1),vl={class:"text-center",style:{"background-color":"#ffffff",color:"#000000"}},gl=n("br",null,null,-1),bl=n("br",null,null,-1),yl=["accept"],kl=n("div",null,[n("label",{for:"files",class:"button-label"}," Browse ")],-1),wl=n("div",{align:"center"},[n("br"),v(" Only "),n("strong",null,"PDF, WORD, EXCEL"),v(" are accepted ")],-1);function Sl(e,o,r,m,t,i){var a,u;return((a=e.$proposalStore.currentProposal)==null?void 0:a.status)=="EDITING"&&e.$authStore.currentUser.id==((u=e.$proposalStore.currentProposal)==null?void 0:u.user)?(d(),h("div",fl,[l(k,{color:"primary",icon:"attachment",label:"Add",dense:"",flat:"",onClick:o[0]||(o[0]=p=>t.modalVisible=!0)}),l(J,{modelValue:t.modalVisible,"onUpdate:modelValue":o[3]||(o[3]=p=>t.modalVisible=p)},{default:s(()=>[l(U,{style:{width:"500px"}},{default:s(()=>[l(D,{class:"q-pa-sm text-center"},{default:s(()=>[hl]),_:1}),l(R,{spaced:""}),l(D,{class:"q-pa-sm"},{default:s(()=>[n("div",null,[l(Ot,{url:t.uploadUrl,multiple:"",onAdded:i.onFileAdded,style:{width:"100%"},flat:""},{header:s(()=>[_l,n("div",vl,[v(" or "),gl,bl,n("input",{onChange:o[1]||(o[1]=(...p)=>i.onBrowse&&i.onBrowse(...p)),type:"file",id:"files",class:"hidden",multiple:"",accept:t.acceptedFileTypes},null,40,yl),kl])]),list:s(()=>[l(se,{separator:"",dense:"",bordered:""},{default:s(()=>[(d(!0),h(P,null,E(t.filesToUpload,p=>(d(),y(B,{key:p.__key},{default:s(()=>[l(V,null,{default:s(()=>[l(we,{class:"full-width ellipsis"},{default:s(()=>[v(_(p.name),1)]),_:2},1024),l(we,{caption:""},{default:s(()=>[v(_(p.__sizeLabel)+" "+_(p.__progressLabel),1)]),_:2},1024)]),_:2},1024),l(V,{top:"",side:""},{default:s(()=>[l($t,{size:"20px",color:"primary"})]),_:1})]),_:2},1024))),128))]),_:1}),wl]),_:1},8,["url","onAdded"])])]),_:1}),l(D,{class:"q-pa-sm"},{default:s(()=>[(d(!0),h(P,null,E(t.uploadedFiles,p=>(d(),y(pe,{dense:"",key:p.__key,class:"glossy",icon:"check",label:p.name},null,8,["label"]))),128))]),_:1}),l(R,{spaced:""}),l(D,{align:"right"},{default:s(()=>[l(k,{color:"primary",label:"Done",onClick:o[2]||(o[2]=p=>{t.uploadedFiles=[],t.modalVisible=!1})})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):T("",!0)}var xl=$(pl,[["render",Sl]]);const $l={props:{proposal:{type:Object,required:!0},disabled:{type:Boolean,required:!0}},data(){return{modalVisible:!1,sections:[]}},computed:{wordCounts(){let e={};for(let o=0;o<this.sections.length;o++){const r=this.sections[o];e[r.name]=this.countWordsInHtml(this.proposal[r.name]||"")}return e},wordCountsValid(){let e={};for(let o=0;o<this.sections.length;o++){const r=this.sections[o];if(e[r.name]>=this.sections[r.name])return!1}return!0}},created(){this.getSections()},methods:{getProposal(){this.$api.get(`/proposals/${this.$route.params.proposal_id}/`)},submitProposal(){this.$utilsStore.setLoading(!0);const e=new Date;var o={status:"SUBMITTED",submission_date:e.toJSON().split("T")[0]};this.$api.patch(`/proposals/${this.$route.params.proposal_id}/`,o).then(r=>{this.$utilsStore.setLoading(!1),location.reload()})},getSections(){this.$api.get("sections/").then(e=>{this.sections=e.data})},countWordsInHtml(e){return ze.load(e)("body").text().split(/\s+/).length-1}}},Cl={key:0},Dl=n("thead",null,[n("tr",{class:"bg-grey-3"},[n("th",{class:"text-left"},"Section"),n("th",{class:"text-left"},"Limit"),n("th",{class:"text-left"},"Words"),n("th",{class:"text-left"})])],-1),ql={key:0},Vl={class:"text-left"},Pl={class:"text-center"},Tl={class:"text-left"},El={class:"text-left"},Ml=n("p",{class:"q-pa-md"},"Do you wish to proceed?",-1);function Il(e,o,r,m,t,i){var u,p;const a=z("alert-msg");return((u=r.proposal)==null?void 0:u.status)=="EDITING"&&e.$authStore.currentUser.id==((p=r.proposal)==null?void 0:p.user)?(d(),h("div",Cl,[l(k,{color:"primary",label:"Submit Application",disabled:r.disabled,onClick:o[0]||(o[0]=S=>t.modalVisible=!0)},null,8,["disabled"]),l(J,{modelValue:t.modalVisible,"onUpdate:modelValue":o[2]||(o[2]=S=>t.modalVisible=S)},{default:s(()=>[l(U,null,{default:s(()=>[l(D),l(R),l(D,null,{default:s(()=>[l(ne,{flat:"",dense:"",bordered:"",separator:"vertical"},{default:s(()=>[Dl,n("tbody",null,[(d(!0),h(P,null,E(t.sections,S=>(d(),h(P,{key:S.id},[S.lower_limit==50?(d(),h("tr",ql,[n("td",Vl,_(S.title),1),n("td",Pl,_(S.lower_limit)+" - "+_(S.word_limit),1),n("td",Tl,_(i.wordCounts[S.name]),1),n("td",El,[i.wordCounts[S.name]<=S.word_limit?(d(),y(Q,{key:0,name:"check",class:"text-green"})):(d(),y(Q,{key:1,class:"text-red",name:"close"}))])])):T("",!0)],64))),128))])]),_:1}),l(R,{spaced:""}),l(a,{message:"You will not be able to edit this proposal once submitted.",icon:"crisis_alert"}),Ml]),_:1}),l(R),l(D,{align:"right"},{default:s(()=>[l(k,{color:"primary",flat:"",label:"Cancel",onClick:o[1]||(o[1]=S=>t.modalVisible=!1)}),l(k,{disabled:!i.wordCountsValid,color:"primary",label:"Submit",onClick:i.submitProposal},null,8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):T("",!0)}var Ll=$($l,[["render",Il]]);const Rl={props:{proposal:{type:Object,required:!0},score:{required:!0}},data(){return{modalVisible:!0,loading:!1}},methods:{acceptReview(){this.$utilsStore.setLoading(!0),this.$api.patch(`/scores/${this.score.id}/`,{status:"IN PROGRESS",accepted_at:new Date(Date.UTC())}).then(e=>{location.reload()})}}},Ul={key:0},Al=n("div",{class:"text-h6"},"Proposal Review Invitation",-1),Bl={class:"q-pa-md"},Fl=n("p",{class:"q-pa-md"},[v(" Click the "),n("strong",null,"ACCEPT"),v(" button to start your review ")],-1);function Ol(e,o,r,m,t,i){var a,u;return r.score&&((a=r.score)==null?void 0:a.status)!="IN PROGRESS"&&((u=r.score)==null?void 0:u.status)!="COMPLETED"&&this.$userHasAnyGroups(["reviewer"])?(d(),h("div",Ul,[l(J,{modelValue:t.modalVisible,"onUpdate:modelValue":o[0]||(o[0]=p=>t.modalVisible=p),persistent:""},{default:s(()=>[l(U,null,{default:s(()=>[l(D,null,{default:s(()=>[Al]),_:1}),l(R),l(D,null,{default:s(()=>[n("p",Bl,' You have been inivited to review this proposal on "'+_(r.proposal.title)+'". ',1),Fl]),_:1}),l(R),l(D,{align:"right"},{default:s(()=>[l(k,{color:"primary",label:"Accept",onClick:i.acceptReview},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):T("",!0)}var Nl=$(Rl,[["render",Ol]]);const Ql={props:{proposal:{type:Object,required:!0},section:{type:Object,required:!0}},data(){return{loading:!1,showDialog:!1,formData:{}}},computed:{numWords(){return this.countWordsInHtml(this.formData[this.section.name]||"")}},methods:{updateSection(){this.$utilsStore.setLoading(!0),this.$api.patch(`proposals/${this.$route.params.proposal_id}/`,this.formData).then(e=>{this.$emit("proposal-updated",e.data),this.$utilsStore.setLoading(!1),this.showDialog=!1})},cancelCreate(){this.showDialog=!1},countWordsInHtml(e){return ze.load(e)("body").text().split(/\s+/).length-1}},mounted(){this.formData[this.section.name]=this.proposal[this.section.name]||""},watch:{proposal(e){this.formData[this.section.name]=e[this.section.name]||""}}},jl={key:0},zl={key:0,class:"text-red text-caption"},Wl={class:"text-h6"},Gl={key:0,class:"text-red text-caption"},Hl={align:"right"},Kl={key:0,class:"text-red text-caption"};function Yl(e,o,r,m,t,i){var a,u;return((a=r.proposal)==null?void 0:a.status)=="EDITING"&&e.$authStore.currentUser.id==((u=r.proposal)==null?void 0:u.user)?(d(),h("div",jl,[l(k,{dense:"",flat:"",color:"primary",icon:"edit",onClick:o[0]||(o[0]=p=>t.showDialog=!0)}),i.numWords>r.section.word_limit?(d(),h("small",zl," Exceeded word limit ("+_(i.numWords)+"/"+_(r.section.word_limit)+") ",1)):T("",!0),l(Ce,{onSubmit:i.updateSection,class:"q-gutter-md"},{default:s(()=>[l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[2]||(o[2]=p=>t.showDialog=p),persistent:"","full-width":"","full-height":""},{default:s(()=>[l(U,{style:{width:"500px"}},{default:s(()=>[l(D,{class:"flex justify-between"},{default:s(()=>[n("div",Wl,[v(_(r.section.title)+" ",1),n("small",null,"("+_(i.numWords)+" / "+_(r.section.word_limit)+" words)",1)]),l(k,{color:"primary",flat:"",dense:"",icon:"close",onClick:i.cancelCreate},null,8,["onClick"])]),_:1}),l(R),l(D,{class:"scroll"},{default:s(()=>[i.numWords>r.section.word_limit?(d(),h("small",Gl," Exceeded word limit ("+_(i.numWords)+"/"+_(r.section.word_limit)+") ",1)):T("",!0),l(Nt,{modelValue:t.formData[r.section.name],"onUpdate:modelValue":o[1]||(o[1]=p=>t.formData[r.section.name]=p),label:"Title of your proposal",outlined:"",required:"","min-height":"65vh"},null,8,["modelValue"]),n("div",Hl,[i.numWords>r.section.word_limit?(d(),h("small",Kl," Exceeded word limit ("+_(i.numWords)+"/"+_(r.section.word_limit)+") ",1)):T("",!0)])]),_:1}),l(R,{spaced:""}),l(re,{align:"right"},{default:s(()=>[l(k,{flat:"",color:"primary",label:"Cancel",onClick:i.cancelCreate},null,8,["onClick"]),l(k,{disabled:i.numWords>r.section.word_limit,color:"primary",label:"Save",onClick:i.updateSection},null,8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])])):T("",!0)}var Jl=$(Ql,[["render",Yl]]);const Be="q-slider__marker-labels",Xl=e=>({value:e}),Zl=({marker:e})=>q("div",{key:e.value,style:e.style,class:e.classes},e.label),He=[34,37,40,33,39,38],ea={...Ge,...Qt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ta=["pan","update:modelValue","change"];function oa({updateValue:e,updatePosition:o,getDragging:r,formAttrs:m}){const{props:t,emit:i,slots:a,proxy:{$q:u}}=$e(),p=We(t,u),S=jt(m),O=Y(!1),W=Y(!1),N=Y(!1),X=Y(!1),M=f(()=>t.vertical===!0?"--v":"--h"),le=f(()=>"-"+(t.switchLabelSide===!0?"switched":"standard")),A=f(()=>t.vertical===!0?t.reverse===!0:t.reverse!==(u.lang.rtl===!0)),G=f(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),x=f(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax),g=f(()=>t.disable!==!0&&t.readonly!==!0&&G.value<x.value),I=f(()=>(String(t.step).trim().split(".")[1]||"").length),H=f(()=>t.step===0?1:t.step),Ye=f(()=>g.value===!0?t.tabindex||0:-1),ie=f(()=>t.max-t.min),De=f(()=>x.value-G.value),ue=f(()=>he(G.value)),fe=f(()=>he(x.value)),ce=f(()=>t.vertical===!0?A.value===!0?"bottom":"top":A.value===!0?"right":"left"),qe=f(()=>t.vertical===!0?"height":"width"),Je=f(()=>t.vertical===!0?"width":"height"),Ve=f(()=>t.vertical===!0?"vertical":"horizontal"),Xe=f(()=>{const c={role:"slider","aria-valuemin":G.value,"aria-valuemax":x.value,"aria-orientation":Ve.value,"data-step":t.step};return t.disable===!0?c["aria-disabled"]="true":t.readonly===!0&&(c["aria-readonly"]="true"),c}),Ze=f(()=>`q-slider q-slider${M.value} q-slider--${O.value===!0?"":"in"}active inline no-wrap `+(t.vertical===!0?"row":"column")+(t.disable===!0?" disabled":" q-slider--enabled"+(g.value===!0?" q-slider--editable":""))+(N.value==="both"?" q-slider--focus":"")+(t.label||t.labelAlways===!0?" q-slider--label":"")+(t.labelAlways===!0?" q-slider--label-always":"")+(p.value===!0?" q-slider--dark":"")+(t.dense===!0?" q-slider--dense q-slider--dense"+M.value:""));function de(c){const b="q-slider__"+c;return`${b} ${b}${M.value} ${b}${M.value}${le.value}`}function Pe(c){const b="q-slider__"+c;return`${b} ${b}${M.value}`}const et=f(()=>{const c=t.selectionColor||t.color;return"q-slider__selection absolute"+(c!==void 0?` text-${c}`:"")}),tt=f(()=>Pe("markers")+" absolute overflow-hidden"),ot=f(()=>Pe("track-container")),lt=f(()=>de("pin")),at=f(()=>de("label")),st=f(()=>de("text-container")),rt=f(()=>de("marker-labels-container")+(t.markerLabelsClass!==void 0?` ${t.markerLabelsClass}`:"")),nt=f(()=>"q-slider__track relative-position no-outline"+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),it=f(()=>{const c={[Je.value]:t.trackSize};return t.trackImg!==void 0&&(c.backgroundImage=`url(${t.trackImg}) !important`),c}),ut=f(()=>"q-slider__inner absolute"+(t.innerTrackColor!==void 0?` bg-${t.innerTrackColor}`:"")),Te=f(()=>{const c={[ce.value]:`${100*ue.value}%`,[qe.value]:`${100*(fe.value-ue.value)}%`};return t.innerTrackImg!==void 0&&(c.backgroundImage=`url(${t.innerTrackImg}) !important`),c});function ct(c){const{min:b,max:w,step:C}=t;let L=b+c*(w-b);if(C>0){const Z=(L-b)%C;L+=(Math.abs(Z)>=C/2?(Z<0?-1:1)*C:0)-Z}return I.value>0&&(L=parseFloat(L.toFixed(I.value))),oe(L,G.value,x.value)}function he(c){return ie.value===0?0:(c-t.min)/ie.value}function dt(c,b){const w=Ct(c),C=t.vertical===!0?oe((w.top-b.top)/b.height,0,1):oe((w.left-b.left)/b.width,0,1);return oe(A.value===!0?1-C:C,ue.value,fe.value)}const Ee=f(()=>Dt(t.markers)===!0?t.markers:H.value),Me=f(()=>{const c=[],b=Ee.value,w=t.max;let C=t.min;do c.push(C),C+=b;while(C<w);return c.push(w),c}),Ie=f(()=>{const c=` ${Be}${M.value}-`;return Be+`${c}${t.switchMarkerLabelsSide===!0?"switched":"standard"}${c}${A.value===!0?"rtl":"ltr"}`}),_e=f(()=>t.markerLabels===!1?null:pt(t.markerLabels).map((c,b)=>({index:b,value:c.value,label:c.label||c.value,classes:Ie.value+(c.classes!==void 0?" "+c.classes:""),style:{...Re(c.value),...c.style||{}}}))),Le=f(()=>({markerList:_e.value,markerMap:ft.value,classes:Ie.value,getStyle:Re})),mt=f(()=>{if(De.value!==0){const c=100*Ee.value/De.value;return{...Te.value,backgroundSize:t.vertical===!0?`2px ${c}%`:`${c}% 2px`}}return null});function pt(c){if(c===!1)return null;if(c===!0)return Me.value.map(Xl);if(typeof c=="function")return Me.value.map(w=>{const C=c(w);return ye(C)===!0?{...C,value:w}:{value:w,label:C}});const b=({value:w})=>w>=t.min&&w<=t.max;return Array.isArray(c)===!0?c.map(w=>ye(w)===!0?w:{value:w}).filter(b):Object.keys(c).map(w=>{const C=c[w],L=Number(w);return ye(C)===!0?{...C,value:L}:{value:L,label:C}}).filter(b)}function Re(c){return{[ce.value]:`${100*(c-t.min)/ie.value}%`}}const ft=f(()=>{if(t.markerLabels===!1)return null;const c={};return _e.value.forEach(b=>{c[b.value]=b}),c});function ht(){if(a["marker-label-group"]!==void 0)return a["marker-label-group"](Le.value);const c=a["marker-label"]||Zl;return _e.value.map(b=>c({marker:b,...Le.value}))}const _t=f(()=>[[Wt,vt,void 0,{[Ve.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function vt(c){c.isFinal===!0?(X.value!==void 0&&(o(c.evt),c.touch===!0&&e(!0),X.value=void 0,i("pan","end")),O.value=!1,N.value=!1):c.isFirst===!0?(X.value=r(c.evt),o(c.evt),e(),O.value=!0,i("pan","start")):(o(c.evt),e())}function Ue(){N.value=!1}function gt(c){o(c,r(c)),e(),W.value=!0,O.value=!0,document.addEventListener("mouseup",ve,!0)}function ve(){W.value=!1,O.value=!1,e(!0),Ue(),document.removeEventListener("mouseup",ve,!0)}function bt(c){o(c,r(c)),e(!0)}function yt(c){He.includes(c.keyCode)&&e(!0)}function kt(c){if(t.vertical===!0)return null;const b=u.lang.rtl!==t.reverse?1-c:c;return{transform:`translateX(calc(${2*b-1} * ${t.thumbSize} / 2 + ${50-100*b}%))`}}function wt(c){const b=f(()=>W.value===!1&&(N.value===c.focusValue||N.value==="both")?" q-slider--focus":""),w=f(()=>`q-slider__thumb q-slider__thumb${M.value} q-slider__thumb${M.value}-${A.value===!0?"rtl":"ltr"} absolute non-selectable`+b.value+(c.thumbColor.value!==void 0?` text-${c.thumbColor.value}`:"")),C=f(()=>({width:t.thumbSize,height:t.thumbSize,[ce.value]:`${100*c.ratio.value}%`,zIndex:N.value===c.focusValue?2:void 0})),L=f(()=>c.labelColor.value!==void 0?` text-${c.labelColor.value}`:""),Z=f(()=>kt(c.ratio.value)),ge=f(()=>"q-slider__text"+(c.labelTextColor.value!==void 0?` text-${c.labelTextColor.value}`:""));return()=>{const be=[q("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[q("path",{d:t.thumbPath})]),q("div",{class:"q-slider__focus-ring fit"})];return(t.label===!0||t.labelAlways===!0)&&(be.push(q("div",{class:lt.value+" absolute fit no-pointer-events"+L.value},[q("div",{class:at.value,style:{minWidth:t.thumbSize}},[q("div",{class:st.value,style:Z.value},[q("span",{class:ge.value},c.label.value)])])])),t.name!==void 0&&t.disable!==!0&&S(be,"push")),q("div",{class:w.value,style:C.value,...c.getNodeData()},be)}}function St(c,b,w,C){const L=[];t.innerTrackColor!=="transparent"&&L.push(q("div",{key:"inner",class:ut.value,style:Te.value})),t.selectionColor!=="transparent"&&L.push(q("div",{key:"selection",class:et.value,style:c.value})),t.markers!==!1&&L.push(q("div",{key:"marker",class:tt.value,style:mt.value})),C(L);const Z=[qt("div",{key:"trackC",class:ot.value,tabindex:b.value,...w.value},[q("div",{class:nt.value,style:it.value},L)],"slide",g.value,()=>_t.value)];if(t.markerLabels!==!1){const ge=t.switchMarkerLabelsSide===!0?"unshift":"push";Z[ge](q("div",{key:"markerL",class:rt.value},ht()))}return Z}return je(()=>{document.removeEventListener("mouseup",ve,!0)}),{state:{active:O,focus:N,preventFocus:W,dragging:X,editable:g,classes:Ze,tabindex:Ye,attributes:Xe,step:H,decimals:I,trackLen:ie,innerMin:G,innerMinRatio:ue,innerMax:x,innerMaxRatio:fe,positionProp:ce,sizeProp:qe,isReversed:A},methods:{onActivate:gt,onMobileClick:bt,onBlur:Ue,onKeyup:yt,getContent:St,getThumbRenderFn:wt,convertRatioToModel:ct,convertModelToRatio:he,getDraggingRatio:dt}}}const la=()=>({});var aa=xe({name:"QSlider",props:{...ea,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:ta,setup(e,{emit:o}){const{proxy:{$q:r}}=$e(),{state:m,methods:t}=oa({updateValue:M,updatePosition:A,getDragging:le,formAttrs:zt(e)}),i=Y(null),a=Y(0),u=Y(0);function p(){u.value=e.modelValue===null?m.innerMin.value:oe(e.modelValue,m.innerMin.value,m.innerMax.value)}me(()=>`${e.modelValue}|${m.innerMin.value}|${m.innerMax.value}`,p),p();const S=f(()=>t.convertModelToRatio(u.value)),O=f(()=>m.active.value===!0?a.value:S.value),W=f(()=>{const g={[m.positionProp.value]:`${100*m.innerMinRatio.value}%`,[m.sizeProp.value]:`${100*(O.value-m.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(g.backgroundImage=`url(${e.selectionImg}) !important`),g}),N=t.getThumbRenderFn({focusValue:!0,getNodeData:la,ratio:O,label:f(()=>e.labelValue!==void 0?e.labelValue:u.value),thumbColor:f(()=>e.thumbColor||e.color),labelColor:f(()=>e.labelColor),labelTextColor:f(()=>e.labelTextColor)}),X=f(()=>m.editable.value!==!0?{}:r.platform.is.mobile===!0?{onClick:t.onMobileClick}:{onMousedown:t.onActivate,onFocus:G,onBlur:t.onBlur,onKeydown:x,onKeyup:t.onKeyup});function M(g){u.value!==e.modelValue&&o("update:modelValue",u.value),g===!0&&o("change",u.value)}function le(){return i.value.getBoundingClientRect()}function A(g,I=m.dragging.value){const H=t.getDraggingRatio(g,I);u.value=t.convertRatioToModel(H),a.value=e.snap!==!0||e.step===0?H:t.convertModelToRatio(u.value)}function G(){m.focus.value=!0}function x(g){if(!He.includes(g.keyCode))return;Vt(g);const I=([34,33].includes(g.keyCode)?10:1)*m.step.value,H=([34,37,40].includes(g.keyCode)?-1:1)*(m.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*I;u.value=oe(parseFloat((u.value+H).toFixed(m.decimals.value)),m.innerMin.value,m.innerMax.value),M()}return()=>{const g=t.getContent(W,m.tabindex,X,I=>{I.push(N())});return q("div",{ref:i,class:m.classes.value+(e.modelValue===null?" q-slider--no-value":""),...m.attributes.value,"aria-valuenow":e.modelValue},g)}}});const sa={props:{min:{type:Number,default:0},max:{type:Number,default:10},proposal:{type:Object,required:!0},section:{type:Object,required:!0},score:{required:!0,default:null}},watch:{score(e,o){this.mark=this.score[this.section.name],this.comment=this.score[`${this.section.name}_comment`]}},data(){return{comment:"",mark:0,formData:{l:4}}},methods:{updateSectionScore(e){this.mark>this.section.max_score?this.mark=this.section.max_score:this.mark<0&&(this.mark=0),this.formData[this.section.name]=this.mark,this.$api.patch(`scores/${e}/`,this.formData).then(o=>{})},updateSectionComment(e){this.formData[`${this.section.name}_comment`]=this.comment,this.$api.patch(`scores/${e}/`,this.formData).then(o=>{})}}},ra={key:0,class:"q-mb-sm q-mt-sm"},na=n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"Score"),n("th",{class:"text-left"},"Comment")])],-1),ia={class:""},ua={class:"q-td--no-hover"},ca={class:"text-center"},da=["min","max"],ma={class:"q-td--no-hover"};function pa(e,o,r,m,t,i){return r.score&&r.score.status=="IN PROGRESS"&&this.$userHasAnyGroups(["reviewer"])?(d(),h("div",ra,[l(ne,{bordered:"",flat:"",square:"",style:{background:"#f5f5f5"}},{default:s(()=>[na,n("tbody",null,[n("tr",ia,[n("td",ua,[n("div",ca,[F(n("input",{type:"number",min:r.min,max:r.max,"onUpdate:modelValue":o[0]||(o[0]=a=>t.mark=a),onBlur:o[1]||(o[1]=a=>i.updateSectionScore(r.score.id))},null,40,da),[[Pt,t.mark]]),v("/"+_(r.max),1)]),l(aa,{modelValue:t.mark,"onUpdate:modelValue":o[2]||(o[2]=a=>t.mark=a),min:r.min,max:r.max,step:1,color:"green",onChange:o[3]||(o[3]=a=>i.updateSectionScore(r.score.id))},null,8,["modelValue","min","max"])]),n("td",ma,[l(K,{outlined:"",multiline:"",modelValue:t.comment,"onUpdate:modelValue":o[4]||(o[4]=a=>t.comment=a),type:"textarea",label:"Comment (Optional)",onBlur:o[5]||(o[5]=a=>i.updateSectionComment(r.score.id))},null,8,["modelValue"])])])])]),_:1})])):T("",!0)}var fa=$(sa,[["render",pa]]);const ha={data(){return{loading:!1,showDialog:!1,score:null,sections:[],formData:{strengths:null,weaknesses:null,status:"COMPLETED",is_recommended:null}}},created(){this.getScore(),this.getSections()},methods:{getScore(){var e;this.$api.get(`scores/?user=${((e=this.$authStore.currentUser)==null?void 0:e.id)||0}&proposal=${this.$route.params.proposal_id}`).then(o=>{o.data.length==1&&(this.score=o.data[0],this.formData.strengths=this.score.strengths,this.formData.weaknesses=this.score.weaknesses)})},getSections(){this.$api.get("sections/").then(e=>{this.sections=e.data})},startDialog(){this.getScore(),this.showDialog=!0},submitScore(){confirm("This action is irreversible. Please confirm submission of your score sheet")&&(this.$utilsStore.setLoading(!0),this.$api.patch(`scores/${this.score.id}/`,this.formData).then(e=>{this.score=e.data,this.$utilsStore.setLoading(!1),this.showDialog=!1,location.reload()}))}}},_a={key:0},va=n("div",{class:"text-h6"},"Submit Review",-1),ga=n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"Section"),n("th",{class:"text-right"},"Score"),n("th",{class:"text-left"},"Comment")])],-1),ba={key:0},ya={class:"text-left"},ka={class:"text-left"},wa={class:"q-pa-sm row"},Sa={class:"col q-px-sm"},xa={class:"col"},$a={class:"q-pa-md"},Ca=n("p",null,"Do you recommend this proposal for funding?",-1);function Da(e,o,r,m,t,i){return t.score&&t.score.status=="IN PROGRESS"?(d(),h("div",_a,[l(k,{color:"primary",label:"Submit Review",onClick:i.startDialog},null,8,["onClick"]),l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[6]||(o[6]=a=>t.showDialog=a),persistent:"","full-height":""},{default:s(()=>[l(U,{style:{"min-width":"500px"}},{default:s(()=>[l(D,{class:"flex justify-between"},{default:s(()=>[va,l(k,{color:"primary",flat:"",dense:"",icon:"close",onClick:o[0]||(o[0]=a=>t.showDialog=!1)})]),_:1}),l(R),l(D,{class:"scroll"},{default:s(()=>[l(ne,{flat:"",dense:"",bordered:"",separator:"vertical"},{default:s(()=>[ga,n("tbody",null,[(d(!0),h(P,null,E(t.sections,a=>(d(),h(P,{key:a.id},[a.max_score>0?(d(),h("tr",ba,[n("td",ya,_(a.title),1),n("td",{class:Qe(["text-center",{"bg-green-2":t.score[a.name]>a.max_score/2,"bg-red-1":t.score[a.name]<=a.max_score/2}])},_(t.score[a.name])+"/"+_(a.max_score),3),n("td",ka,_(t.score[`${a.name}_comment`]),1)])):T("",!0)],64))),128))])]),_:1})]),_:1}),n("div",wa,[n("div",Sa,[l(pe,{outline:"",color:"teal","text-color":"white",icon:"arrow_circle_up"},{default:s(()=>[v(" Strengths ")]),_:1}),l(K,{modelValue:t.formData.strengths,"onUpdate:modelValue":o[1]||(o[1]=a=>t.formData.strengths=a),type:"textarea",outlined:"",label:"Strengths"},null,8,["modelValue"])]),n("div",xa,[l(pe,{outline:"",color:"primary","text-color":"white",icon:"arrow_circle_down"},{default:s(()=>[v(" Weaknesses ")]),_:1}),l(K,{modelValue:t.formData.weaknesses,"onUpdate:modelValue":o[2]||(o[2]=a=>t.formData.weaknesses=a),type:"textarea",outlined:"",label:"Weaknesses"},null,8,["modelValue"])])]),n("div",$a,[Ca,l(Se,{modelValue:t.formData.is_recommended,"onUpdate:modelValue":o[3]||(o[3]=a=>t.formData.is_recommended=a),val:!0,label:"Yes"},null,8,["modelValue"]),l(Se,{modelValue:t.formData.is_recommended,"onUpdate:modelValue":o[4]||(o[4]=a=>t.formData.is_recommended=a),val:!1,label:"No"},null,8,["modelValue"])]),l(R,{spaced:""}),l(D,{align:"right"},{default:s(()=>[l(k,{color:"primary",flat:"",label:"Cancel",onClick:o[5]||(o[5]=a=>t.showDialog=!1)}),l(k,{color:"primary",label:"Submit Review",onClick:i.submitScore},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):T("",!0)}var qa=$(ha,[["render",Da]]),Va=xe({name:"QBanner",props:{...Ge,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:o}){const{proxy:{$q:r}}=$e(),m=We(e,r),t=f(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(m.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),i=f(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const a=[q("div",{class:"q-banner__avatar col-auto row items-center self-start"},ke(o.avatar)),q("div",{class:"q-banner__content col text-body2"},ke(o.default))],u=ke(o.action);return u!==void 0&&a.push(q("div",{class:i.value},u)),q("div",{class:t.value+(e.inlineActions===!1&&u!==void 0?" q-banner--top-padding":""),role:"alert"},a)}}});const Pa={data(){return{loading:!1,showDialog:!1,scores:[],sections:[],formData:{strengths:null,weaknesses:null,status:"COMPLETED"}}},created(){this.getScores(),this.getSections()},methods:{getScores(){this.$api.get(`scores/?proposal=${this.$route.params.proposal_id}&status_includes=IN PROGRESS|COMPLETED`).then(e=>{this.scores=e.data})},getSections(){this.$api.get("sections/").then(e=>{this.sections=e.data})},downloadScoreSheet(){this.$api.get(`proposals/${this.$route.params.proposal_id}/score-sheet/download/`).then(e=>{e.status==200&&window.open(e.data.file_url,"_blank")})}}},Ta={key:0,class:"q-pa-sm"},Ea={class:"flex q-py-xs"},Ma={class:"bg-grey-2"},Ia=n("td",{class:"text-left"},null,-1),La={class:"text-left"},Ra={class:"bg-grey-3"},Ua=n("td",{class:"text-left"},"Total",-1);function Aa(e,o,r,m,t,i){return t.scores.length?(d(),h("div",Ta,[n("div",Ea,[l(Gt,null,{default:s(()=>[v("Score Sheet")]),_:1}),l(k,{color:"primary",icon:"download",dense:"",label:"export",onClick:i.downloadScoreSheet},null,8,["onClick"])]),l(ne,{flat:"",dense:"",bordered:"",separator:"vertical"},{default:s(()=>[n("tbody",null,[n("tr",Ma,[Ia,(d(!0),h(P,null,E(t.scores,a=>(d(),h("td",{key:a,class:"text-left"},[n("div",null,_(a.user__first_name)+" "+_(a.user__last_name),1),v(" "+_(a.user__username),1)]))),128))]),(d(!0),h(P,null,E(t.sections,(a,u)=>(d(),h("tr",{key:a.id},[n("td",La,_(u)+" - "+_(a.title),1),(d(!0),h(P,null,E(t.scores,p=>(d(),h("td",{key:p,class:"text-left"},[l(U,{flat:"",bordered:"",class:"q-mx-sm text-center",style:{width:"1.5rem",display:"inline-block"}},{default:s(()=>[v(_(p[a.name]),1)]),_:2},1024),p[`${a.name}_comment`]?(d(),y(k,{key:0,color:"secondary",dense:"",size:"xs",icon:"comment"},{default:s(()=>[l(Ht,null,{default:s(()=>[l(Va,null,{avatar:s(()=>[l(Q,{name:"comment",color:"secondary"})]),default:s(()=>[v(" "+_(p[`${a.name}_comment`]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):T("",!0)]))),128))]))),128)),n("tr",Ra,[Ua,(d(!0),h(P,null,E(t.scores,a=>(d(),h("td",{key:a,class:"text-left"},[l(U,{flat:"",bordered:"",class:"q-mx-sm text-center",style:{width:"1.5rem",display:"inline-block"}},{default:s(()=>[v(_(a.total_score),1)]),_:2},1024)]))),128))])])]),_:1})])):T("",!0)}var Ba=$(Pa,[["render",Aa]]);const Fa={props:{loading:Boolean},data(){return{}},computed:{show(){return this.$utilsStore.isLoading}},created(){this.$utilsStore.setLoading(!1)}},Oa={key:0,class:"loading"};function Na(e,o,r,m,t,i){return i.show?(d(),h("div",Oa,[l(J,{modelValue:i.show,"onUpdate:modelValue":o[0]||(o[0]=a=>i.show=a),persistent:""},{default:s(()=>[l(Kt,{color:"primary",size:"3rem",thickness:5})]),_:1},8,["modelValue"])])):T("",!0)}var Qa=$(Fa,[["render",Na]]);const ja={props:{message:{type:String,required:!0}}},za=n("div",null,null,-1);function Wa(e,o,r,m,t,i){return r.message?(d(),y(U,{key:0},{default:s(()=>[l(D,{class:"flex justify-between"},{default:s(()=>[za,v(" "+_(r.message)+" ",1),l(k,{icon:"close",round:"",dense:"",size:"sm",onClick:o[0]||(o[0]=a=>e.$emit("close",""))})]),_:1})]),_:1})):T("",!0)}var Ga=$(ja,[["render",Wa]]);const Ha={props:{message:{type:String,required:!0,default:"alert_circle"},icon:{type:String,required:!0}}};function Ka(e,o,r,m,t,i){return d(),h("div",null,[l(U,{flat:"",bordered:"",class:"q-pa-md"},{default:s(()=>[l(Q,{size:"md",name:r.icon},null,8,["name"]),v(" "+_(r.message),1)]),_:1})])}var Ya=$(Ha,[["render",Ka]]);const Ja={props:{showModal:Boolean,errorResponse:Object},data(){return{show:!1,errorMessages:{}}},methods:{},watch:{errorResponse(e){this.errorMessages=e.data,this.show=!0}}},Xa=n("div",{class:"text-h6"},"Errors",-1),Za={class:"text-left"},es={class:"text-right"};function ts(e,o,r,m,t,i){return d(),y(J,{modelValue:t.show,"onUpdate:modelValue":o[1]||(o[1]=a=>t.show=a)},{default:s(()=>[l(U,null,{default:s(()=>[l(D,null,{default:s(()=>[Xa]),_:1}),l(R),l(D,null,{default:s(()=>[l(ne,{flat:"",bordered:""},{default:s(()=>[n("tbody",null,[(d(!0),h(P,null,E(t.errorMessages,(a,u)=>(d(),h("tr",{key:u},[n("td",Za,[n("strong",null,_(u),1)]),n("td",es,[n("ul",null,[(d(!0),h(P,null,E(a,(p,S)=>(d(),h("li",{key:S},_(p),1))),128))])])]))),128))])]),_:1})]),_:1}),l(R),l(re,{align:"right"},{default:s(()=>[l(k,{color:"primary",label:"Close",onClick:o[0]||(o[0]=a=>t.show=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var os=$(Ja,[["render",ts]]);const ls={props:{label:String,options:{type:Array,required:!0},value:String},data(){return{selectedOption:this.value||null}},watch:{selectedOption(e){this.$emit("input",e)}}};function as(e,o,r,m,t,i){return d(),h("div",null,[n("label",null,_(r.label),1),n("div",null,[(d(!0),h(P,null,E(r.options,(a,u)=>(d(),y(Se,{key:u,modelValue:t.selectedOption,"onUpdate:modelValue":o[0]||(o[0]=p=>t.selectedOption=p),val:a.value},{default:s(()=>[v(_(a.label),1)]),_:2},1032,["modelValue","val"]))),128))])])}var ss=$(ls,[["render",as]]);const rs={name:"OptionsField",props:{value:{type:String},options:{type:Array,required:!0},label:{type:String,required:!0},hint:String,error:String},data(){return{selectedOption:this.value}},watch:{selectedOption(e){this.$emit("input",e)}}},ns={class:"q-field q-my-sm"};function is(e,o,r,m,t,i){return d(),h("div",ns,[l(ae,{dense:"",outlined:"",modelValue:t.selectedOption,"onUpdate:modelValue":o[0]||(o[0]=a=>t.selectedOption=a),options:r.options,label:r.label,hint:r.hint,error:r.error},null,8,["modelValue","options","label","hint","error"])])}var us=$(rs,[["render",is]]),cs=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],ds=function(e){return cs.map(function(o){return o.toLowerCase()}).indexOf(e.toLowerCase())!==-1},ms=function(e,o,r){Object.keys(o).filter(ds).forEach(function(m){var t=o[m];typeof t=="function"&&(m==="onInit"?t(e,r):r.on(m.substring(2),function(i){return t(i,r)}))})},ps=function(e,o,r,m){var t=e.modelEvents?e.modelEvents:null,i=Array.isArray(t)?t.join(" "):t;me(m,function(a,u){r&&typeof a=="string"&&a!==u&&a!==r.getContent({format:e.outputFormat})&&r.setContent(a)}),r.on(i||"change input undo redo",function(){o.emit("update:modelValue",r.getContent({format:e.outputFormat}))})},fs=function(e,o,r,m,t,i){m.setContent(i()),r.attrs["onUpdate:modelValue"]&&ps(o,r,m,t),ms(e,r.attrs,m)},Fe=0,Ke=function(e){var o=Date.now(),r=Math.floor(Math.random()*1e9);return Fe++,e+"_"+r+Fe+String(o)},hs=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},Oe=function(e){return typeof e=="undefined"||e===""?[]:Array.isArray(e)?e:e.split(" ")},_s=function(e,o){return Oe(e).concat(Oe(o))},vs=function(e){return e==null},Ne=function(){return{listeners:[],scriptId:Ke("tiny-script"),scriptLoaded:!1}},gs=function(){var e=Ne(),o=function(t,i,a,u){var p=i.createElement("script");p.referrerPolicy="origin",p.type="application/javascript",p.id=t,p.src=a;var S=function(){p.removeEventListener("load",S),u()};p.addEventListener("load",S),i.head&&i.head.appendChild(p)},r=function(t,i,a){e.scriptLoaded?a():(e.listeners.push(a),t.getElementById(e.scriptId)||o(e.scriptId,t,i,function(){e.listeners.forEach(function(u){return u()}),e.scriptLoaded=!0}))},m=function(){e=Ne()};return{load:r,reinitialize:m}},bs=gs(),ys=function(){return typeof window!="undefined"?window:global},ee=function(){var e=ys();return e&&e.tinymce?e.tinymce:null},ks={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},te=globalThis&&globalThis.__assign||function(){return te=Object.assign||function(e){for(var o,r=1,m=arguments.length;r<m;r++){o=arguments[r];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},te.apply(this,arguments)},ws=function(e,o,r,m){return e(m||"div",{id:o,ref:r})},Ss=function(e,o,r){return e("textarea",{id:o,visibility:"hidden",ref:r})},xs=Tt({props:ks,setup:function(e,o){var r=e.init?te({},e.init):{},m=Et(e),t=m.disabled,i=m.modelValue,a=m.tagName,u=Y(null),p=null,S=e.id||Ke("tiny-vue"),O=e.init&&e.init.inline||e.inline,W=!!o.attrs["onUpdate:modelValue"],N=!0,X=e.initialValue?e.initialValue:"",M="",le=function(x){return W?function(){return i!=null&&i.value?i.value:""}:function(){return x?X:M}},A=function(){var x=le(N),g=te(te({},r),{readonly:e.disabled,target:u.value,plugins:_s(r.plugins,e.plugins),toolbar:e.toolbar||r.toolbar,inline:O,setup:function(I){p=I,I.on("init",function(H){return fs(H,e,o,I,i,x)}),typeof r.setup=="function"&&r.setup(I)}});hs(u.value)&&(u.value.style.visibility=""),ee().init(g),N=!1};me(t,function(x){var g;p!==null&&(typeof((g=p.mode)===null||g===void 0?void 0:g.set)=="function"?p.mode.set(x?"readonly":"design"):p.setMode(x?"readonly":"design"))}),me(a,function(x){var g;W||(M=p.getContent()),(g=ee())===null||g===void 0||g.remove(p),Ae(function(){return A()})}),Mt(function(){if(ee()!==null)A();else if(u.value&&u.value.ownerDocument){var x=e.cloudChannel?e.cloudChannel:"6",g=e.apiKey?e.apiKey:"no-api-key",I=vs(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(g,"/tinymce/").concat(x,"/tinymce.min.js"):e.tinymceScriptSrc;bs.load(u.value.ownerDocument,I,A)}}),je(function(){ee()!==null&&ee().remove(p)}),O||(It(function(){N||A()}),Lt(function(){var x;W||(M=p.getContent()),(x=ee())===null||x===void 0||x.remove(p)}));var G=function(x){var g;M=p.getContent(),(g=ee())===null||g===void 0||g.remove(p),r=te(te({},r),x),Ae(function(){return A()})};return o.expose({rerender:G,getEditor:function(){return p}}),function(){return O?ws(q,S,u,e.tagName):Ss(q,S,u)}}});const $s={name:"app",components:{editor:xs}},Cs={id:"app"};function Ds(e,o,r,m,t,i){const a=z("editor");return d(),h("div",Cs,[l(a,{"api-key":"no-api-key",init:{height:500,menubar:!1,plugins:["a11ychecker","advlist","advcode","advtable","autolink","checklist","export","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","powerpaste","fullscreen","formatpainter","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | casechange blocks | bold italic backcolor |           alignleft aligncenter alignright alignjustify |           bullist numlst checklist outdent indent | removeformat | a11ycheck code table help"},"initial-value":""})])}var qs=$($s,[["render",Ds]]);const Vs={"developer-menu":Zt,"developer-menu-2":no,"user-menu":mo,"user-menu-2":vo,"main-menu":wo,"proposal-options":$o,"useful-docs":Vo,taglines:Io,"user-logout":Bo,"update-user":ll,"change-password":Bt,"create-proposal-dialog":ml,"proposal-file-attachment":xl,"submit-proposal":Ll,"accept-review":Nl,"section-editor":Jl,"score-editor":fa,"score-sheet":qa,"proposal-score-sheets":Ba,"loading-component":Qa,"message-box":Ga,"alert-msg":Ya,"error-message-modal":os,"radio-field":ss,"options-field":us,"tiny-mce":qs};var Sr=async({app:e})=>{Object.entries(Vs).forEach(([o,r])=>{e.component(o,r)})};export{Sr as default};
