import{p as h,ax as k,a8 as E,m as D,ay as F,az as P,aA as L,L as G,v as K,M as O,ah as T,B as I,au as x,P as A}from"./index.9b6d8f02.js";import{r as v,b as B}from"./focus-manager.b507780d.js";import{p as d}from"./portal.127dfe2c.js";function Q(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function _(e,n,a,l){const r=h(!1),u=h(!1);let s=null;const f={},p=l==="dialog"&&Q(e);function w(c){if(c===!0){v(f),u.value=!0;return}u.value=!1,r.value===!1&&(p===!1&&s===null&&(s=P(!1,l)),r.value=!0,d.push(e.proxy),B(f))}function y(c){if(u.value=!1,c!==!0)return;v(f),r.value=!1;const g=d.indexOf(e.proxy);g!==-1&&d.splice(g,1),s!==null&&(L(s),s=null)}return k(()=>{y(!0)}),e.proxy.__qPortal=!0,E(e.proxy,"contentEl",()=>n.value),{showPortal:w,hidePortal:y,portalIsActive:r,portalIsAccessible:u,renderPortal:()=>p===!0?a():r.value===!0?[D(F,{to:s},a())]:void 0}}function q(){let e;const n=I();function a(){e=void 0}return G(a),K(a),{removeTick:a,registerTick(l){e=l,O(()=>{e===l&&(T(n)===!1&&e(),e=void 0)})}}}const o=[];let i;function j(e){i=e.keyCode===27}function C(){i===!0&&(i=!1)}function M(e){i===!0&&(i=!1,A(e,27)===!0&&o[o.length-1](e))}function b(e){window[e]("keydown",j),window[e]("blur",C),window[e]("keyup",M),i=!1}function z(e){x.is.desktop===!0&&(o.push(e),o.length===1&&b("addEventListener"))}function $(e){const n=o.indexOf(e);n>-1&&(o.splice(n,1),o.length===0&&b("removeEventListener"))}const t=[];function m(e){t[t.length-1](e)}function H(e){x.is.desktop===!0&&(t.push(e),t.length===1&&document.body.addEventListener("focusin",m))}function J(e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),t.length===0&&document.body.removeEventListener("focusin",m))}export{_ as a,$ as b,H as c,z as d,J as r,q as u};
