import{Q as ue,a as M}from"./QBreadcrumbs.6f1afc2d.js";import{Q as w}from"./QSeparator.378e1fe5.js";import{_ as P,o as C,j as k,e as z,l as g,u as I,i as a,f as o,w as m,aM as de,t as h,g as me,m as T,n as f,p as c,Q as H,D as K,s as R,B as D,x as F,E as N,as as fe,T as ge,r as B,F as he,k as _e,aN as ve,aO as Ce}from"./index.321f2a75.js";import{Q as pe}from"./QMarkupTable.6ac75ced.js";import{Q as ke}from"./QPage.4ef5ae0a.js";import{g as be,a as ye}from"./api.c1b7a54b.js";import{Q as p}from"./QCardSection.e3906341.js";import{Q}from"./QInput.9ae5b315.js";import{Q as De}from"./QDate.a1e44e65.js";import{Q as we}from"./QPopupProxy.3b5cde75.js";import{Q as A}from"./QCardActions.8b363283.js";import{Q as O}from"./QCard.605795d5.js";import{Q as j}from"./QDialog.155ceb80.js";import{Q as Ve}from"./QForm.fd476d0e.js";import{C as Se}from"./ClosePopup.4d93bfbd.js";import{Q as Qe}from"./QRadio.80375968.js";import{u as xe,a as qe,b as Be,Q as Ie}from"./QCheckbox.ce7574f3.js";import{a as $,u as G}from"./use-dark.89890713.js";import{u as Pe}from"./use-quasar.43c7e458.js";import"./axios.98f39043.js";import"./use-key-composition.439dccc7.js";import"./use-split-attrs.467a65ac.js";import"./uid.42677368.js";import"./focus-manager.b507780d.js";import"./use-form.45c1b99b.js";import"./format.2bc25e5f.js";import"./QMenu.1274618f.js";import"./selection.0bf889d4.js";import"./use-timeout.87ac005e.js";import"./focusout.26c1c1fd.js";import"./use-transition.915f958c.js";import"./scroll.36e3c4a7.js";import"./use-prevent-scroll.3531c3d8.js";import"./option-sizes.aa1cef36.js";const Te={props:{showButton:{type:Boolean,required:!1,default:!0}},data(){return{showModal:!1,loading:!1,showDialog:!1,showPop:!1,themes:[],formData:{title:"",is_active:!1,date_range:{from:"",to:""},date_from:"",date_to:""},formErrors:{},rules:{required:e=>!!e||"This field is required",dateRangeFrom:e=>!e||!this.formData.date_range.to||e<=this.formData.date_range.to||"Start date must be less than end date",dateRangeTo:e=>!e||!this.formData.date_range.from||e>=this.formData.date_range.from||"End date must be greater than start date"}}},created(){var e,l;be().then(r=>this.themes=r),this.formData.call=(l=(e=this.$dataStore)==null?void 0:e.currentCall)==null?void 0:l.id},methods:{createCall(){this.formData.date_from=this.formData.date_range.from.replaceAll("/","-"),this.formData.date_to=this.formData.date_range.to.replaceAll("/","-"),console.log(this.formData),this.$api.post("calls/",this.formData).then(e=>{console.log("Call created successfully",e.data.id),e.status===201&&e.data.id&&this.$router.push(`/calls/${e.data.id}`)})},setDateRange(){console.log(this.formData.date_range.from,this.formData.date_range.to),this.formData.date_from=this.formData.date_range.from,this.formData.date_to=this.formData.date_range.to,this.showPop=!1},cancelCreate(){this.showDialog=!1},setFormData(){this.formData={title:"sd;d;wdw",is_active:!1,date_range:{from:"2025/04/01",to:"2025/04/30"},date_from:"2025-04-01",date_to:"2025-04-30"}}},watch:{showPopup(e,l){this.showDialog=e},showDialog(e,l){this.$emit("showPopupChanged",e)}}},Ae=a("div",{class:"text-h6"},"New Call",-1),Oe={class:"q-mt-md"},je=a("label",{class:"text-grey text-caption"}," Select Call Duration ",-1),Ee={class:"row q-gutter-sm col"};function Ue(e,l,r,_,t,s){return C(),k("div",null,[r.showButton?(C(),z(g,{key:0,label:"New Call",color:"primary",onClick:l[0]||(l[0]=i=>t.showDialog=!0)})):I("",!0),a("div",null,[o(Ve,{onSubmit:s.createCall,class:"justify-center"},{default:m(()=>[o(j,{modelValue:t.showDialog,"onUpdate:modelValue":l[6]||(l[6]=i=>t.showDialog=i),persistent:""},{default:m(()=>[o(O,{style:{width:"500px"}},{default:m(()=>[o(p,{class:"row justify-between"},{default:m(()=>[Ae,o(g,{color:"primary",icon:"close",dense:"",flat:"",onClick:s.cancelCreate},null,8,["onClick"])]),_:1}),o(w),o(p,{class:"q-pt-lg q-pb-md"},{default:m(()=>[o(Q,{modelValue:t.formData.title,"onUpdate:modelValue":l[1]||(l[1]=i=>t.formData.title=i),label:"Title of your call",outlined:"",required:"",rules:[t.rules.required]},null,8,["modelValue","rules"]),a("div",Oe,[je,a("div",Ee,[o(Q,{class:"col",modelValue:t.formData.date_from,"onUpdate:modelValue":l[2]||(l[2]=i=>t.formData.date_from=i),type:"text",label:"From?",outlined:"",disable:!0},null,8,["modelValue"]),o(Q,{class:"col",modelValue:t.formData.date_to,"onUpdate:modelValue":l[3]||(l[3]=i=>t.formData.date_to=i),type:"text",label:"To?",outlined:"",disable:!0},null,8,["modelValue"]),o(g,{icon:"event",outline:"",color:"primary"},{default:m(()=>[o(we,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:t.showPop,"onUpdate:modelValue":l[5]||(l[5]=i=>t.showPop=i)},{default:m(()=>[o(De,{onRangeEnd:s.setDateRange,modelValue:t.formData.date_range,"onUpdate:modelValue":l[4]||(l[4]=i=>t.formData.date_range=i),range:""},null,8,["onRangeEnd","modelValue"])]),_:1},8,["modelValue"])]),_:1})])])]),_:1}),o(w,{spaced:""}),o(A,{align:"right"},{default:m(()=>[o(g,{flat:"",color:"primary",label:"Cancel",onClick:s.cancelCreate},null,8,["onClick"]),o(g,{color:"primary",label:"Create",onClick:s.createCall},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])])])}var Le=P(Te,[["render",Ue]]);const Me={props:{message:{type:String,default:"Comfirm action?"},icon:{type:String,default:"help_outline"},title:{type:String,default:"Confirm"},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"}},data(){return{show:!1}},methods:{showDialog(){this.show=!0},hide(){this.show=!1},doConfirm(){this.$emit("confirm",!0),this.show=!1}}},Re={class:"q-ml-sm"};function Fe(e,l,r,_,t,s){return C(),k("div",null,[o(j,{modelValue:t.show,"onUpdate:modelValue":l[0]||(l[0]=i=>t.show=i),persistent:""},{default:m(()=>[o(O,null,{default:m(()=>[o(p,{class:"row items-center"},{default:m(()=>[o(de,{icon:r.icon,color:"primary","text-color":"white"},null,8,["icon"]),a("span",Re,h(r.message),1)]),_:1}),o(A,{align:"right"},{default:m(()=>[me(o(g,{flat:"",label:r.cancelText,color:"primary"},null,8,["label"]),[[Se]]),o(g,{flat:"",onClick:s.doConfirm,label:r.confirmText,color:"primary"},null,8,["onClick","label"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var Ne=P(Me,[["render",Fe]]),ze=T({name:"QToggle",props:{...xe,icon:String,iconColor:String},emits:qe,setup(e){function l(r,_){const t=f(()=>(r.value===!0?e.checkedIcon:_.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),s=f(()=>r.value===!0?e.iconColor:null);return()=>[c("div",{class:"q-toggle__track"}),c("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},t.value!==void 0?[c(H,{name:t.value,color:s.value})]:void 0)]}return Be("toggle",l)}});const J={radio:Qe,checkbox:Ie,toggle:ze},He=Object.keys(J);var Ke=T({name:"QOptionGroup",props:{...$,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(l=>"value"in l&&"label"in l)},name:String,type:{default:"radio",validator:e=>He.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:l,slots:r}){const{proxy:{$q:_}}=K(),t=Array.isArray(e.modelValue);e.type==="radio"?t===!0&&console.error("q-option-group: model should not be array"):t===!1&&console.error("q-option-group: model should be array in your case");const s=G(e,_),i=f(()=>J[e.type]),b=f(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),v=f(()=>{const n={role:"group"};return e.type==="radio"&&(n.role="radiogroup",e.disable===!0&&(n["aria-disabled"]="true")),n});function d(n){l("update:modelValue",n)}return()=>c("div",{class:b.value,...v.value},e.options.map((n,y)=>{const V=r["label-"+y]!==void 0?()=>r["label-"+y](n):r.label!==void 0?()=>r.label(n):void 0;return c("div",[c(i.value,{modelValue:e.modelValue,val:n.value,name:n.name===void 0?e.name:n.name,disable:e.disable||n.disable,label:V===void 0?n.label:null,leftLabel:n.leftLabel===void 0?e.leftLabel:n.leftLabel,color:n.color===void 0?e.color:n.color,checkedIcon:n.checkedIcon,uncheckedIcon:n.uncheckedIcon,dark:n.dark||s.value,size:n.size===void 0?e.size:n.size,dense:e.dense,keepColor:n.keepColor===void 0?e.keepColor:n.keepColor,"onUpdate:modelValue":d},V)])}))}});T({name:"DialogPlugin",props:{...$,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:e=>["ok","cancel","none"].includes(e)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(e,{emit:l}){const{proxy:r}=K(),{$q:_}=r,t=G(e,_),s=R(null),i=R(e.prompt!==void 0?e.prompt.model:e.options!==void 0?e.options.model:void 0),b=f(()=>"q-dialog-plugin"+(t.value===!0?" q-dialog-plugin--dark q-dark":"")+(e.progress!==!1?" q-dialog-plugin--progress":"")),v=f(()=>e.color||(t.value===!0?"amber":"primary")),d=f(()=>e.progress===!1?null:D(e.progress)===!0?{component:e.progress.spinner||F,props:{color:e.progress.color||v.value}}:{component:F,props:{color:v.value}}),n=f(()=>e.prompt!==void 0||e.options!==void 0),y=f(()=>{if(n.value!==!0)return{};const{model:u,isValid:q,items:dt,...ce}=e.prompt!==void 0?e.prompt:e.options;return ce}),V=f(()=>D(e.ok)===!0||e.ok===!0?_.lang.label.ok:e.ok),X=f(()=>D(e.cancel)===!0||e.cancel===!0?_.lang.label.cancel:e.cancel),E=f(()=>e.prompt!==void 0?e.prompt.isValid!==void 0&&e.prompt.isValid(i.value)!==!0:e.options!==void 0?e.options.isValid!==void 0&&e.options.isValid(i.value)!==!0:!1),Y=f(()=>({color:v.value,label:V.value,ripple:!1,disable:E.value,...D(e.ok)===!0?e.ok:{flat:!0},"data-autofocus":e.focus==="ok"&&n.value!==!0||void 0,onClick:U})),Z=f(()=>({color:v.value,label:X.value,ripple:!1,...D(e.cancel)===!0?e.cancel:{flat:!0},"data-autofocus":e.focus==="cancel"&&n.value!==!0||void 0,onClick:te}));N(()=>e.prompt&&e.prompt.model,S),N(()=>e.options&&e.options.model,S);function ee(){s.value.show()}function x(){s.value.hide()}function U(){l("ok",fe(i.value)),x()}function te(){x()}function le(){l("hide")}function S(u){i.value=u}function oe(u){E.value!==!0&&e.prompt.type!=="textarea"&&ge(u,13)===!0&&U()}function L(u,q){return e.html===!0?c(p,{class:u,innerHTML:q}):c(p,{class:u},()=>q)}function ae(){return[c(Q,{color:v.value,dense:!0,autofocus:!0,dark:t.value,...y.value,modelValue:i.value,"onUpdate:modelValue":S,onKeyup:oe})]}function ne(){return[c(Ke,{color:v.value,options:e.options.items,dark:t.value,...y.value,modelValue:i.value,"onUpdate:modelValue":S})]}function ie(){const u=[];return e.cancel&&u.push(c(g,Z.value)),e.ok&&u.push(c(g,Y.value)),c(A,{class:e.stackButtons===!0?"items-end":"",vertical:e.stackButtons,align:"right"},()=>u)}function re(){const u=[];return e.title&&u.push(L("q-dialog__title",e.title)),e.progress!==!1&&u.push(c(p,{class:"q-dialog__progress"},()=>c(d.value.component,d.value.props))),e.message&&u.push(L("q-dialog__message",e.message)),e.prompt!==void 0?u.push(c(p,{class:"scroll q-dialog-plugin__form"},ae)):e.options!==void 0&&u.push(c(w,{dark:t.value}),c(p,{class:"scroll q-dialog-plugin__form"},ne),c(w,{dark:t.value})),(e.ok||e.cancel)&&u.push(ie()),u}function se(){return[c(O,{class:[b.value,e.cardClass],style:e.cardStyle,dark:t.value},re)]}return Object.assign(r,{show:ee,hide:x}),()=>c(j,{ref:s,onHide:le},se)}});Pe();const $e={components:{CreateCallModal:Le,ConfirmDialog:Ne},name:"DataTable",data(){return{items:[],currentCall:{},entity:{},selectedCallId:null}},created(){this.init()},methods:{init(){this.getEntity()},async getEntity(){const e=await this.$api.get("entities/");this.entity=e.data[0],this.$dataStore.setEntity(this.entity),ye().then(l=>{console.log("calls",l),this.items=l,this.currentCall=this.items.find(r=>r.id==this.entity.current_call),this.items=this.items.filter(r=>r.id!=this.entity.current_call),console.log("store",this.currentCall),this.$dataStore.setCall(this.currentCall)})},editItem(e){console.log("Edit item:",e)},setAsActiveCall(e){this.$utilsStore.setLoading(!0),this.$api.get(`/calls/${e}/set-as-active`).then(l=>{l.status==200&&(this.init(),this.$utilsStore.setLoading(!1))})},confirmDelete(e){this.selectedCallId=e,console.log(this.$refs.confirmDialog.show=!0),this.$refs.confirmDialog.show()},deleteItem(e){this.$api.delete(`calls/${e}`).then(l=>{l.status==204&&(window.location="/calls")})}}},W=e=>(ve("data-v-f715acc8"),e=e(),Ce(),e),Ge={class:"q-ma-md"},Je={align:"right",class:"q-ma-sm"},We=W(()=>a("thead",null,[a("tr",null,[a("th",{align:"left"},"Title"),a("th",{align:"left"},"Start"),a("th",{align:"left"},"Submission Date"),a("th",{align:"left"},"Review Date"),a("th",{align:"left"},"Selection Date"),a("th",{align:"left"},"End Date"),a("th",{align:"center"},"Active"),a("th",{align:"left"},"Actions")])],-1)),Xe={key:0,style:{"background-color":"#dddddd"}},Ye={align:"left"},Ze={align:"left"},et={align:"left"},tt={align:"left"},lt={align:"left"},ot={align:"left"},at={align:"center"},nt={align:"left"},it={align:"center"},rt={key:0},st=W(()=>a("p",{class:"text-center q-py-xl q-my-xl text-h3 text-grey"}," No Calls Found! ",-1)),ct={class:"text-center"};function ut(e,l,r,_,t,s){const i=B("ConfirmDialog"),b=B("CreateCallModal"),v=B("router-link");return C(),z(ke,null,{default:m(()=>[o(i,{ref:"confirmDialog",message:"Are you sure you want to delete this call?",icon:"delete",confirmText:"Delete",cancelText:"Cancel",onConfirm:l[0]||(l[0]=d=>s.deleteItem(t.selectedCallId))},null,512),a("div",Ge,[o(ue,null,{default:m(()=>[o(M,{icon:"home",to:"/",label:"Home"}),o(M,{label:"Calls",icon:"campaign"})]),_:1})]),o(w,{spaced:""}),a("div",Je,[o(b)]),o(pe,{separator:"cell",class:"q-ma-sm",flat:"",bordered:""},{default:m(()=>[We,a("tbody",null,[t.currentCall?(C(),k("tr",Xe,[a("th",Ye,h(t.currentCall.title),1),a("th",Ze,h(t.currentCall.date_from),1),a("th",et,h(t.currentCall.submission_date),1),a("th",tt,h(t.currentCall.review_date),1),a("th",lt,h(t.currentCall.selection_date),1),a("th",ot,h(t.currentCall.date_to),1),a("th",at,[o(H,{name:"check_circle_outline",size:"lg",color:"green"})]),a("th",nt,[o(v,{to:`/calls/${t.currentCall.id}`},{default:m(()=>[o(g,{icon:"edit",flat:"",color:"primary",onClick:l[1]||(l[1]=d=>s.editItem(t.currentCall))})]),_:1},8,["to"])])])):I("",!0),(C(!0),k(he,null,_e(t.items,d=>(C(),k("tr",{key:d.id},[a("td",null,h(d.title),1),a("td",null,h(d.date_from),1),a("td",null,h(d.submission_date),1),a("td",null,h(d.review_date),1),a("td",null,h(d.selection_date),1),a("td",null,h(d.date_to),1),a("td",it,[o(g,{color:"primary",dense:"",outline:"",label:"set as active",onClick:n=>s.setAsActiveCall(d.id)},null,8,["onClick"])]),a("td",null,[o(v,{to:`/calls/${d.id}`},{default:m(()=>[o(g,{icon:"edit",flat:"",color:"primary",onClick:n=>s.editItem(d)},null,8,["onClick"])]),_:2},1032,["to"]),o(g,{icon:"delete",flat:"",color:"negative",onClick:n=>s.confirmDelete(d.id)},null,8,["onClick"])])]))),128))])]),_:1}),!t.currentCall&&t.items.length==0?(C(),k("div",rt,[st,a("div",ct,[o(v,{to:"/calls/create"},{default:m(()=>[o(g,{color:"primary",outline:"",label:"add call"})]),_:1})])])):I("",!0)]),_:1})}var Kt=P($e,[["render",ut],["__scopeId","data-v-f715acc8"]]);export{Kt as default};
