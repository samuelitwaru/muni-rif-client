import{Q as d}from"./QInput.01de1739.js";import{_ as h,r as _,o as w,j as g,f as t,w as a,i as s,t as p,l as c,h as x}from"./index.0c070ef5.js";import{Q as f}from"./QSeparator.70cb9cc4.js";import{Q as D}from"./QForm.83bb0512.js";import{Q as S}from"./QCardSection.cb2f8249.js";import{Q as y}from"./QCard.63eb6402.js";import"./use-key-composition.b5f616a9.js";import"./use-dark.f75a96f1.js";import"./use-split-attrs.9a899efb.js";import"./uid.42677368.js";import"./focus-manager.b507780d.js";import"./use-form.e5c6d76e.js";const v={data(){return{loading:!1,formData:{email:"",password:""},formErrors:{email:"",password:""},emailRules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],passwordRules:[e=>!!e||"Password is required"]}},created(){},methods:{login(){this.formErrors={},this.$utilsStore.setLoading(!0),this.formData.username=this.formData.email,this.$api.post("/accounts/login/",this.formData).then(e=>{const r=e.data.token,n=e.data.user;this.$authStore.setUserAndToken(n,r),this.$utilsStore.setLoading(!1);var i=this.$route.query._next||"/";this.$userHasAnyGroups(["reviewer"])&&(i="/proposal-reviews"),this.$router.push(i),this.$utilsStore.setLoading(!1)}).catch(e=>{this.$utilsStore.setLoading(!1),this.formErrors.email=e.response.data.error})},setFormData(){this.formData={email:"samuelitwaru@gmail.com",password:"bratz123"}},resetForm(){this.formData={email:this.formData.email,password:""}}}},b={align:"center"},Q=s("h2",{class:"text-h6"},"Login",-1),E={class:"text-caption text-red"},V={class:"text-caption text-red"},R={class:""},k={class:"flex justify-between"},q=s("div",null,null,-1),L=s("small",null,"FORGOT PASSWORD",-1);function F(e,r,n,i,o,m){const u=_("router-link");return w(),g("div",b,[t(y,{class:"q-mt-l",style:{"min-width":"22rem",height:"25rem"}},{default:a(()=>[t(S,null,{default:a(()=>[t(D,{onSubmit:m.login,ref:"form",onReset:m.resetForm},{default:a(()=>[Q,s("div",null,[s("small",E,[s("strong",null,p(o.formErrors.email),1)])]),t(d,{outlined:"",dense:"",modelValue:o.formData.email,"onUpdate:modelValue":r[0]||(r[0]=l=>o.formData.email=l),label:"Email",type:"email",rules:o.emailRules,required:""},null,8,["modelValue","rules"]),t(d,{outlined:"",dense:"",modelValue:o.formData.password,"onUpdate:modelValue":r[1]||(r[1]=l=>o.formData.password=l),label:"Password",type:"password",rules:o.passwordRules,required:""},null,8,["modelValue","rules"]),s("small",V,p(o.formErrors.password),1),s("div",R,[s("div",k,[q,t(c,{type:"submit",color:"primary",label:"Login"})]),t(f,{spaced:""}),x(" Don't have an account? "),t(u,{to:"/index/account/signup"},{default:a(()=>[t(c,{type:"submit",flat:"",color:"primary",label:"Sign up"})]),_:1})]),t(f,{spaced:"",style:{width:"40%"}}),t(u,{to:"/index/account/password-reset",class:"q-my-auto"},{default:a(()=>[L]),_:1})]),_:1},8,["onSubmit","onReset"])]),_:1})]),_:1})])}var H=h(v,[["render",F]]);export{H as default};
