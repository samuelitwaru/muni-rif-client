import{Q as b}from"./QChip.cffa1c6f.js";import{Q as _}from"./QMarkupTable.c0307db7.js";import{_ as g,r as y,o as s,j as i,f as p,w as $,i as t,F as m,k as f,t as n,e as F}from"./index.bedc03b0.js";const k={name:"ProposalAttachments",data(){return{formData:{full_name:"",email:"",telephone:"",proposal:this.$route.params.proposal_id},attachments:[]}},created(){this.init()},methods:{init(){this.getAttachments()},getAttachments(){this.$api.get("attachments/").then(e=>{this.attachments=e.data,this.getFiles()})},getFiles(){for(let e=0;e<this.attachments.length;e++){const l=this.attachments[e];this.$api.get(`files/?proposal_id=${this.$route.params.proposal_id}&attachment_id=${l.id}`).then(r=>{var u=r.data;this.attachments.filter(o=>o.id==l.id)[0].files=u,e==this.attachments.length-1&&this.$bus.emit("attachments-updated",this.validateAttachments())})}},validateAttachments(){var e;for(let l=0;l<this.attachments.length;l++){const r=this.attachments[l];if(((e=r==null?void 0:r.files)==null?void 0:e.length)==0)return!1}return!0},deleteFile(e){confirm("Delete this File?")&&this.$api.delete(`files/${e}/`).then(l=>{l.status==204&&this.getFiles()})},openFile(e){window.open(e)}}},T=t("thead",null,[t("tr",null,[t("th",{align:"left"},"Title"),t("th",{align:"left",colspan:"2"},"Files")])],-1),B={class:"flex"};function q(e,l,r,u,o,d){const a=y("proposal-file-attachment");return s(),i("div",null,[p(_,{class:"q-my-sm",flat:"",bordered:""},{default:$(()=>[T,t("tbody",null,[(s(!0),i(m,null,f(o.attachments,c=>(s(),i("tr",{class:"q-tr--no-hover",key:c.id},[t("td",null,n(c.title),1),t("td",null,[t("div",B,[(s(!0),i(m,null,f(c.files,h=>(s(),F(b,{dense:"",key:h.id,class:"glossy",icon:"attachment",label:h.name,removable:e.$userHasAnyGroups(["applicant"])&&e.$authStore.currentUser.id==e.$proposalStore.currentProposal.user&&e.$proposalStore.currentProposal.status=="EDITING",clickable:"",onRemove:v=>d.deleteFile(h.id),onClick:v=>d.openFile(h.file)},null,8,["label","removable","onRemove","onClick"]))),128))])]),t("td",null,[p(a,{attachment_id:c.id,onFileUploaded:l[0]||(l[0]=h=>d.getFiles())},null,8,["attachment_id"])])]))),128))])]),_:1})])}var S=g(k,[["render",q]]);const C={name:"TeamMembers",data(){return{items:[]}},created(){this.init()},methods:{init(){this.getTeams()},getTeams(){this.$api.get(`teams/?proposal=${this.$route.params.proposal_id}`).then(e=>{this.items=e.data})}}},A=t("thead",null,[t("tr",null,[t("th",{align:"left"},"Full Name"),t("th",{align:"left"},"Email"),t("th",{align:"left"},"Telephone"),t("th",{align:"left"},"Role")])],-1);function U(e,l,r,u,o,d){return s(),i("div",null,[p(_,{class:"q-my-sm",flat:"",bordered:""},{default:$(()=>[A,t("tbody",null,[(s(!0),i(m,null,f(o.items,a=>(s(),i("tr",{class:"q-tr--no-hover",key:a.id},[t("td",null,n(a.full_name),1),t("td",null,n(a.email),1),t("td",null,n(a.telephone),1),t("td",null,n(a.role),1)]))),128))])]),_:1})])}var E=g(C,[["render",U]]);const x={name:"BudgetItems",data(){return{items:[]}},created(){this.init()},methods:{init(){this.getBudgets()},getBudgets(){this.$api.get(`budgets/?proposal=${this.$route.params.proposal_id}`).then(e=>{this.items=e.data})}}},I=t("thead",null,[t("tr",null,[t("th",{align:"left"},"Item"),t("th",{align:"left"},"Quantity"),t("th",{align:"left"},"Units"),t("th",{align:"left"},"Unit Cost (UGX)"),t("th",{align:"left"},"Total Cost (UGX)")])],-1),Q=t("tr",null,[t("td",{colspan:"4"},"Total"),t("td",null,"...")],-1);function w(e,l,r,u,o,d){return s(),i("div",null,[p(_,{class:"q-my-sm",flat:"",bordered:""},{default:$(()=>[I,t("tbody",null,[(s(!0),i(m,null,f(o.items,a=>(s(),i("tr",{key:a.id},[t("td",null,n(a.item),1),t("td",null,n(a.quantity),1),t("td",null,n(a.units),1),t("td",null,n(a.unit_cost),1),t("td",null,n(a.unit_cost*a.quantity),1)]))),128)),Q])]),_:1})])}var M=g(x,[["render",w]]);export{M as B,E as T,S as p};
