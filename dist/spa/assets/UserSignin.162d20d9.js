import{Q as d}from"./QInput.53c1df55.js";import{_ as h,r as _,o as w,h as g,g as s,a as t,w as a,t as p,j as c,f as x}from"./index.9b6d8f02.js";import{Q as f}from"./QSeparator.b2724df3.js";import{Q as D}from"./QForm.da5dcb33.js";import{Q as y}from"./QCardSection.f9ea1c28.js";import{Q as S}from"./QCard.4957859e.js";import"./use-key-composition.cd9c2a48.js";import"./use-dark.8dc51c8e.js";import"./uid.9faae8c0.js";import"./focus-manager.b507780d.js";import"./use-form.33fd784e.js";const v={data(){return{loading:!1,formData:{email:"",password:""},formErrors:{email:"",password:""},emailRules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],passwordRules:[e=>!!e||"Password is required"]}},created(){},methods:{login(){this.formErrors={},this.$utilsStore.setLoading(!0),this.formData.username=this.formData.email,this.$api.post("/accounts/login/",this.formData).then(e=>{const r=e.data.token,n=e.data.user;this.$authStore.setUserAndToken(n,r),this.$utilsStore.setLoading(!1);var i=this.$route.query._next||"/";this.$userHasAnyGroups(["reviewer"])&&(i="/proposal-reviews"),this.$router.push(i),this.$utilsStore.setLoading(!1)}).catch(e=>{this.$utilsStore.setLoading(!1),this.formErrors.email=e.response.data.error})},setFormData(){this.formData={email:"samuelitwaru@gmail.com",password:"bratz123"}},resetForm(){this.formData={email:this.formData.email,password:""}}}},b={align:"center"},Q={class:"flex justify-center"},E=s("h2",{class:"text-h6"},"Login",-1),V={class:"text-caption text-red"},R={class:"text-caption text-red"},k={class:""},q={class:"flex justify-between"},L=s("div",null,null,-1),F=s("small",null,"FORGOT PASSWORD",-1);function B(e,r,n,i,o,m){const u=_("router-link");return w(),g("div",b,[s("div",Q,[t(S,{class:"q-mt-l",style:{"min-width":"23rem"}},{default:a(()=>[t(y,null,{default:a(()=>[t(D,{onSubmit:m.login,ref:"form",onReset:m.resetForm},{default:a(()=>[E,s("div",null,[s("small",V,[s("strong",null,p(o.formErrors.email),1)])]),t(d,{outlined:"",dense:"",modelValue:o.formData.email,"onUpdate:modelValue":r[0]||(r[0]=l=>o.formData.email=l),label:"Email",type:"email",rules:o.emailRules,required:""},null,8,["modelValue","rules"]),t(d,{outlined:"",dense:"",modelValue:o.formData.password,"onUpdate:modelValue":r[1]||(r[1]=l=>o.formData.password=l),label:"Password",type:"password",rules:o.passwordRules,required:""},null,8,["modelValue","rules"]),s("small",R,p(o.formErrors.password),1),s("div",k,[s("div",q,[L,t(c,{type:"submit",color:"primary",label:"Login"})]),t(f,{spaced:""}),x(" Don't have an account? "),t(u,{to:"/index/account/signup"},{default:a(()=>[t(c,{type:"submit",flat:"",color:"primary",label:"Sign up"})]),_:1})]),t(f,{spaced:"",style:{width:"40%"}}),t(u,{to:"/index/account/password-reset",class:"q-my-auto"},{default:a(()=>[F]),_:1})]),_:1},8,["onSubmit","onReset"])]),_:1})]),_:1})])])}var H=h(v,[["render",B]]);export{H as default};
