import{Q as V}from"./QDate.47643531.js";import{Q as b}from"./QPopupProxy.a32b1761.js";import{m as x,V as T,W as h,aQ as k,n as _,U as E,p as n,Q as U,I as v,ai as N,D as R,_ as B,o as g,e as Q,w as o,i as r,f as l,j as P,F as j,k as A,h as p,t as u,l as S,v as F}from"./index.bedc03b0.js";import{Q as c}from"./QInput.f9de55cb.js";import{a as I,u as Y}from"./use-dark.efa299d0.js";import{Q as q}from"./QCardSection.e02d2dca.js";import{Q as C}from"./QSeparator.911a89de.js";import{Q as w}from"./QCard.bbe5bc56.js";import{Q as L}from"./QCardActions.9530d557.js";import{Q as G}from"./QForm.e807d490.js";import{Q as J}from"./QPage.09f94969.js";import"./use-cache.b0833c75.js";import"./use-form.95f651ae.js";import"./format.3e32b8d9.js";import"./QDialog.155e3071.js";import"./use-prevent-scroll.53746d9a.js";import"./scroll.5d411e84.js";import"./use-timeout.4ebc94f9.js";import"./focusout.95943440.js";import"./focus-manager.b507780d.js";import"./use-transition.d4fcd429.js";import"./QMenu.016265da.js";import"./selection.06496e30.js";import"./use-key-composition.2cb4102f.js";import"./use-split-attrs.11b1e3e4.js";import"./uid.42677368.js";var M=x({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:i}){const s=T(k,h);if(s===h)return console.error("QTimelineEntry needs to be child of QTimeline"),h;const f=_(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),a=_(()=>`q-timeline__dot text-${e.color||s.color}`),d=_(()=>s.layout==="comfortable"&&s.side==="left");return()=>{const t=E(i.default,[]);if(e.body!==void 0&&t.unshift(e.body),e.heading===!0){const y=[n("div"),n("div"),n(e.tag,{class:"q-timeline__heading-title"},t)];return n("div",{class:"q-timeline__heading"},d.value===!0?y.reverse():y)}let m;e.icon!==void 0?m=[n(U,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(m=[n("img",{class:"q-timeline__dot-img",src:e.avatar})]);const D=[n("div",{class:"q-timeline__subtitle"},[n("span",{},v(i.subtitle,[e.subtitle]))]),n("div",{class:a.value},m),n("div",{class:"q-timeline__content"},[n("h6",{class:"q-timeline__title"},v(i.title,[e.title]))].concat(t))];return n("li",{class:f.value},d.value===!0?D.reverse():D)}}}),O=x({name:"QTimeline",props:{...I,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:i}){const s=R(),f=Y(e,s.proxy.$q);N(k,e);const a=_(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(f.value===!0?" q-timeline--dark":""));return()=>n("ul",{class:a.value},v(i.default))}});const $={name:"UpdateCall",components:{},data(){return{loading:!1,showDialog:!1,call:null,formData:{title:""}}},computed:{timelineDates(){if(!this.call)return[];var e=[{title:"Call Start",name:"date_from",date:this.call.date_from,description:"",icon:"campaign"},{title:"Submission",name:"submission_date",date:this.call.submission_date,description:"",icon:"description"},{title:"Review",name:"review_date",date:this.call.review_date,description:"",icon:"search"},{title:"Selection",name:"selection_date",date:this.call.selection_date,description:"",icon:"check"},{title:"Call End",name:"date_to",date:this.call.date_to,description:"",icon:"stop"}];return e}},created(){this.getCall()},methods:{getCall(){this.$api.get(`calls/${this.$route.params.call_id}/`).then(e=>{e.status==200&&(this.call=e.data,this.formData=e.data,this.formData.date_range={from:this.formData.date_from,to:this.formData.date_to})})},updateCall(){this.formData.date_from=new Date(this.formData.date_range.from).toJSON().split("T")[0],this.formData.date_to=new Date(this.formData.date_range.to).toJSON().split("T")[0],this.$utilsStore.setLoading(!0),this.$api.put(`calls/${this.$route.params.call_id}/`,this.formData).then(e=>{e.status==200&&(this.call=e.data,this.$router.push("/calls/"),this.$utilsStore.setLoading(!1))})},setDateRange(){this.formData.date_from=this.formData.date_range.from,this.formData.date_to=this.formData.date_range.to}},watch:{showPopup(e,i){this.showDialog=e},showDialog(e,i){this.$emit("showPopupChanged",e)}}},K={class:"flex q-gutter-md"},W={class:"text-h6"},z=r("span",{class:"text-grey text-caption"},"From : ",-1),H=r("span",{class:"text-grey text-caption"},"To : ",-1);function X(e,i,s,f,a,d){return a.call?(g(),Q(J,{key:0,padding:""},{default:o(()=>[r("div",K,[l(O,{style:{width:"500px"},color:"secondary",layout:"dense"},{default:o(()=>[(g(!0),P(j,null,A(d.timelineDates,t=>(g(),Q(M,{key:t,icon:t.icon},{title:o(()=>[r("div",null,[p(u(e.$formatDate(t.date)||"Not Added!")+" ",1),l(c,{outlined:"",modelValue:a.formData[t.name],"onUpdate:modelValue":m=>a.formData[t.name]=m},{append:o(()=>[l(U,{name:"event",class:"cursor-pointer"},{default:o(()=>[l(b,{cover:"",breakpoint:1e3},{default:o(()=>[l(V,{mask:"YYYY-MM-DD",modelValue:a.formData[t.name],"onUpdate:modelValue":m=>a.formData[t.name]=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),subtitle:o(()=>[p(u(t.title),1)]),default:o(()=>[r("div",null,u(t.description),1)]),_:2},1032,["icon"]))),128))]),_:1}),l(G,{onSubmit:d.updateCall,class:"q-gutter-md flex justify-center"},{default:o(()=>[l(w,{style:{width:"500px"}},{default:o(()=>[l(q,null,{default:o(()=>[r("div",W,u(a.call.title),1)]),_:1}),l(C),l(q,{class:"q-pt-lg q-pb-md"},{default:o(()=>[l(c,{modelValue:a.formData.title,"onUpdate:modelValue":i[0]||(i[0]=t=>a.formData.title=t),label:"Title of your call",outlined:"",required:""},null,8,["modelValue"]),l(w,{flat:"",bordered:"",class:"flex items-center justify-between q-pa-sm q-mt-sm"},{default:o(()=>[r("div",null,[z,p(" "+u(e.$formatDate(a.formData.date_from)),1)]),r("div",null,[H,p(" "+u(e.$formatDate(a.formData.date_to)),1)]),l(S,{icon:"event",round:"",color:"primary"},{default:o(()=>[l(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[l(V,{onRangeEnd:d.setDateRange,modelValue:a.formData.date_range,"onUpdate:modelValue":i[1]||(i[1]=t=>a.formData.date_range=t),range:""},null,8,["onRangeEnd","modelValue"])]),_:1})]),_:1})]),_:1}),l(c,{class:"q-my-sm",modelValue:a.formData.submission_date,"onUpdate:modelValue":i[2]||(i[2]=t=>a.formData.submission_date=t),type:"date",label:"Applications Submission Deadline?",outlined:""},null,8,["modelValue"]),l(c,{class:"q-my-sm",modelValue:a.formData.review_date,"onUpdate:modelValue":i[3]||(i[3]=t=>a.formData.review_date=t),type:"date",label:"Applications Review Deadline?",outlined:""},null,8,["modelValue"]),l(c,{class:"q-my-sm",modelValue:a.formData.selection_date,"onUpdate:modelValue":i[4]||(i[4]=t=>a.formData.selection_date=t),type:"date",label:"Applications Selection Deadline?",outlined:""},null,8,["modelValue"])]),_:1}),l(C,{spaced:""}),l(L,{align:"right"},{default:o(()=>[l(S,{color:"primary",label:"Update",onClick:d.updateCall},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1})):F("",!0)}var qe=B($,[["render",X]]);export{qe as default};
