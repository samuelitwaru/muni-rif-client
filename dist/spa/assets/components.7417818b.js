import{Q as U,a as q}from"./QItem.41d22b85.js";import{Q as F}from"./QCard.78b7c44d.js";import{Q as re}from"./QList.ae152641.js";import{_ as D,r as G,o as m,e as b,w as s,f as l,g as A,h as y,i as n,R as Q,j as h,Q as j,F as L,k as B,l as w,t as _,m as Oe,n as f,p as P,q as kt,s as Y,u as V,v as Ne,x as St,y as Qe,z as $t,A as xt,B as ye,C as Ct,D as je,E as de,G as Dt,H as qt,I as Vt,J as Pt,K as Tt,L as Mt,M as Et,N as Le}from"./index.3671a223.js";import{Q as C}from"./QCardSection.54f69d89.js";import{Q as It}from"./QPage.e8da9ae1.js";import{D as Re}from"./DropdownCallMenu.d16a6e65.js";import{Q as we}from"./QItemLabel.8f35a27f.js";import{Q as Lt}from"./QBtnDropdown.2865dd5c.js";import{C as Rt}from"./ClosePopup.32e36c56.js";import{Q as I}from"./QSeparator.f4e84234.js";import{Q as me}from"./QChip.05b39f31.js";import{Q as se}from"./QCardActions.6c7f00ba.js";import{Q as J}from"./QDialog.8d8d8cb6.js";import{Q as K}from"./QInput.36128974.js";import{Q as ae}from"./QSelect.3b8a2420.js";import{Q as Se}from"./QForm.2b098fed.js";import Ut from"./ChangePassword.a64bd871.js";import{g as At}from"./api.258dad18.js";import{Q as Bt}from"./QUploader.c38a58bd.js";import{Q as pe}from"./QMarkupTable.4c97a209.js";import{c as Ge}from"./index.5ce110aa.js";import{Q as Ft}from"./QEditor.009376af.js";import{u as Ot,a as Nt,b as Qt}from"./use-form.820ebbed.js";import{T as jt}from"./TouchPan.a9e25187.js";import{u as Gt,a as Wt}from"./use-dark.dbbd0c9d.js";import{b as oe}from"./format.2bc25e5f.js";import{Q as ke}from"./QRadio.4ab26200.js";import{p as zt}from"./ProposalScoreSheets.24eec4d5.js";import{Q as Ht}from"./QSpinnerIos.d22af365.js";import"./QBtnGroup.e3f02e69.js";import"./QMenu.2c83730c.js";import"./use-timeout.26584f0c.js";import"./focus-manager.b507780d.js";import"./use-transition.1d5f554b.js";import"./scroll.624406d4.js";import"./uid.42677368.js";import"./use-prevent-scroll.53dc6540.js";import"./use-key-composition.a7274795.js";import"./use-split-attrs.d467856c.js";import"./axios.f8ca42f8.js";import"./QCircularProgress.dc7b61af.js";import"./use-file.e5919774.js";import"./touch.3df10340.js";import"./option-sizes.106c6cad.js";import"./QToolbarTitle.b2035143.js";import"./QPopupProxy.b8fe0c28.js";const Kt={},Yt=n("h2",{class:"text-h6 q-px-md"},"Developer Menu",-1);function Jt(e,o,r,d,t,i){const a=G("router-link");return m(),b(re,{bordered:"",separator:""},{default:s(()=>[Yt,l(F,null,{default:s(()=>[l(a,{to:"/account/signup"},{default:s(()=>[A((m(),b(U,null,{default:s(()=>[l(q,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[y("Signup")]),_:1})]),_:1})),[[Q]])]),_:1}),l(a,{to:"/account/signin"},{default:s(()=>[A((m(),b(U,{clickable:""},{default:s(()=>[l(q,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[y("Signin")]),_:1})]),_:1})),[[Q]])]),_:1}),l(a,{to:"/account/password-reset"},{default:s(()=>[A((m(),b(U,{clickable:""},{default:s(()=>[l(q,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[y("Forgort Password")]),_:1})]),_:1})),[[Q]])]),_:1}),l(a,{to:"/account"},{default:s(()=>[A((m(),b(U,{clickable:""},{default:s(()=>[l(q,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[y("Account details")]),_:1})]),_:1})),[[Q]])]),_:1}),l(a,{to:"/grant/create"},{default:s(()=>[A((m(),b(U,{clickable:""},{default:s(()=>[l(q,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[y("New Grant Application")]),_:1})]),_:1})),[[Q]])]),_:1}),l(a,{to:"/proposals/create"},{default:s(()=>[A((m(),b(U,{clickable:""},{default:s(()=>[l(q,{class:"q-pl-md q-pa-sm text-primary"},{default:s(()=>[y("Proposal")]),_:1})]),_:1})),[[Q]])]),_:1})]),_:1})]),_:1})}var Xt=D(Kt,[["render",Jt]]);const Zt={},eo=n("h2",{class:"text-h6 q-px-md"},"Developer Menu",-1),to={class:"row q-ma-xs"},oo={class:"col"},lo={class:"col q-my-auto",align:"center"},ao={class:"flex q-pa-sm"};function ro(e,o,r,d,t,i){const a=G("router-link"),u=G("create-proposal-dialog"),p=G("user-logout");return m(),h("div",null,[eo,n("div",to,[n("div",oo,[l(re,null,{default:s(()=>[l(a,{to:"/account/signup"},{default:s(()=>[A((m(),b(U,{clickable:""},{default:s(()=>[l(q,{avatar:""},{default:s(()=>[l(j,{color:"primary",name:"arrow_forward"})]),_:1}),l(q,null,{default:s(()=>[y("Signup")]),_:1})]),_:1})),[[Q]])]),_:1}),l(a,{to:"/account/signin"},{default:s(()=>[A((m(),b(U,{clickable:""},{default:s(()=>[l(q,{avatar:""},{default:s(()=>[l(j,{color:"primary",name:"arrow_forward"})]),_:1}),l(q,null,{default:s(()=>[y("Sign in")]),_:1})]),_:1})),[[Q]])]),_:1}),l(a,{to:"/account/password-reset"},{default:s(()=>[A((m(),b(U,{clickable:""},{default:s(()=>[l(q,{avatar:""},{default:s(()=>[l(j,{color:"primary",name:"arrow_forward"})]),_:1}),l(q,null,{default:s(()=>[y("Forgot Password")]),_:1})]),_:1})),[[Q]])]),_:1}),l(a,{to:"/account/profile"},{default:s(()=>[A((m(),b(U,{clickable:""},{default:s(()=>[l(q,{avatar:""},{default:s(()=>[l(j,{color:"primary",name:"arrow_forward"})]),_:1}),l(q,null,{default:s(()=>[y("Profile")]),_:1})]),_:1})),[[Q]])]),_:1}),l(a,{to:"/account/password"},{default:s(()=>[A((m(),b(U,{clickable:""},{default:s(()=>[l(q,{avatar:""},{default:s(()=>[l(j,{color:"primary",name:"arrow_forward"})]),_:1}),l(q,null,{default:s(()=>[y("Change Password")]),_:1})]),_:1})),[[Q]])]),_:1}),l(a,{to:"/proposals"},{default:s(()=>[A((m(),b(U,{clickable:""},{default:s(()=>[l(q,{avatar:""},{default:s(()=>[l(j,{color:"primary",name:"arrow_forward"})]),_:1}),l(q,null,{default:s(()=>[y("Proposals")]),_:1})]),_:1})),[[Q]])]),_:1})]),_:1})]),n("div",lo,[l(u)])]),n("div",ao,[l(p)])])}var so=D(Zt,[["render",ro]]);const no={data(){return{}},computed:{menuItems(){return this.$userHasAnyGroups(["applicant"])?[{name:"My Proposals",icon:"note",route:"/applicant/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["reviewer"])?[{name:"Reviews",icon:"note",route:"/proposal-reviews"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["grants_officer"])?[{name:"All Proposals",icon:"note",route:"/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:[]}},created(){},methods:{navigateTo(e){this.$router.push(e)}}},io={class:"q-px-md"};function uo(e,o,r,d,t,i){const a=G("router-link");return m(),h("div",null,[l(re,null,{default:s(()=>[(m(!0),h(L,null,B(i.menuItems,u=>(m(),h("div",{key:u.name},[l(a,{to:u.route,block:""},{default:s(()=>[l(w,{color:"black",class:"full-width",align:"left",icon:u.icon,flat:""},{default:s(()=>[n("span",io,_(u.name),1)]),_:2},1032,["icon"])]),_:2},1032,["to"])]))),128))]),_:1})])}var co=D(no,[["render",uo]]);const mo={data(){return{}},computed:{menuItems(){return this.$userHasAnyGroups(["applicant"])?[{name:"My Proposals",icon:"note",route:"/applicant/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["reviewer"])?[{name:"Reviews",icon:"note",route:"/proposal-reviews"},{name:"Profile",icon:"person",route:"/account/profile"}]:this.$userHasAnyGroups(["grants_officer"])?[{name:"All Proposals",icon:"note",route:"/proposals"},{name:"Profile",icon:"person",route:"/account/profile"}]:[]}},created(){},methods:{navigateTo(e){this.$router.push(e)}}},po={class:"flex justify-cente"},fo={class:"q-pl-sm"};function ho(e,o,r,d,t,i){const a=G("router-link");return m(),b(F,{class:"my-card q-pa-sm",flat:"",bordered:""},{default:s(()=>[n("div",po,[(m(!0),h(L,null,B(i.menuItems,u=>(m(),h("div",{key:u,class:"q-m-sm text-center"},[l(a,{to:u.route},{default:s(()=>[l(w,{color:"primary",flat:"",outline:""},{default:s(()=>[l(j,{name:u.icon},null,8,["name"]),n("label",fo,_(u.name.toUpperCase()),1)]),_:2},1024)]),_:2},1032,["to"])]))),128))])]),_:1})}var _o=D(mo,[["render",ho]]);const vo=["top","middle","bottom"];var go=Oe({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>vo.includes(e)}},setup(e,{slots:o}){const r=f(()=>e.align!==void 0?{verticalAlign:e.align}:null),d=f(()=>{const t=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(t!==void 0?` text-${t}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>P("div",{class:d.value,style:r.value,role:"status","aria-label":e.label},kt(o.default,e.label!==void 0?[e.label]:[]))}});const bo={class:"q-pt-xl flex flex-center"},yo={class:"q-py-lg flex flex-center"},wo={class:"text-h6"},ko=Object.assign({name:"MainPage",components:{DropdownCallMenu:Re},data(){return{showPopup:!1,menuItems:Y([{name:"SUBMISSIONS",route:"/go/proposals/submitted",icon:"description",color:"secondary",roles:["grants_officer"],count:0,click:()=>{this.$utilsStore.setStateData("ProposalList_status_query","SUBMITTED")}},{name:"CALLS",route:"/calls",icon:"campaign",color:"secondary",roles:["grants_officer"],count:0},{name:"REVIEWES",route:"/go/proposals/reviewed",icon:"search",color:"secondary",roles:["grants_officer"],click:()=>{this.$utilsStore.setStateData("ProposalList_status_query","REVIEWED")}},{name:"SELECTED",route:"/go/proposals/selected",icon:"check_circle_outline",color:"secondary",roles:["grants_officer"],click:()=>{this.$utilsStore.setStateData("ProposalList_status_query","SELECTED")}},{name:"THEMES",route:"/themes",icon:"apps",color:"secondary",roles:["grants_officer"]},{name:"REVIEWERS",route:"/reviewers",icon:"people",color:"secondary",roles:["grants_officer"]},{name:"APPLICANTS",route:"/applicants",icon:"people",color:"secondary",roles:["grants_officer"]},{name:"MY PROPOSALS",route:"/applicant/proposals",icon:"search",color:"secondary",roles:["applicant"]},{name:"Apply",route:"",icon:"app_registration",color:"secondary",roles:["applicant"],click:()=>{this.showPopup=!0}},{name:"Proposal Reviews",route:"/proposal-reviews",icon:"search",color:"secondary",roles:["reviewer"]}]),counts:{SELECTED:0,SUBMISSIONS:0}}},created(){this.getCalls()},methods:{getCalls(){this.$api.get("calls/").then(e=>{if(this.calls=e.data,this.calls.length){var o=this.calls[0];this.setCurrentCall(this.$dataStore.currentCall||o),this.getCounts()}else this.setCurrentCall({title:"No Call Found"})})},setCurrentCall(e){this.currentCall=e,this.$dataStore.setCall(this.currentCall)},getCounts(){this.$api.get(`proposals/count/?call=${this.$dataStore.currentCall.id}&is_selected=true`).then(e=>{(e.status=200)&&(this.counts.SELECTED=e.data.count)}),this.$api.get(`proposals/count/?call=${this.$dataStore.currentCall.id}&status=SUBMITTED`).then(e=>{(e.status=200)&&(this.counts.SUBMISSIONS=e.data.count)})}}},{__name:"MainMenu",setup(e){return(o,r)=>{const d=G("create-proposal-dialog"),t=G("router-link"),i=G("useful-docs");return m(),b(It,null,{default:s(()=>[l(d,{showButton:!1,showPopup:o.showPopup,onShowPopupChanged:r[0]||(r[0]=a=>this.showPopup=a)},null,8,["showPopup"]),n("div",bo,[o.$userHasAnyGroups(["grants_officer"])?(m(),b(Re,{key:0})):V("",!0)]),n("div",yo,[(m(!0),h(L,null,B(o.menuItems,a=>(m(),b(t,{key:a.name,to:a.route,onClick:a.click},{default:s(()=>[o.$userHasAnyGroups(a.roles)||a.roles.length==0?(m(),b(w,{key:0,outlined:"",class:Ne(`text-center q-pa-md q-ma-sm text-${a.color}`),style:{width:"10rem",height:"10rem"}},{default:s(()=>[o.counts[a.name]?(m(),b(go,{key:0,class:"q-pa-sm justify-center",style:{width:"30px"},color:"primary",floating:"",rounded:""},{default:s(()=>[y(_(o.counts[a.name]),1)]),_:2},1024)):V("",!0),l(j,{name:a.icon,size:"xl"},null,8,["name"]),l(C,null,{default:s(()=>[n("div",wo,_(a.name),1)]),_:2},1024)]),_:2},1032,["class"])):V("",!0)]),_:2},1032,["to","onClick"]))),128))]),l(i)]),_:1})}}}),So={data(){return{}},computed:{menuItems(){return this.$userHasAnyGroups(["applicant"])?[{name:"REVIEWS",icon:"list",route:`/applicant/proposals/${this.$proposalStore.currentProposal.id}/reviews`},{name:"TEAM",icon:"people",route:`/applicant/proposals/${this.$proposalStore.currentProposal.id}/team`},{name:"REPORTS",icon:"book",route:`/applicant/proposals/${this.$proposalStore.currentProposal.id}/reports`}]:this.$userHasAnyGroups(["reviewer"])?[{name:"REVIEWS",icon:"list",route:`/proposal-reviews/${this.$proposalStore.currentProposal.id}/reviews`},{name:"TEAM",icon:"people",route:`/proposal-reviews/${this.$proposalStore.currentProposal.id}/team`}]:this.$userHasAnyGroups(["grants_officer"])?[{name:"REVIEWS",icon:"list",route:`/proposals/${this.$proposalStore.currentProposal.id}/reviewers`},{name:"TEAM",icon:"people",route:`/proposals/${this.$proposalStore.currentProposal.id}/team`}]:[]}},methods:{navigateTo(e){this.$router.push(e)}}};function $o(e,o,r,d,t,i){const a=G("router-link");return m(),h("div",null,[l(Lt,{flat:"",dense:"","dropdown-icon":"more_vert"},{default:s(()=>[l(re,{class:"q-py-sm"},{default:s(()=>[(m(!0),h(L,null,B(i.menuItems,u=>(m(),b(a,{key:u,to:u.route},{default:s(()=>[A((m(),b(U,{dense:"",clickable:""},{default:s(()=>[l(q,null,{default:s(()=>[l(we,null,{default:s(()=>[l(j,{name:u.icon},null,8,["name"]),y(" "+_(u.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Rt]])]),_:2},1032,["to"]))),128))]),_:1})]),_:1})])}var xo=D(So,[["render",$o]]);const Co={data(){return{files:[{name:"MUNIRIF_PROPOSAL_GUIDELINES_Round_2",url:"https://munirif.pythonanywhere.com/media/MUNIRIF_PROPOSAL_GUIDELINES_Round_2.pdf"},{name:"MUNIRIF_Round_Two_Call_Final",url:"https://munirif.pythonanywhere.com/media/MUNIRIF_Round_Two_Call_Final.pdf"}]}},methods:{openFile(e){window.open(e)}}},Do=n("div",{class:"text-h6"},"Useful Documents",-1);function qo(e,o,r,d,t,i){return m(),h("div",null,[l(F,{class:"my-card q-ma-sm",flat:"",bordered:""},{default:s(()=>[l(C,null,{default:s(()=>[Do]),_:1}),l(I),l(se,{vertical:""},{default:s(()=>[(m(!0),h(L,null,B(t.files,a=>(m(),b(me,{color:"secondary",key:a.id,class:"glossy",icon:"note",label:a.name,clickable:"",onClick:u=>i.openFile(a.url)},null,8,["label","onClick"]))),128))]),_:1})]),_:1})])}var Vo=D(Co,[["render",qo]]);const Po={data(){return{messages:["Creating new ideas...","Transforming Lives..."],currentMessageIndex:0,currentText:"",currentIndex:0,showCursor:!0}},mounted(){this.typeText()},methods:{typeText(){this.currentIndex<this.messages[this.currentMessageIndex].length?(this.currentText+=this.messages[this.currentMessageIndex][this.currentIndex],this.currentIndex++,setTimeout(this.typeText,100)):setTimeout(this.deleteText,1e3)},deleteText(){this.currentIndex>0?(this.currentText=this.currentText.slice(0,-1),this.currentIndex--,setTimeout(this.deleteText,50)):(this.currentMessageIndex=(this.currentMessageIndex+1)%this.messages.length,setTimeout(this.typeText,1e3))}}},To={align:"center",class:"text-h5"},Mo={key:0,class:"cursor"};function Eo(e,o,r,d,t,i){return m(),h("div",null,[n("p",To,[n("span",null,_(t.currentText),1),t.showCursor?(m(),h("span",Mo,"|")):V("",!0)])])}var Io=D(Po,[["render",Eo]]);const Lo={data(){return{loading:!1,showDialog:!1}},methods:{showConfirmationDialog(){this.showDialog=!0},cancelLogout(){this.showDialog=!1},confirmLogout(){this.$utilsStore.setLoading(!0),this.$api.get("/accounts/logout/").then(e=>{this.$router.push("/index/account/signin"),this.$authStore.clearUserAndToken(),this.$utilsStore.setLoading(!1),this.cancelLogout()})}}},Ro={key:0},Uo=n("span",{class:"q-body1"},"Are you sure you want to log out?",-1);function Ao(e,o,r,d,t,i){return e.$authStore.isLoggedIn?(m(),h("div",Ro,[l(w,{onClick:i.showConfirmationDialog,dense:"",flat:"",color:"primary"},{default:s(()=>[y("Logout")]),_:1},8,["onClick"]),l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[0]||(o[0]=a=>t.showDialog=a)},{default:s(()=>[l(F,null,{default:s(()=>[l(C,{class:"q-pa-md"},{default:s(()=>[Uo]),_:1}),l(se,{align:"right"},{default:s(()=>[l(w,{dense:"",flat:"",onClick:i.cancelLogout,color:"primary"},{default:s(()=>[y("Cancel")]),_:1},8,["onClick"]),l(w,{onClick:i.confirmLogout,color:"primary",class:"q-ml-md"},{default:s(()=>[y("Logout")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):V("",!0)}var Bo=D(Lo,[["render",Ao]]);const Fo={data(){return{user:this.$authStore.currentUser,loading:!1,faculties:[],departments:[],qualifications:[],formData:{email:"",first_name:"",last_name:"",phone:"",gender:"",faculty:null,department:null,qualification:null,password:"",confirm_password:""},emailRules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],nameRules:[e=>!!e||"Field is required"],phoneRules:[e=>!!e||"Telephone number is required",e=>/^[0-9]{10}$/.test(e)||"Telephone number must be 10 digits"],passwordRules:[e=>!!e||"Password is required",e=>e.length>=8||"Password must be at least 8 characters long"],confirmPasswordRules:[e=>!!e||"Confirm Password is required",e=>e===this.formData.password||"Passwords do not match"],errorResponse:{}}},created(){this.setFormData(),this.getFaculties(),this.getQualifications()},methods:{updateUserProfile(){this.$utilsStore.setLoading(!0),this.formData.username=this.formData.email,this.formData.token=this.$authStore.token,this.$api.post("accounts/update-user/",this.formData).then(e=>{const o=e.data.token,r=e.data.user;this.$authStore.setUserAndToken(r,o),this.$utilsStore.setLoading(!1)}).catch(e=>{this.$utilsStore.setLoading(!1),this.errorResponse=e.response})},getFaculties(){this.$api.get("faculties/").then(e=>{this.faculties=e.data})},getQualifications(){this.$api.get("qualifications/").then(e=>{this.qualifications=e.data})},setFormData(){var e,o,r,d,t,i,a,u;this.formData={email:this.user.email,first_name:this.user.first_name,last_name:this.user.last_name,phone:(e=this.user.profile)==null?void 0:e.phone,faculty:(r=(o=this.user.profile)==null?void 0:o.faculty)==null?void 0:r.id,department:(t=(d=this.user.profile)==null?void 0:d.department)==null?void 0:t.id,qualification:(a=(i=this.user.profile)==null?void 0:i.qualification)==null?void 0:a.id,designation:(u=this.user.profile)==null?void 0:u.designation}}}},Oo={align:"center"},No=n("h4",{class:"text-h6 q-my-sm"},"Update Profile",-1),Qo={class:"row q-col-gutter-xs"},jo={class:"col"},Go={class:"col"},Wo={class:"row q-col-gutter-xs"},zo={class:"col"},Ho={class:"col"},Ko={class:"row q-col-gutter-xs q-my-sm"},Yo={class:"col"},Jo={class:"col"},Xo={class:"row q-col-gutter-xs"},Zo={class:"col"},el={class:"col"},tl={class:"flex flex-center"};function ol(e,o,r,d,t,i){return m(),h("div",Oo,[No,l(F,{class:"q-ma-sm q-pa-md",style:{"min-width":"20rem"}},{default:s(()=>[l(Se,{onSubmit:i.updateUserProfile},{default:s(()=>{var a;return[n("div",Qo,[n("div",jo,[l(K,{outlined:"",dense:"",modelValue:t.formData.first_name,"onUpdate:modelValue":o[0]||(o[0]=u=>t.formData.first_name=u),label:"First Name",rules:t.nameRules,required:""},null,8,["modelValue","rules"])]),n("div",Go,[l(K,{outlined:"",dense:"",modelValue:t.formData.last_name,"onUpdate:modelValue":o[1]||(o[1]=u=>t.formData.last_name=u),label:"Last Name",rules:t.nameRules,required:""},null,8,["modelValue","rules"])])]),n("div",Wo,[n("div",zo,[l(K,{outlined:"",dense:"",modelValue:t.formData.email,"onUpdate:modelValue":o[2]||(o[2]=u=>t.formData.email=u),label:"Email",type:"email",rules:t.emailRules,required:""},null,8,["modelValue","rules"])]),n("div",Ho,[l(K,{outlined:"",dense:"",modelValue:t.formData.phone,"onUpdate:modelValue":o[3]||(o[3]=u=>t.formData.phone=u),label:"Telephone Number",type:"tel",rules:t.phoneRules,required:""},null,8,["modelValue","rules"])])]),n("div",Ko,[n("div",Yo,[l(ae,{outlined:"",dense:"",modelValue:t.formData.faculty,"onUpdate:modelValue":o[4]||(o[4]=u=>t.formData.faculty=u),options:t.faculties,"option-value":"id","option-label":"name",label:"Faculty","emit-value":"","map-options":""},null,8,["modelValue","options"])]),n("div",Jo,[l(ae,{outlined:"",dense:"",modelValue:t.formData.department,"onUpdate:modelValue":o[5]||(o[5]=u=>t.formData.department=u),options:(a=this.faculties.find(u=>u.id===this.formData.faculty))==null?void 0:a.departments,"option-value":"id","option-label":"name",label:"Department","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),n("div",Xo,[n("div",Zo,[l(ae,{dense:"",outlined:"",modelValue:t.formData.qualification,"onUpdate:modelValue":o[6]||(o[6]=u=>t.formData.qualification=u),options:t.qualifications,label:"Qualification","option-value":"id","option-label":"name","map-options":"","emit-value":""},null,8,["modelValue","options"])]),n("div",el,[l(K,{outlined:"",dense:"",modelValue:t.formData.designation,"onUpdate:modelValue":o[7]||(o[7]=u=>t.formData.designation=u),label:"Your Designation",rules:t.nameRules,required:""},null,8,["modelValue","rules"])])]),n("div",tl,[l(w,{type:"submit",color:"primary",label:"Update Profile"})])]}),_:1},8,["onSubmit"])]),_:1})])}var ll=D(Fo,[["render",ol]]);const al={props:{showButton:{type:Boolean,required:!1,default:!0},showPopup:{type:Boolean,required:!1,default:!1}},data(){var e,o;return{loading:!1,showDialog:!1,themes:[],formData:{title:"",theme:null,call:(o=(e=this.$dataStore)==null?void 0:e.currentCall)==null?void 0:o.id},formErrors:{}}},created(){var e,o;At().then(r=>this.themes=r),this.formData.call=(o=(e=this.$dataStore)==null?void 0:e.currentCall)==null?void 0:o.id},methods:{createProposal(){console.log(this.formData),this.$utilsStore.setLoading(!0),this.formErrors={},this.formData.user=this.$authStore.currentUser.id,this.$api.post("proposals/",this.formData).then(e=>{this.$router.push(`/applicant/proposals/${e.data.id}`),this.$utilsStore.setLoading(!1),this.showDialog=!1}).catch(e=>{this.formErrors=e.response.data,this.$utilsStore.setLoading(!1)})},cancelCreate(){this.showDialog=!1},setFormData(){this.formData={title:""}}},watch:{showPopup(e,o){this.showDialog=e},showDialog(e,o){this.$emit("showPopupChanged",e)}}},rl=n("div",{class:"text-h6"},"New Project Proposal",-1),sl={class:"text-red"},nl={class:"q-ma-xs"},il=n("br",null,null,-1),ul={class:"text-red"},cl={class:"q-ma-xs"};function dl(e,o,r,d,t,i){return m(),h("div",null,[r.showButton?(m(),b(w,{key:0,label:"New Proposal",color:"primary",onClick:o[0]||(o[0]=a=>t.showDialog=!0)})):V("",!0),l(Se,{onSubmit:i.createProposal,class:"q-gutter-md"},{default:s(()=>[l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[3]||(o[3]=a=>t.showDialog=a),persistent:""},{default:s(()=>[l(F,{style:{width:"500px"}},{default:s(()=>[l(C,null,{default:s(()=>[rl]),_:1}),l(I),l(C,{class:"q-pt-lg q-pb-md"},{default:s(()=>{var a,u;return[l(K,{modelValue:t.formData.title,"onUpdate:modelValue":o[1]||(o[1]=p=>t.formData.title=p),label:"Title of your proposal",outlined:"",required:""},null,8,["modelValue"]),n("div",sl,[n("ul",nl,[(m(!0),h(L,null,B((a=t.formErrors)==null?void 0:a.title,p=>(m(),h("li",{key:p},_(p),1))),128))])]),il,l(ae,{modelValue:t.formData.theme,"onUpdate:modelValue":o[2]||(o[2]=p=>t.formData.theme=p),options:t.themes,label:"Select Theme",outlined:"","option-value":"id","option-label":"title","map-options":"","emit-value":""},null,8,["modelValue","options"]),n("div",ul,[n("ul",cl,[(m(!0),h(L,null,B((u=t.formErrors)==null?void 0:u.theme,p=>(m(),h("li",{key:p},_(p),1))),128))])])]}),_:1}),l(I,{spaced:""}),l(se,{align:"right"},{default:s(()=>[l(w,{flat:"",color:"primary",label:"Cancel",onClick:i.cancelCreate},null,8,["onClick"]),l(w,{color:"primary",label:"Create",onClick:i.createProposal},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])])}var ml=D(al,[["render",dl]]);const pl={props:["attachment_id"],data(){return{acceptedFileTypes:"application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",modalVisible:!1,uploadUrl:`${this.$api.getUri()}/files/`,uploadHeaders:{},filesToUpload:[],uploadedFiles:[]}},methods:{onFileAdded(e){e.forEach(o=>{console.dir(o),o.type&&this.acceptedFileTypes.includes(o.type)&&(this.uploadFile(o),this.filesToUpload.push(o))})},onBrowse(e){var o=Array.from(e.target.files);this.onFileAdded(o)},uploadFile(e){const o=new FormData;o.append("file",e),o.append("name",e.name),o.append("attachment",this.attachment_id),o.append("proposal",this.$route.params.proposal_id),this.$api.post(this.uploadUrl,o,{headers:this.uploadHeaders}).then(r=>{this.uploadedFiles.push(e),this.filesToUpload=this.filesToUpload.filter(d=>d.key!=e.key),this.uploadedFiles=[],this.modalVisible=!1,this.$emit("file-uploaded")}).catch(r=>{console.log(r)})}}},fl={key:0},hl=n("div",{class:"text-h6"},"Attachments",-1),_l=n("div",{class:"text-center q-my-auto q-py-lg",style:{"background-color":"#ffffff",color:"#000000"}}," Drag and drop files here ",-1),vl={class:"text-center",style:{"background-color":"#ffffff",color:"#000000"}},gl=n("br",null,null,-1),bl=n("br",null,null,-1),yl=["accept"],wl=n("div",null,[n("label",{for:"files",class:"button-label"}," Browse ")],-1),kl=n("div",{align:"center"},[n("br"),y(" Only "),n("strong",null,"PDF, WORD, EXCEL"),y(" are accepted ")],-1);function Sl(e,o,r,d,t,i){var a,u;return((a=e.$proposalStore.currentProposal)==null?void 0:a.status)=="EDITING"&&e.$authStore.currentUser.id==((u=e.$proposalStore.currentProposal)==null?void 0:u.user)?(m(),h("div",fl,[l(w,{color:"primary",icon:"attachment",label:"Add",dense:"",flat:"",onClick:o[0]||(o[0]=p=>t.modalVisible=!0)}),l(J,{modelValue:t.modalVisible,"onUpdate:modelValue":o[4]||(o[4]=p=>t.modalVisible=p)},{default:s(()=>[l(F,{style:{width:"500px"}},{default:s(()=>[l(C,{class:"flex justify-between q-pa-sm text-center"},{default:s(()=>[hl,l(w,{color:"primary",icon:"close",flat:"",onClick:o[1]||(o[1]=p=>{t.uploadedFiles=[],t.modalVisible=!1})})]),_:1}),l(I,{spaced:""}),l(C,{class:"q-pa-sm"},{default:s(()=>[n("div",null,[l(Bt,{url:t.uploadUrl,multiple:"",onAdded:i.onFileAdded,style:{width:"100%"},flat:""},{header:s(()=>[_l,n("div",vl,[y(" or "),gl,bl,n("input",{onChange:o[2]||(o[2]=(...p)=>i.onBrowse&&i.onBrowse(...p)),type:"file",id:"files",class:"hidden",multiple:"",accept:t.acceptedFileTypes},null,40,yl),wl])]),list:s(()=>[l(re,{separator:"",dense:""},{default:s(()=>[(m(!0),h(L,null,B(t.filesToUpload,p=>(m(),b(U,{key:p.__key},{default:s(()=>[l(q,null,{default:s(()=>[l(we,{class:"full-width ellipsis"},{default:s(()=>[y(_(p.name),1)]),_:2},1024),l(we,{caption:""},{default:s(()=>[y(_(p.__sizeLabel)+" "+_(p.__progressLabel),1)]),_:2},1024)]),_:2},1024),l(q,{top:"",side:""},{default:s(()=>[l(St,{size:"20px",color:"primary"})]),_:1})]),_:2},1024))),128))]),_:1}),kl]),_:1},8,["url","onAdded"])])]),_:1}),l(C,{class:"q-pa-sm"},{default:s(()=>[(m(!0),h(L,null,B(t.uploadedFiles,p=>(m(),b(me,{dense:"",key:p.__key,class:"glossy",icon:"check",label:p.name},null,8,["label"]))),128))]),_:1}),l(I,{spaced:""}),l(C,{align:"right"},{default:s(()=>[l(w,{color:"primary",label:"Done",onClick:o[3]||(o[3]=p=>{t.uploadedFiles=[],t.modalVisible=!1})})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):V("",!0)}var $l=D(pl,[["render",Sl]]);const xl={props:{proposal:{type:Object,required:!0},disabled:{type:Boolean,required:!0}},data(){return{modalVisible:!1,sections:[]}},computed:{wordCounts(){let e={};for(let o=0;o<this.sections.length;o++){const r=this.sections[o];e[r.name]=this.countWordsInHtml(this.proposal[r.name]||"")}return e},wordCountsValid(){let e={};for(let o=0;o<this.sections.length;o++){const r=this.sections[o];if(e[r.name]>=this.sections[r.name])return!1}return!0}},created(){this.getSections()},methods:{getProposal(){this.$api.get(`/proposals/${this.$route.params.proposal_id}/`)},submitProposal(){this.$utilsStore.setLoading(!0);const e=new Date;var o={status:"SUBMITTED",submission_date:e.toJSON().split("T")[0]};this.$api.patch(`/proposals/${this.$route.params.proposal_id}/`,o).then(r=>{this.$utilsStore.setLoading(!1),location.reload()})},getSections(){this.$api.get("sections/").then(e=>{this.sections=e.data})},countWordsInHtml(e){return Ge.load(e)("body").text().split(/\s+/).length-1}}},Cl={key:0},Dl=n("thead",null,[n("tr",{class:"bg-grey-3"},[n("th",{class:"text-left"},"Section"),n("th",{class:"text-left"},"Limit"),n("th",{class:"text-left"},"Words"),n("th",{class:"text-left"})])],-1),ql={key:0},Vl={class:"text-left"},Pl={class:"text-center"},Tl={class:"text-left"},Ml={class:"text-left"},El=n("p",{class:"q-pa-md"},"Do you wish to proceed?",-1);function Il(e,o,r,d,t,i){var u,p;const a=G("alert-msg");return((u=r.proposal)==null?void 0:u.status)=="EDITING"&&e.$authStore.currentUser.id==((p=r.proposal)==null?void 0:p.user)?(m(),h("div",Cl,[l(w,{color:"primary",label:"Submit Application",disabled:r.disabled,onClick:o[0]||(o[0]=S=>t.modalVisible=!0)},null,8,["disabled"]),l(J,{modelValue:t.modalVisible,"onUpdate:modelValue":o[2]||(o[2]=S=>t.modalVisible=S)},{default:s(()=>[l(F,null,{default:s(()=>[l(C),l(I),l(C,null,{default:s(()=>[l(pe,{flat:"",dense:"",bordered:"",separator:"vertical"},{default:s(()=>[Dl,n("tbody",null,[(m(!0),h(L,null,B(t.sections,S=>(m(),h(L,{key:S.id},[S.lower_limit==50?(m(),h("tr",ql,[n("td",Vl,_(S.title),1),n("td",Pl,_(S.lower_limit)+" - "+_(S.word_limit),1),n("td",Tl,_(i.wordCounts[S.name]),1),n("td",Ml,[i.wordCounts[S.name]<=S.word_limit?(m(),b(j,{key:0,name:"check",class:"text-green"})):(m(),b(j,{key:1,class:"text-red",name:"close"}))])])):V("",!0)],64))),128))])]),_:1}),l(I,{spaced:""}),l(a,{message:"You will not be able to edit this proposal once submitted.",icon:"crisis_alert"}),El]),_:1}),l(I),l(C,{align:"right"},{default:s(()=>[l(w,{color:"primary",flat:"",label:"Cancel",onClick:o[1]||(o[1]=S=>t.modalVisible=!1)}),l(w,{disabled:!i.wordCountsValid,color:"primary",label:"Submit",onClick:i.submitProposal},null,8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):V("",!0)}var Ll=D(xl,[["render",Il]]);const Rl={props:{proposal:{type:Object,required:!0},score:{required:!0}},data(){return{modalVisible:!0,loading:!1}},methods:{acceptReview(){this.$utilsStore.setLoading(!0),this.$api.patch(`/scores/${this.score.id}/`,{status:"IN PROGRESS",accepted_at:new Date(Date.UTC())}).then(e=>{location.reload()})}}},Ul={key:0},Al=n("div",{class:"text-h6"},"Proposal Review Invitation",-1),Bl={class:"q-pa-md"},Fl=n("p",{class:"q-pa-md"},[y(" Click the "),n("strong",null,"ACCEPT"),y(" button to start your review ")],-1);function Ol(e,o,r,d,t,i){var a,u;return r.score&&((a=r.score)==null?void 0:a.status)!="IN PROGRESS"&&((u=r.score)==null?void 0:u.status)!="COMPLETED"&&this.$userHasAnyGroups(["reviewer"])?(m(),h("div",Ul,[l(J,{modelValue:t.modalVisible,"onUpdate:modelValue":o[0]||(o[0]=p=>t.modalVisible=p),persistent:""},{default:s(()=>[l(F,null,{default:s(()=>[l(C,null,{default:s(()=>[Al]),_:1}),l(I),l(C,null,{default:s(()=>[n("p",Bl,' You have been inivited to review this proposal on "'+_(r.proposal.title)+'". ',1),Fl]),_:1}),l(I),l(C,{align:"right"},{default:s(()=>[l(w,{color:"primary",label:"Accept",onClick:i.acceptReview},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):V("",!0)}var Nl=D(Rl,[["render",Ol]]);const Ql={props:{proposal:{type:Object,required:!0},section:{type:Object,required:!0}},data(){return{loading:!1,showDialog:!1,formData:{}}},computed:{numWords(){return this.countWordsInHtml(this.formData[this.section.name]||"")}},methods:{updateSection(){this.$utilsStore.setLoading(!0),this.$api.patch(`proposals/${this.$route.params.proposal_id}/`,this.formData).then(e=>{this.$emit("proposal-updated",e.data),this.$utilsStore.setLoading(!1),this.showDialog=!1})},cancelCreate(){this.showDialog=!1},countWordsInHtml(e){return Ge.load(e)("body").text().split(/\s+/).length-1}},mounted(){this.formData[this.section.name]=this.proposal[this.section.name]||""},watch:{proposal(e){this.formData[this.section.name]=e[this.section.name]||""}}},jl={key:0},Gl={key:0,class:"text-red text-caption"},Wl={class:"text-h6"},zl={key:0,class:"text-red text-caption"},Hl={align:"right"},Kl={key:0,class:"text-red text-caption"};function Yl(e,o,r,d,t,i){var a,u;return((a=r.proposal)==null?void 0:a.status)=="EDITING"&&e.$authStore.currentUser.id==((u=r.proposal)==null?void 0:u.user)?(m(),h("div",jl,[l(w,{dense:"",flat:"",color:"primary",icon:"edit",onClick:o[0]||(o[0]=p=>t.showDialog=!0)}),i.numWords>r.section.word_limit?(m(),h("small",Gl," Exceeded word limit ("+_(i.numWords)+"/"+_(r.section.word_limit)+") ",1)):V("",!0),l(Se,{onSubmit:i.updateSection,class:"q-gutter-md"},{default:s(()=>[l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[2]||(o[2]=p=>t.showDialog=p),persistent:"","full-width":"","full-height":""},{default:s(()=>[l(F,{style:{width:"500px"}},{default:s(()=>[l(C,{class:"flex justify-between"},{default:s(()=>[n("div",Wl,[y(_(r.section.title)+" ",1),n("small",null,"("+_(i.numWords)+" / "+_(r.section.word_limit)+" words)",1)]),l(w,{color:"primary",flat:"",dense:"",icon:"close",onClick:i.cancelCreate},null,8,["onClick"])]),_:1}),l(I),l(C,{class:"scroll"},{default:s(()=>[i.numWords>r.section.word_limit?(m(),h("small",zl," Exceeded word limit ("+_(i.numWords)+"/"+_(r.section.word_limit)+") ",1)):V("",!0),l(Ft,{modelValue:t.formData[r.section.name],"onUpdate:modelValue":o[1]||(o[1]=p=>t.formData[r.section.name]=p),label:"Title of your proposal",outlined:"",required:"","min-height":"65vh"},null,8,["modelValue"]),n("div",Hl,[i.numWords>r.section.word_limit?(m(),h("small",Kl," Exceeded word limit ("+_(i.numWords)+"/"+_(r.section.word_limit)+") ",1)):V("",!0)])]),_:1}),l(I,{spaced:""}),l(se,{align:"right"},{default:s(()=>[l(w,{flat:"",color:"primary",label:"Cancel",onClick:i.cancelCreate},null,8,["onClick"]),l(w,{disabled:i.numWords>r.section.word_limit,color:"primary",label:"Save",onClick:i.updateSection},null,8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])])):V("",!0)}var Jl=D(Ql,[["render",Yl]]);const Ue="q-slider__marker-labels",Xl=e=>({value:e}),Zl=({marker:e})=>P("div",{key:e.value,style:e.style,class:e.classes},e.label),We=[34,37,40,33,39,38],ea={...Wt,...Ot,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ta=["pan","update:modelValue","change"];function oa({updateValue:e,updatePosition:o,getDragging:r,formAttrs:d}){const{props:t,emit:i,slots:a,proxy:{$q:u}}=je(),p=Gt(t,u),S=Nt(d),O=Y(!1),W=Y(!1),N=Y(!1),X=Y(!1),T=f(()=>t.vertical===!0?"--v":"--h"),le=f(()=>"-"+(t.switchLabelSide===!0?"switched":"standard")),R=f(()=>t.vertical===!0?t.reverse===!0:t.reverse!==(u.lang.rtl===!0)),z=f(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),$=f(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax),v=f(()=>t.disable!==!0&&t.readonly!==!0&&z.value<$.value),M=f(()=>(String(t.step).trim().split(".")[1]||"").length),H=f(()=>t.step===0?1:t.step),He=f(()=>v.value===!0?t.tabindex||0:-1),ne=f(()=>t.max-t.min),$e=f(()=>$.value-z.value),ie=f(()=>he(z.value)),fe=f(()=>he($.value)),ue=f(()=>t.vertical===!0?R.value===!0?"bottom":"top":R.value===!0?"right":"left"),xe=f(()=>t.vertical===!0?"height":"width"),Ke=f(()=>t.vertical===!0?"width":"height"),Ce=f(()=>t.vertical===!0?"vertical":"horizontal"),Ye=f(()=>{const c={role:"slider","aria-valuemin":z.value,"aria-valuemax":$.value,"aria-orientation":Ce.value,"data-step":t.step};return t.disable===!0?c["aria-disabled"]="true":t.readonly===!0&&(c["aria-readonly"]="true"),c}),Je=f(()=>`q-slider q-slider${T.value} q-slider--${O.value===!0?"":"in"}active inline no-wrap `+(t.vertical===!0?"row":"column")+(t.disable===!0?" disabled":" q-slider--enabled"+(v.value===!0?" q-slider--editable":""))+(N.value==="both"?" q-slider--focus":"")+(t.label||t.labelAlways===!0?" q-slider--label":"")+(t.labelAlways===!0?" q-slider--label-always":"")+(p.value===!0?" q-slider--dark":"")+(t.dense===!0?" q-slider--dense q-slider--dense"+T.value:""));function ce(c){const g="q-slider__"+c;return`${g} ${g}${T.value} ${g}${T.value}${le.value}`}function De(c){const g="q-slider__"+c;return`${g} ${g}${T.value}`}const Xe=f(()=>{const c=t.selectionColor||t.color;return"q-slider__selection absolute"+(c!==void 0?` text-${c}`:"")}),Ze=f(()=>De("markers")+" absolute overflow-hidden"),et=f(()=>De("track-container")),tt=f(()=>ce("pin")),ot=f(()=>ce("label")),lt=f(()=>ce("text-container")),at=f(()=>ce("marker-labels-container")+(t.markerLabelsClass!==void 0?` ${t.markerLabelsClass}`:"")),rt=f(()=>"q-slider__track relative-position no-outline"+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),st=f(()=>{const c={[Ke.value]:t.trackSize};return t.trackImg!==void 0&&(c.backgroundImage=`url(${t.trackImg}) !important`),c}),nt=f(()=>"q-slider__inner absolute"+(t.innerTrackColor!==void 0?` bg-${t.innerTrackColor}`:"")),qe=f(()=>{const c={[ue.value]:`${100*ie.value}%`,[xe.value]:`${100*(fe.value-ie.value)}%`};return t.innerTrackImg!==void 0&&(c.backgroundImage=`url(${t.innerTrackImg}) !important`),c});function it(c){const{min:g,max:k,step:x}=t;let E=g+c*(k-g);if(x>0){const Z=(E-g)%x;E+=(Math.abs(Z)>=x/2?(Z<0?-1:1)*x:0)-Z}return M.value>0&&(E=parseFloat(E.toFixed(M.value))),oe(E,z.value,$.value)}function he(c){return ne.value===0?0:(c-t.min)/ne.value}function ut(c,g){const k=$t(c),x=t.vertical===!0?oe((k.top-g.top)/g.height,0,1):oe((k.left-g.left)/g.width,0,1);return oe(R.value===!0?1-x:x,ie.value,fe.value)}const Ve=f(()=>xt(t.markers)===!0?t.markers:H.value),Pe=f(()=>{const c=[],g=Ve.value,k=t.max;let x=t.min;do c.push(x),x+=g;while(x<k);return c.push(k),c}),Te=f(()=>{const c=` ${Ue}${T.value}-`;return Ue+`${c}${t.switchMarkerLabelsSide===!0?"switched":"standard"}${c}${R.value===!0?"rtl":"ltr"}`}),_e=f(()=>t.markerLabels===!1?null:dt(t.markerLabels).map((c,g)=>({index:g,value:c.value,label:c.label||c.value,classes:Te.value+(c.classes!==void 0?" "+c.classes:""),style:{...Ee(c.value),...c.style||{}}}))),Me=f(()=>({markerList:_e.value,markerMap:mt.value,classes:Te.value,getStyle:Ee})),ct=f(()=>{if($e.value!==0){const c=100*Ve.value/$e.value;return{...qe.value,backgroundSize:t.vertical===!0?`2px ${c}%`:`${c}% 2px`}}return null});function dt(c){if(c===!1)return null;if(c===!0)return Pe.value.map(Xl);if(typeof c=="function")return Pe.value.map(k=>{const x=c(k);return ye(x)===!0?{...x,value:k}:{value:k,label:x}});const g=({value:k})=>k>=t.min&&k<=t.max;return Array.isArray(c)===!0?c.map(k=>ye(k)===!0?k:{value:k}).filter(g):Object.keys(c).map(k=>{const x=c[k],E=Number(k);return ye(x)===!0?{...x,value:E}:{value:E,label:x}}).filter(g)}function Ee(c){return{[ue.value]:`${100*(c-t.min)/ne.value}%`}}const mt=f(()=>{if(t.markerLabels===!1)return null;const c={};return _e.value.forEach(g=>{c[g.value]=g}),c});function pt(){if(a["marker-label-group"]!==void 0)return a["marker-label-group"](Me.value);const c=a["marker-label"]||Zl;return _e.value.map(g=>c({marker:g,...Me.value}))}const ft=f(()=>[[jt,ht,void 0,{[Ce.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function ht(c){c.isFinal===!0?(X.value!==void 0&&(o(c.evt),c.touch===!0&&e(!0),X.value=void 0,i("pan","end")),O.value=!1,N.value=!1):c.isFirst===!0?(X.value=r(c.evt),o(c.evt),e(),O.value=!0,i("pan","start")):(o(c.evt),e())}function Ie(){N.value=!1}function _t(c){o(c,r(c)),e(),W.value=!0,O.value=!0,document.addEventListener("mouseup",ve,!0)}function ve(){W.value=!1,O.value=!1,e(!0),Ie(),document.removeEventListener("mouseup",ve,!0)}function vt(c){o(c,r(c)),e(!0)}function gt(c){We.includes(c.keyCode)&&e(!0)}function bt(c){if(t.vertical===!0)return null;const g=u.lang.rtl!==t.reverse?1-c:c;return{transform:`translateX(calc(${2*g-1} * ${t.thumbSize} / 2 + ${50-100*g}%))`}}function yt(c){const g=f(()=>W.value===!1&&(N.value===c.focusValue||N.value==="both")?" q-slider--focus":""),k=f(()=>`q-slider__thumb q-slider__thumb${T.value} q-slider__thumb${T.value}-${R.value===!0?"rtl":"ltr"} absolute non-selectable`+g.value+(c.thumbColor.value!==void 0?` text-${c.thumbColor.value}`:"")),x=f(()=>({width:t.thumbSize,height:t.thumbSize,[ue.value]:`${100*c.ratio.value}%`,zIndex:N.value===c.focusValue?2:void 0})),E=f(()=>c.labelColor.value!==void 0?` text-${c.labelColor.value}`:""),Z=f(()=>bt(c.ratio.value)),ge=f(()=>"q-slider__text"+(c.labelTextColor.value!==void 0?` text-${c.labelTextColor.value}`:""));return()=>{const be=[P("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[P("path",{d:t.thumbPath})]),P("div",{class:"q-slider__focus-ring fit"})];return(t.label===!0||t.labelAlways===!0)&&(be.push(P("div",{class:tt.value+" absolute fit no-pointer-events"+E.value},[P("div",{class:ot.value,style:{minWidth:t.thumbSize}},[P("div",{class:lt.value,style:Z.value},[P("span",{class:ge.value},c.label.value)])])])),t.name!==void 0&&t.disable!==!0&&S(be,"push")),P("div",{class:k.value,style:x.value,...c.getNodeData()},be)}}function wt(c,g,k,x){const E=[];t.innerTrackColor!=="transparent"&&E.push(P("div",{key:"inner",class:nt.value,style:qe.value})),t.selectionColor!=="transparent"&&E.push(P("div",{key:"selection",class:Xe.value,style:c.value})),t.markers!==!1&&E.push(P("div",{key:"marker",class:Ze.value,style:ct.value})),x(E);const Z=[Ct("div",{key:"trackC",class:et.value,tabindex:g.value,...k.value},[P("div",{class:rt.value,style:st.value},E)],"slide",v.value,()=>ft.value)];if(t.markerLabels!==!1){const ge=t.switchMarkerLabelsSide===!0?"unshift":"push";Z[ge](P("div",{key:"markerL",class:at.value},pt()))}return Z}return Qe(()=>{document.removeEventListener("mouseup",ve,!0)}),{state:{active:O,focus:N,preventFocus:W,dragging:X,editable:v,classes:Je,tabindex:He,attributes:Ye,step:H,decimals:M,trackLen:ne,innerMin:z,innerMinRatio:ie,innerMax:$,innerMaxRatio:fe,positionProp:ue,sizeProp:xe,isReversed:R},methods:{onActivate:_t,onMobileClick:vt,onBlur:Ie,onKeyup:gt,getContent:wt,getThumbRenderFn:yt,convertRatioToModel:it,convertModelToRatio:he,getDraggingRatio:ut}}}const la=()=>({});var aa=Oe({name:"QSlider",props:{...ea,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:ta,setup(e,{emit:o}){const{proxy:{$q:r}}=je(),{state:d,methods:t}=oa({updateValue:T,updatePosition:R,getDragging:le,formAttrs:Qt(e)}),i=Y(null),a=Y(0),u=Y(0);function p(){u.value=e.modelValue===null?d.innerMin.value:oe(e.modelValue,d.innerMin.value,d.innerMax.value)}de(()=>`${e.modelValue}|${d.innerMin.value}|${d.innerMax.value}`,p),p();const S=f(()=>t.convertModelToRatio(u.value)),O=f(()=>d.active.value===!0?a.value:S.value),W=f(()=>{const v={[d.positionProp.value]:`${100*d.innerMinRatio.value}%`,[d.sizeProp.value]:`${100*(O.value-d.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(v.backgroundImage=`url(${e.selectionImg}) !important`),v}),N=t.getThumbRenderFn({focusValue:!0,getNodeData:la,ratio:O,label:f(()=>e.labelValue!==void 0?e.labelValue:u.value),thumbColor:f(()=>e.thumbColor||e.color),labelColor:f(()=>e.labelColor),labelTextColor:f(()=>e.labelTextColor)}),X=f(()=>d.editable.value!==!0?{}:r.platform.is.mobile===!0?{onClick:t.onMobileClick}:{onMousedown:t.onActivate,onFocus:z,onBlur:t.onBlur,onKeydown:$,onKeyup:t.onKeyup});function T(v){u.value!==e.modelValue&&o("update:modelValue",u.value),v===!0&&o("change",u.value)}function le(){return i.value.getBoundingClientRect()}function R(v,M=d.dragging.value){const H=t.getDraggingRatio(v,M);u.value=t.convertRatioToModel(H),a.value=e.snap!==!0||e.step===0?H:t.convertModelToRatio(u.value)}function z(){d.focus.value=!0}function $(v){if(!We.includes(v.keyCode))return;Dt(v);const M=([34,33].includes(v.keyCode)?10:1)*d.step.value,H=([34,37,40].includes(v.keyCode)?-1:1)*(d.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*M;u.value=oe(parseFloat((u.value+H).toFixed(d.decimals.value)),d.innerMin.value,d.innerMax.value),T()}return()=>{const v=t.getContent(W,d.tabindex,X,M=>{M.push(N())});return P("div",{ref:i,class:d.classes.value+(e.modelValue===null?" q-slider--no-value":""),...d.attributes.value,"aria-valuenow":e.modelValue},v)}}});const ra={props:{min:{type:Number,default:0},max:{type:Number,default:10},proposal:{type:Object,required:!0},section:{type:Object,required:!0},score:{required:!0,default:null}},watch:{score(e,o){this.mark=this.score[this.section.name],this.comment=this.score[`${this.section.name}_comment`]}},data(){return{comment:"",mark:0,formData:{l:4}}},methods:{updateSectionScore(e){this.mark>this.section.max_score?this.mark=this.section.max_score:this.mark<0&&(this.mark=0),this.formData[this.section.name]=this.mark,this.$api.patch(`scores/${e}/`,this.formData).then(o=>{}),this.$bus.emit("score-updated",{section:this.section.name,score:this.mark})},updateSectionComment(e){this.formData[`${this.section.name}_comment`]=this.comment,this.$api.patch(`scores/${e}/`,this.formData).then(o=>{})}}},sa={key:0,class:"q-mb-sm q-mt-sm"},na=n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"Score"),n("th",{class:"text-left"},"Comment")])],-1),ia={class:""},ua={class:"q-td--no-hover"},ca={class:"text-center"},da=["min","max"],ma={class:"q-td--no-hover"};function pa(e,o,r,d,t,i){return r.score&&r.score.status=="IN PROGRESS"&&this.$userHasAnyGroups(["reviewer","grants_officer"])?(m(),h("div",sa,[l(pe,{bordered:"",flat:"",square:"",style:{background:"#f5f5f5"}},{default:s(()=>[na,n("tbody",null,[n("tr",ia,[n("td",ua,[n("div",ca,[A(n("input",{type:"number",min:r.min,max:r.max,"onUpdate:modelValue":o[0]||(o[0]=a=>t.mark=a),onBlur:o[1]||(o[1]=a=>i.updateSectionScore(r.score.id))},null,40,da),[[qt,t.mark]]),y("/"+_(r.max),1)]),l(aa,{modelValue:t.mark,"onUpdate:modelValue":o[2]||(o[2]=a=>t.mark=a),min:r.min,max:r.max,step:1,color:"green",onChange:o[3]||(o[3]=a=>i.updateSectionScore(r.score.id))},null,8,["modelValue","min","max"])]),n("td",ma,[l(K,{outlined:"",multiline:"",modelValue:t.comment,"onUpdate:modelValue":o[4]||(o[4]=a=>t.comment=a),type:"textarea",label:"Comment (Optional)",onBlur:o[5]||(o[5]=a=>i.updateSectionComment(r.score.id))},null,8,["modelValue"])])])])]),_:1})])):V("",!0)}var fa=D(ra,[["render",pa]]);const ha={data(){return{loading:!1,showDialog:!1,score:null,sections:[],formData:{strengths:null,weaknesses:null,status:"COMPLETED",is_recommended:null}}},created(){this.getScore(),this.getSections()},computed:{percentageScore(){var t,i;const e=(t=this.sections)==null?void 0:t.map(a=>a.max_score),o=(i=this.sections)==null?void 0:i.map(a=>this.score[a.name]||0);console.log(o);const r=o.reduce((a,u)=>a+u,0),d=e.reduce((a,u)=>a+u,0);return r/d*100}},methods:{getScore(){var e;this.$api.get(`scores/?user=${((e=this.$authStore.currentUser)==null?void 0:e.id)||0}&proposal=${this.$route.params.proposal_id}`).then(o=>{o.data.length==1&&(this.score=o.data[0],this.formData.strengths=this.score.strengths,this.formData.weaknesses=this.score.weaknesses)})},getSections(){this.$api.get("sections/").then(e=>{this.sections=e.data})},startDialog(){this.getScore(),this.showDialog=!0},submitScore(){confirm("This action is irreversible. Please confirm submission of your score sheet")&&(this.$utilsStore.setLoading(!0),this.$api.patch(`scores/${this.score.id}/`,this.formData).then(e=>{this.score=e.data,this.$utilsStore.setLoading(!1),this.showDialog=!1,location.reload()}))}}},_a={key:0},va=n("div",{class:"text-h6"},"Submit Review",-1),ga=n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"Section"),n("th",{class:"text-right"},"Score"),n("th",{class:"text-left"},"Comment")])],-1),ba={key:0},ya={class:"text-left"},wa={class:"text-left"},ka={class:"bg-grey-4"},Sa=n("td",null,"Total percentage score",-1),$a={colspan:"2"},xa={class:"q-pa-sm row"},Ca={class:"col-12 q-px-sm"},Da={class:"col-12 q-px-sm"},qa={class:"q-pa-md"},Va=n("p",null,"Do you recommend this proposal for funding?",-1);function Pa(e,o,r,d,t,i){return t.score&&t.score.status=="IN PROGRESS"&&e.$userHasAnyGroups(["reviewer"])?(m(),h("div",_a,[l(w,{color:"primary",label:"Submit Review",onClick:i.startDialog},null,8,["onClick"]),l(J,{modelValue:t.showDialog,"onUpdate:modelValue":o[6]||(o[6]=a=>t.showDialog=a),persistent:"","full-height":""},{default:s(()=>[l(F,{style:{"min-width":"22rem"}},{default:s(()=>[l(C,{class:"flex justify-between"},{default:s(()=>[va,l(w,{color:"primary",flat:"",dense:"",icon:"close",onClick:o[0]||(o[0]=a=>t.showDialog=!1)})]),_:1}),l(I),l(C,{class:"scroll"},{default:s(()=>[l(pe,{separator:"cell",flat:"",dense:"",bordered:""},{default:s(()=>[ga,n("tbody",null,[(m(!0),h(L,null,B(t.sections,a=>(m(),h(L,{key:a.id},[a.max_score>0?(m(),h("tr",ba,[n("td",ya,_(a.title),1),n("td",{class:Ne(["text-center",{"bg-green-2":t.score[a.name]>a.max_score/2,"bg-red-1":t.score[a.name]<=a.max_score/2}])},_(t.score[a.name])+"/"+_(a.max_score),3),n("td",wa,_(t.score[`${a.name}_comment`]),1)])):V("",!0)],64))),128)),n("tr",ka,[Sa,n("td",$a,_(i.percentageScore)+"%",1)])])]),_:1})]),_:1}),n("div",xa,[n("div",Ca,[l(me,{outline:"",color:"teal","text-color":"white",icon:"arrow_circle_up"},{default:s(()=>[y(" Strengths ")]),_:1}),l(K,{modelValue:t.formData.strengths,"onUpdate:modelValue":o[1]||(o[1]=a=>t.formData.strengths=a),type:"textarea",outlined:"",label:"Strengths"},null,8,["modelValue"])]),n("div",Da,[l(me,{outline:"",color:"primary","text-color":"white",icon:"arrow_circle_down"},{default:s(()=>[y(" Weaknesses ")]),_:1}),l(K,{modelValue:t.formData.weaknesses,"onUpdate:modelValue":o[2]||(o[2]=a=>t.formData.weaknesses=a),type:"textarea",outlined:"",label:"Weaknesses"},null,8,["modelValue"])])]),n("div",qa,[Va,l(ke,{modelValue:t.formData.is_recommended,"onUpdate:modelValue":o[3]||(o[3]=a=>t.formData.is_recommended=a),val:!0,label:"Yes"},null,8,["modelValue"]),l(ke,{modelValue:t.formData.is_recommended,"onUpdate:modelValue":o[4]||(o[4]=a=>t.formData.is_recommended=a),val:!1,label:"No"},null,8,["modelValue"])]),l(I,{spaced:""}),l(C,{align:"right"},{default:s(()=>[l(w,{color:"primary",flat:"",label:"Cancel",onClick:o[5]||(o[5]=a=>t.showDialog=!1)}),l(w,{color:"primary",label:"Submit Review",onClick:i.submitScore},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):V("",!0)}var Ta=D(ha,[["render",Pa]]);const Ma={props:{loading:Boolean},data(){return{}},computed:{show(){return this.$utilsStore.isLoading}},created(){this.$utilsStore.setLoading(!1)}},Ea={key:0,class:"loading"};function Ia(e,o,r,d,t,i){return i.show?(m(),h("div",Ea,[l(J,{modelValue:i.show,"onUpdate:modelValue":o[0]||(o[0]=a=>i.show=a),persistent:""},{default:s(()=>[l(Ht,{color:"primary",size:"3rem",thickness:5})]),_:1},8,["modelValue"])])):V("",!0)}var La=D(Ma,[["render",Ia]]);const Ra={props:{message:{type:String,required:!0}}};function Ua(e,o,r,d,t,i){return r.message?(m(),b(F,{key:0},{default:s(()=>[l(C,{class:"flex justify-between no-wrap q-gutter-x-lg items-stretch"},{default:s(()=>[n("div",null,_(r.message),1),l(w,{flat:"",icon:"close",color:"primary",dense:"",size:"sm",onClick:o[0]||(o[0]=a=>e.$emit("close",""))})]),_:1})]),_:1})):V("",!0)}var Aa=D(Ra,[["render",Ua]]);const Ba={props:{message:{type:String,required:!0,default:"alert_circle"},icon:{type:String,required:!0}}};function Fa(e,o,r,d,t,i){return m(),h("div",null,[l(F,{flat:"",bordered:"",class:"q-pa-md"},{default:s(()=>[l(j,{size:"md",name:r.icon},null,8,["name"]),y(" "+_(r.message),1)]),_:1})])}var Oa=D(Ba,[["render",Fa]]);const Na={props:{showModal:Boolean,errorResponse:Object},data(){return{show:!1,errorMessages:{}}},methods:{},watch:{errorResponse(e){this.errorMessages=e.data,this.show=!0}}},Qa=n("div",{class:"text-h6"},"Errors",-1),ja={class:"text-left"},Ga={class:"text-right"};function Wa(e,o,r,d,t,i){return m(),b(J,{modelValue:t.show,"onUpdate:modelValue":o[1]||(o[1]=a=>t.show=a)},{default:s(()=>[l(F,null,{default:s(()=>[l(C,null,{default:s(()=>[Qa]),_:1}),l(I),l(C,null,{default:s(()=>[l(pe,{flat:"",bordered:""},{default:s(()=>[n("tbody",null,[(m(!0),h(L,null,B(t.errorMessages,(a,u)=>(m(),h("tr",{key:u},[n("td",ja,[n("strong",null,_(u),1)]),n("td",Ga,[n("ul",null,[(m(!0),h(L,null,B(a,(p,S)=>(m(),h("li",{key:S},_(p),1))),128))])])]))),128))])]),_:1})]),_:1}),l(I),l(se,{align:"right"},{default:s(()=>[l(w,{color:"primary",label:"Close",onClick:o[0]||(o[0]=a=>t.show=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var za=D(Na,[["render",Wa]]);const Ha={props:{label:String,options:{type:Array,required:!0},value:String},data(){return{selectedOption:this.value||null}},watch:{selectedOption(e){this.$emit("input",e)}}};function Ka(e,o,r,d,t,i){return m(),h("div",null,[n("label",null,_(r.label),1),n("div",null,[(m(!0),h(L,null,B(r.options,(a,u)=>(m(),b(ke,{key:u,modelValue:t.selectedOption,"onUpdate:modelValue":o[0]||(o[0]=p=>t.selectedOption=p),val:a.value},{default:s(()=>[y(_(a.label),1)]),_:2},1032,["modelValue","val"]))),128))])])}var Ya=D(Ha,[["render",Ka]]);const Ja={name:"OptionsField",props:{value:{type:String},options:{type:Array,required:!0},label:{type:String,required:!0},hint:String,error:String},data(){return{selectedOption:this.value}},watch:{selectedOption(e){this.$emit("input",e)}}},Xa={class:"q-field q-my-sm"};function Za(e,o,r,d,t,i){return m(),h("div",Xa,[l(ae,{dense:"",outlined:"",modelValue:t.selectedOption,"onUpdate:modelValue":o[0]||(o[0]=a=>t.selectedOption=a),options:r.options,label:r.label,hint:r.hint,error:r.error},null,8,["modelValue","options","label","hint","error"])])}var er=D(Ja,[["render",Za]]),tr=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],or=function(e){return tr.map(function(o){return o.toLowerCase()}).indexOf(e.toLowerCase())!==-1},lr=function(e,o,r){Object.keys(o).filter(or).forEach(function(d){var t=o[d];typeof t=="function"&&(d==="onInit"?t(e,r):r.on(d.substring(2),function(i){return t(i,r)}))})},ar=function(e,o,r,d){var t=e.modelEvents?e.modelEvents:null,i=Array.isArray(t)?t.join(" "):t;de(d,function(a,u){r&&typeof a=="string"&&a!==u&&a!==r.getContent({format:e.outputFormat})&&r.setContent(a)}),r.on(i||"change input undo redo",function(){o.emit("update:modelValue",r.getContent({format:e.outputFormat}))})},rr=function(e,o,r,d,t,i){d.setContent(i()),r.attrs["onUpdate:modelValue"]&&ar(o,r,d,t),lr(e,r.attrs,d)},Ae=0,ze=function(e){var o=Date.now(),r=Math.floor(Math.random()*1e9);return Ae++,e+"_"+r+Ae+String(o)},sr=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},Be=function(e){return typeof e=="undefined"||e===""?[]:Array.isArray(e)?e:e.split(" ")},nr=function(e,o){return Be(e).concat(Be(o))},ir=function(e){return e==null},Fe=function(){return{listeners:[],scriptId:ze("tiny-script"),scriptLoaded:!1}},ur=function(){var e=Fe(),o=function(t,i,a,u){var p=i.createElement("script");p.referrerPolicy="origin",p.type="application/javascript",p.id=t,p.src=a;var S=function(){p.removeEventListener("load",S),u()};p.addEventListener("load",S),i.head&&i.head.appendChild(p)},r=function(t,i,a){e.scriptLoaded?a():(e.listeners.push(a),t.getElementById(e.scriptId)||o(e.scriptId,t,i,function(){e.listeners.forEach(function(u){return u()}),e.scriptLoaded=!0}))},d=function(){e=Fe()};return{load:r,reinitialize:d}},cr=ur(),dr=function(){return typeof window!="undefined"?window:global},ee=function(){var e=dr();return e&&e.tinymce?e.tinymce:null},mr={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},te=globalThis&&globalThis.__assign||function(){return te=Object.assign||function(e){for(var o,r=1,d=arguments.length;r<d;r++){o=arguments[r];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},te.apply(this,arguments)},pr=function(e,o,r,d){return e(d||"div",{id:o,ref:r})},fr=function(e,o,r){return e("textarea",{id:o,visibility:"hidden",ref:r})},hr=Vt({props:mr,setup:function(e,o){var r=e.init?te({},e.init):{},d=Pt(e),t=d.disabled,i=d.modelValue,a=d.tagName,u=Y(null),p=null,S=e.id||ze("tiny-vue"),O=e.init&&e.init.inline||e.inline,W=!!o.attrs["onUpdate:modelValue"],N=!0,X=e.initialValue?e.initialValue:"",T="",le=function($){return W?function(){return i!=null&&i.value?i.value:""}:function(){return $?X:T}},R=function(){var $=le(N),v=te(te({},r),{readonly:e.disabled,target:u.value,plugins:nr(r.plugins,e.plugins),toolbar:e.toolbar||r.toolbar,inline:O,setup:function(M){p=M,M.on("init",function(H){return rr(H,e,o,M,i,$)}),typeof r.setup=="function"&&r.setup(M)}});sr(u.value)&&(u.value.style.visibility=""),ee().init(v),N=!1};de(t,function($){var v;p!==null&&(typeof((v=p.mode)===null||v===void 0?void 0:v.set)=="function"?p.mode.set($?"readonly":"design"):p.setMode($?"readonly":"design"))}),de(a,function($){var v;W||(T=p.getContent()),(v=ee())===null||v===void 0||v.remove(p),Le(function(){return R()})}),Tt(function(){if(ee()!==null)R();else if(u.value&&u.value.ownerDocument){var $=e.cloudChannel?e.cloudChannel:"6",v=e.apiKey?e.apiKey:"no-api-key",M=ir(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(v,"/tinymce/").concat($,"/tinymce.min.js"):e.tinymceScriptSrc;cr.load(u.value.ownerDocument,M,R)}}),Qe(function(){ee()!==null&&ee().remove(p)}),O||(Mt(function(){N||R()}),Et(function(){var $;W||(T=p.getContent()),($=ee())===null||$===void 0||$.remove(p)}));var z=function($){var v;T=p.getContent(),(v=ee())===null||v===void 0||v.remove(p),r=te(te({},r),$),Le(function(){return R()})};return o.expose({rerender:z,getEditor:function(){return p}}),function(){return O?pr(P,S,u,e.tagName):fr(P,S,u)}}});const _r={name:"app",components:{editor:hr}},vr={id:"app"};function gr(e,o,r,d,t,i){const a=G("editor");return m(),h("div",vr,[l(a,{"api-key":"no-api-key",init:{height:500,menubar:!1,plugins:["a11ychecker","advlist","advcode","advtable","autolink","checklist","export","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","powerpaste","fullscreen","formatpainter","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | casechange blocks | bold italic backcolor |           alignleft aligncenter alignright alignjustify |           bullist numlst checklist outdent indent | removeformat | a11ycheck code table help"},"initial-value":""})])}var br=D(_r,[["render",gr]]);const yr={"developer-menu":Xt,"developer-menu-2":so,"user-menu":co,"user-menu-2":_o,"main-menu":ko,"proposal-options":xo,"useful-docs":Vo,taglines:Io,"user-logout":Bo,"update-user":ll,"change-password":Ut,"create-proposal-dialog":ml,"proposal-file-attachment":$l,"submit-proposal":Ll,"accept-review":Nl,"section-editor":Jl,"score-editor":fa,"score-sheet":Ta,"proposal-score-sheets":zt,"loading-component":La,"message-box":Aa,"alert-msg":Oa,"error-message-modal":za,"radio-field":Ya,"options-field":er,"tiny-mce":br};var fs=async({app:e})=>{Object.entries(yr).forEach(([o,r])=>{e.component(o,r)})};export{fs as default};
